<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD><TITLE>Globule User Manual</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.07">

<link href="Globule.css" rel="stylesheet" title="preferred"/>
</HEAD>
<BODY >
<!--HEVEA command line is: hevea -exec xxdate.exe -fix -o doc.html doc.tex -->
<!--HTMLHEAD-->

    <a class="topnav" href="http://www.globule.org/">Globule</a> 
    > <a class="topnav" href="index.html">Documentation</a> <br/>
    <table class="pagemain"><tr><td>
  <!--ENDHTML-->
<!--PREFIX <ARG >Globule User Manual: </ARG>-->
<!--CUT DEF section 1 -->





<H1 ALIGN=center>Globule User Manual</H1>

<H3 ALIGN=center><A HREF="http://www.halderen.net/">Berry&nbsp;van&nbsp;Halderen</A> &nbsp;&nbsp;<A HREF="http://www.cs.vu.nl/~gpierre/">Guillaume&nbsp;Pierre</A></H3>

<H3 ALIGN=center>Version 1.3.1</H3> 
<H3 ALIGN=center><A HREF="http://www.globule.org/"><TT>http://www.globule.org/</TT></A></H3>
&nbsp;<BR>
<BLOCKQUOTE><B>Abstract: </B>Globule is a module for the Apache Web server that allows to replicate Web
sites across multiple servers potentially located worldwide. This improves the
site's performance, maintains the site available to its clients even if some
servers are down, and to a certain extent it allows to resist to flash crowds.<BR>
<BR>
A site owner must only define on which server(s) the site should be
replicated. Globule handles the replication automatically. It also monitors
the status of servers, so that it can automatically and transparently redirect
Web clients to one of the available replicas.
</BLOCKQUOTE>

<br><DIV ALIGN=center>
 <EM>This document is also available in </EM><A HREF="doc.pdf"><EM>PDF
 format</EM></A><EM>.</EM>
</DIV>
<br><BR>
<BR>
<!--TOC section Table of Contents-->

<H2>Table of Contents</H2><!--SEC END -->

<UL><LI>
<A HREF="#htoc1">1&nbsp;&nbsp;Introduction</A>
<UL><LI>
<A HREF="#htoc2">1.1&nbsp;&nbsp;Globule Features</A>
<LI><A HREF="#htoc3">1.2&nbsp;&nbsp;Terminology</A>
<LI><A HREF="#htoc4">1.3&nbsp;&nbsp;Known issues/limitations</A>
</UL>
<LI><A HREF="#htoc5">2&nbsp;&nbsp;Globule Installation</A>
<UL><LI>
<A HREF="#htoc6">2.1&nbsp;&nbsp;
 Unix and Linux All-in-one installation</A>
<LI><A HREF="#htoc7">2.2&nbsp;&nbsp;
 Windows installation</A>
<LI><A HREF="#htoc8">2.3&nbsp;&nbsp;
 Source distribution</A>
<UL><LI>
<A HREF="#htoc9">2.3.1&nbsp;&nbsp;Apache installation from source</A>
<LI><A HREF="#htoc10">2.3.2&nbsp;&nbsp;Globule installation from source</A>
<LI><A HREF="#htoc11">2.3.3&nbsp;&nbsp;PHP installation from source</A>
</UL>
<LI><A HREF="#htoc12">2.4&nbsp;&nbsp;
 Installation from RPMs and alikes</A>
</UL>
<LI><A HREF="#htoc13">3&nbsp;&nbsp;
 Server Configuration</A>
<UL><LI>
<A HREF="#htoc14">3.1&nbsp;&nbsp;
 Basic Server Configuration</A>
<UL><LI>
<A HREF="#htoc15">3.1.1&nbsp;&nbsp;How to update your configuration</A>
<LI><A HREF="#htoc16">3.1.2&nbsp;&nbsp;Check your Apache configuration</A>
<LI><A HREF="#htoc17">3.1.3&nbsp;&nbsp;Add Globule support</A>
</UL>
<LI><A HREF="#htoc18">3.2&nbsp;&nbsp;
 Site Replication</A>
<UL><LI>
<A HREF="#htoc19">3.2.1&nbsp;&nbsp;Using a backup</A>
<LI><A HREF="#htoc20">3.2.2&nbsp;&nbsp;Replicating a partial site</A>
</UL>
<LI><A HREF="#htoc21">3.3&nbsp;&nbsp;
 Client Redirection using DNS</A>
<UL><LI>
<A HREF="#htoc22">3.3.1&nbsp;&nbsp;What is DNS redirection?</A>
<LI><A HREF="#htoc23">3.3.2&nbsp;&nbsp;Required elements to setup DNS redirection in Globule</A>
<LI><A HREF="#htoc24">3.3.3&nbsp;&nbsp;Setting up DNS entries for redirection</A>
<LI><A HREF="#htoc25">3.3.4&nbsp;&nbsp;Configuring Globule for DNS redirection</A>
<LI><A HREF="#htoc26">3.3.5&nbsp;&nbsp;Testing DNS redirection</A>
<LI><A HREF="#htoc27">3.3.6&nbsp;&nbsp;Advanced usage</A>
</UL>
<LI><A HREF="#htoc28">3.4&nbsp;&nbsp;
 System Monitoring</A>
<UL><LI>
<A HREF="#htoc29">3.4.1&nbsp;&nbsp;Error log</A>
<LI><A HREF="#htoc30">3.4.2&nbsp;&nbsp;Merged access log</A>
<LI><A HREF="#htoc31">3.4.3&nbsp;&nbsp;
 Utility program globuleutil</A>
<LI><A HREF="#htoc32">3.4.4&nbsp;&nbsp;Webalizer monitoring and the installer setup</A>
<LI><A HREF="#htoc33">3.4.5&nbsp;&nbsp;Globule monitoring web interface</A>
</UL>
<LI><A HREF="#htoc34">3.5&nbsp;&nbsp;
 Dynamically generated content</A>
<UL><LI>
<A HREF="#htoc35">3.5.1&nbsp;&nbsp;Adding PHP support to Apache</A>
<LI><A HREF="#htoc36">3.5.2&nbsp;&nbsp;
 Using Globule support in PHP</A>
<LI><A HREF="#htoc37">3.5.3&nbsp;&nbsp;MySQL query caching with Globule</A>
</UL>
</UL>
<LI><A HREF="#htoc38">4&nbsp;&nbsp;Supporting utilities</A>
<UL><LI>
<A HREF="#htoc39">4.1&nbsp;&nbsp;GlobuleUtil</A>
<LI><A HREF="#htoc40">4.2&nbsp;&nbsp;GlobuleCtl</A>
</UL>
<LI><A HREF="#htoc41">5&nbsp;&nbsp;Configuration Directive Reference</A>
<UL><LI>
<A HREF="#htoc42">5.1&nbsp;&nbsp;Generic Directives</A>
<UL><LI>
<A HREF="#htoc43">5.1.1&nbsp;&nbsp;GlobuleAdminURL</A>
<LI><A HREF="#htoc44">5.1.2&nbsp;&nbsp;GlobuleAdmURL</A>
<LI><A HREF="#htoc45">5.1.3&nbsp;&nbsp;GlobuleBrokerConfigurationSerial</A>
<LI><A HREF="#htoc46">5.1.4&nbsp;&nbsp;GlobuleFancyServerName</A>
<LI><A HREF="#htoc47">5.1.5&nbsp;&nbsp;GlobuleMonitor</A>
<LI><A HREF="#htoc48">5.1.6&nbsp;&nbsp;GlobuleDebugProfile</A>
<LI><A HREF="#htoc49">5.1.7&nbsp;&nbsp;GlobuleMemSize</A>
</UL>
<LI><A HREF="#htoc50">5.2&nbsp;&nbsp;Replication Directives</A>
<UL><LI>
<A HREF="#htoc51">5.2.1&nbsp;&nbsp;GlobuleReplicate</A>
<LI><A HREF="#htoc52">5.2.2&nbsp;&nbsp;GlobuleReplicaIs</A>
<LI><A HREF="#htoc53">5.2.3&nbsp;&nbsp;GlobuleBackupIs</A>
<LI><A HREF="#htoc54">5.2.4&nbsp;&nbsp;GlobuleRedirectorIs</A>
<LI><A HREF="#htoc55">5.2.5&nbsp;&nbsp;GlobuleReplicaFor</A>
<LI><A HREF="#htoc56">5.2.6&nbsp;&nbsp;GlobuleBackupFor</A>
<LI><A HREF="#htoc57">5.2.7&nbsp;&nbsp;GlobuleBackupForIs</A>
<LI><A HREF="#htoc58">5.2.8&nbsp;&nbsp;GlobuleRedirectorFor</A>
<LI><A HREF="#htoc59">5.2.9&nbsp;&nbsp;GlobuleDefaultReplicationPolicy</A>
<LI><A HREF="#htoc60">5.2.10&nbsp;&nbsp;GlobuleMaxDiskSpace</A>
<LI><A HREF="#htoc61">5.2.11&nbsp;&nbsp;GlobuleMaxMetaDocsInMemory</A>
<LI><A HREF="#htoc62">5.2.12&nbsp;&nbsp;GlobuleLockCount</A>
<LI><A HREF="#htoc63">5.2.13&nbsp;&nbsp;GlobuleDirectory</A>
<LI><A HREF="#htoc64">5.2.14&nbsp;&nbsp;GlobuleDatabase</A>
</UL>
<LI><A HREF="#htoc65">5.3&nbsp;&nbsp;Redirection Directives</A>
<UL><LI>
<A HREF="#htoc66">5.3.1&nbsp;&nbsp;GlobuleRedirectionMode</A>
<LI><A HREF="#htoc67">5.3.2&nbsp;&nbsp;GlobuleDefaultRedirectPolicy</A>
<LI><A HREF="#htoc68">5.3.3&nbsp;&nbsp;GlobuleBGPDataFile</A>
<LI><A HREF="#htoc69">5.3.4&nbsp;&nbsp;GlobuleBGPReloadAfter</A>
</UL>
<LI><A HREF="#htoc70">5.4&nbsp;&nbsp;DNS Redirection</A>
<UL><LI>
<A HREF="#htoc71">5.4.1&nbsp;&nbsp;GlobuleTTL</A>
<LI><A HREF="#htoc72">5.4.2&nbsp;&nbsp;GlobuleTTL_RR</A>
<LI><A HREF="#htoc73">5.4.3&nbsp;&nbsp;GlobuleTTL_AS</A>
<LI><A HREF="#htoc74">5.4.4&nbsp;&nbsp;GlobuleMaxIPCount</A>
<LI><A HREF="#htoc75">5.4.5&nbsp;&nbsp;GlobuleDNSRedirectionAddress</A>
</UL>
<LI><A HREF="#htoc76">5.5&nbsp;&nbsp;Periodic tasks</A>
<UL><LI>
<A HREF="#htoc77">5.5.1&nbsp;&nbsp;GlobuleHeartBeatInterval</A>
<LI><A HREF="#htoc78">5.5.2&nbsp;&nbsp;GlobulePolicyAdaptationInterval</A>
<LI><A HREF="#htoc79">5.5.3&nbsp;&nbsp;GlobuleContentTraversalInterval</A>
</UL>
<LI><A HREF="#htoc80">5.6&nbsp;&nbsp;Obscure and rare settings </A>
<UL><LI>
<A HREF="#htoc81">5.6.1&nbsp;&nbsp;GlobuleAnythingFor</A>
<LI><A HREF="#htoc82">5.6.2&nbsp;&nbsp;GlobuleMirrorIs</A>
<LI><A HREF="#htoc83">5.6.3&nbsp;&nbsp;GlobuleDisabledReplicaIs</A>
<LI><A HREF="#htoc84">5.6.4&nbsp;&nbsp;GlobuleProxyFor</A>
<LI><A HREF="#htoc85">5.6.5&nbsp;&nbsp;GlobuleOriginWeight</A>
<LI><A HREF="#htoc86">5.6.6&nbsp;&nbsp;GlobuleStaticResolv</A>
</UL>
<LI><A HREF="#htoc87">5.7&nbsp;&nbsp;Recognized units</A>
</UL>
<LI><A HREF="#htoc88">6&nbsp;&nbsp;
 Troubleshooting</A>
<UL><LI>
<A HREF="#htoc89">6.1&nbsp;&nbsp;Compatibility with other Apache modules and settings</A>
<UL><LI>
<A HREF="#htoc90">6.1.1&nbsp;&nbsp;Modules that won't work</A>
<LI><A HREF="#htoc91">6.1.2&nbsp;&nbsp;Constructions that won't work</A>
</UL>
<LI><A HREF="#htoc92">6.2&nbsp;&nbsp;System resource usage</A>
<UL><LI>
<A HREF="#htoc93">6.2.1&nbsp;&nbsp;
 Allow high quantities of shared memory in your operating system</A>
<LI><A HREF="#htoc94">6.2.2&nbsp;&nbsp;
 Allow large numbers of locks in your operating system</A>
</UL>
</UL>
<LI><A HREF="#htoc95">A&nbsp;&nbsp;
 Copyright notices</A>
<UL><LI>
<A HREF="#htoc96">A.1&nbsp;&nbsp;Apache httpd server</A>
<LI><A HREF="#htoc97">A.2&nbsp;&nbsp;PHP scripting language</A>
<LI><A HREF="#htoc98">A.3&nbsp;&nbsp;Smarty template engine</A>
<LI><A HREF="#htoc99">A.4&nbsp;&nbsp;GD graphical library</A>
<LI><A HREF="#htoc100">A.5&nbsp;&nbsp;Webalizer web-log report generator</A>
<LI><A HREF="#htoc101">A.6&nbsp;&nbsp;MySQL database</A>
</UL>
<LI><A HREF="#htoc102">B&nbsp;&nbsp;File structures and protocols</A>
<UL><LI>
<A HREF="#htoc103">B.1&nbsp;&nbsp;
 <TT>report.log</TT> structure</A>
</UL>
</UL>

<!--TOC section 1&nbsp;&nbsp;Introduction-->

<H2><A NAME="htoc1">1</A>&nbsp;&nbsp;<A NAME="sec:intro"></A>Introduction</H2><!--SEC END -->

<P>
Globule is a system that performs Web site replication. This means that WWW
documents are copied across multiple machines where clients can access them.
A document has one <EM>origin server</EM>, which is the machine where it is
edited and published. The origin server usually belongs to the owner of the
document. In addition, a document can have any number of <EM>replica
servers</EM>, which host copies of the original document and deliver them to the
clients. Replica servers do not necessarily belong to the owner of the
document.
</P>
<P>
Replicating a Web site has multiple advantages:
</P>
<UL><LI>
The documents remain accessible to clients even if some servers
 are down (provided that at least one of them is alive)
<LI>The performance of the site is optimized, because clients can
 fetch documents from a server close to them. Shorter
 server-to-client transfer distances usually mean faster downloads.
<LI>Multiple servers are better at handling a flash crowd than a
 single server. Flash crowds are events where the request load of a
 given site increases by several order of magnitudes within a few
 minutes or seconds. This frequently happens, for example, when
 <A HREF="http://en.wikipedia.org/wiki/Slashdot_effect">a page is being
 linked to by Slashdot</A>.
<LI>Playing with multiple servers is fun!
</UL>
<P>
 Globule is designed as a third-party module for the
 <A HREF="http://httpd.apache.org/docs-2.0/">Apache version 2.0.x Web
 server</A>.
 You will therefore benefit from all great
 features that made Apache the Number One Server On The Internet. In
 addition, Globule will provide replication functionalities to this
 server.
</P>
<!--TOC subsection 1.1&nbsp;&nbsp;Globule Features-->

<H3><A NAME="htoc2">1.1</A>&nbsp;&nbsp;Globule Features</H3><!--SEC END -->

<P>
 Globule provides the following features:
</P>
<UL><LI>
<B>Replication:</B> Web sites (or parts thereof) can be replicated
 across multiple servers, even if the involved servers do not belong to the
 same persons.
<LI><B>Client redirection:</B> Clients accessing the site are
 automatically redirected to one of the replicas. This can be done using HTTP
 or DNS redirection. Moreover, Globule supports several policies which allow
 one to decide to which replica each client should be redirected.
<LI><B>Fault-tolerance:</B> Each Globule server periodically checks the
 availability of the machines holding its replicas. In case one replica site
 is down or misconfigured, it will stop redirecting client requests to this
 replica until it has recovered. Globule also supports the creation of
 backups of the origin server so that the site will function correctly even
 if the origin server is down.
<LI><B>Monitoring:</B> Globule allows administrators to monitor the
 behavior of their system in three different ways. First, the logs of
 requests addressed to replicas are transfered back to the origin server to
 rebuild a ``global access log.'' Second, Globule can attach a cookie with
 each delivered document containing information on how this request was
 treated. Lastly it is possible to collect internal statistics on the usage
 pattern and process them using configurable filters.
<LI><B>Adaptive replication:</B> There are many ways by which a given
 document can be replicated and document updates can be taken into
 account. Unlike many other systems, Globule does not consider that there is
 one policy that is best in all cases&nbsp;[<A HREF="#pierre2002a"><CITE>2</CITE></A>]. Instead, it
 supports multiple policies and periodically checks for each document which
 policy is likely to offer best performance. When the current policy is not
 optimal, it is automatically replaced with the best one.
<LI><B>Dynamic document replication:</B> Globule can not only replicate
 static documents but also scripts that are executed at the server to
 generate content, such as PHP scripts. The scripts themselves are
 replicated and executed on replica servers. If a PHP script accesses a
 MySQL database, then Globule can also cache database queries to further
 optimize performance&nbsp;[<A HREF="#swami2005c"><CITE>3</CITE></A>].
<LI><B>Configuration server:</B> The
 <A HREF="http://www.globeworld.net/">Globe Broker System (GBS)</A> is a web
 site where Globule users can register, meet each other, and decide to
 replicate each other's content. Configuration files are automatically
 generated, which saves most users from the need to read most of this
 documentation.
</UL>
<P>
In addition to the current features, we are currently conducting research on
the following topics. When research is finished, these features will be
integrated into Globule.
</P>
<UL><LI>
<B>Latency estimation:</B> We developed a nifty way to estimate
 the latency between any pair of nodes in the Internet, that is the
 delay it takes to transfer a bit of information from one machine to
 the other. Instead of sending gazillions of messages between every
 pair of machines, our method is based on a very low number of actual
 measurements&nbsp;[<A HREF="#szymaniak2004a"><CITE>4</CITE></A>].
 A prototype is running fine, but it will take a while before we can
 integrate it into the Globule distribution.
<LI><B>Replica placement:</B> Based on latency estimations, we are
 now capable to analyze the location of clients requesting a Web
 site, and derive a set of locations where replica servers should
 ideally be placed&nbsp;[<A HREF="#szymaniak2005a"><CITE>5</CITE></A>].
<LI><B>Flash-crowd prediction and pro-active management:</B>
 The request rate of a web-site can sometimes change drastically within
 minutes such as when it is being referred in a popular bulletin board such
 as SlashDot. Flash-crowds, as they are called, often jam web-servers to the
 point where they become unusable. We are working on techniques to detect
 the early stages of flash-crowds, and pro-actively replicate the concerned
 sites such that they can serve every request
 efficiently&nbsp;[<A HREF="#baryshnikov2005"><CITE>1</CITE></A>].
</UL>
<!--TOC subsection 1.2&nbsp;&nbsp;Terminology-->

<H3><A NAME="htoc3">1.2</A>&nbsp;&nbsp;<A NAME="sec:intro:terminology"></A>Terminology</H3><!--SEC END -->

<br><HR WIDTH="80%" SIZE=2>
 <DIV ALIGN=center>
 <BR>
<DIV ALIGN=center><B>Figure 1: </B><FONT color="#A00000"><B> Globule Model</B><A NAME="fig:model"></A></FONT></DIV><BR>

 <IMG SRC="model.jpg"> 
 </DIV>
 <HR WIDTH="80%" SIZE=2><br>
<P>
Globule makes a strong distinction between a site and a server.
<A NAME="sec:intro:term:site"></A> A <EM>site</EM> is defined as a collection
of documents that belong to a given user.
<A NAME="sec:intro:term:server"></A> A <EM>server</EM> is a machine connected
to a network, which runs an instance of the Globule software. Each server may
host one or more sites, that is, be capable of delivering the site's content
to its clients. As shown in Figure&nbsp;<A HREF="#fig:model">1</A>, servers can be classified
in four categories according to the role they play with respect to this site.
</P>
<P>
<A NAME="sec:intro:term:origin"></A> Each site has one <EM>Origin server</EM>,
which typically belongs to the site owner. The origin contains the
authoritative version of all documents of the site. It is also in charge of
making all decisions on where, when and how replication of the site should
take place.
</P>
<P>
<A NAME="sec:intro:term:replica"></A> The origin server is helped delivering 
documents by any number of <EM>replica servers</EM>. Replica servers replicate
documents locally and deliver them to the clients. A replica server for a site
is typically operated by a different user than its origin, so the replica's
administrator may impose restrictions on the amount of resources (disk space,
bandwidth, etc,) that the hosted site can use on their machine. As a result,
each replica server typically contains only a partial copy of its hosted
site. Similarly to a caching proxy, when requested for a document not present
locally, a replica server fetches the document from its origin before
delivering it to the client.
</P>
<P>
<A NAME="sec:intro:term:backup"></A> When a replica server needs to fetch a
document from the origin, it obviously requires that the origin server is
available to deliver the document. Remember, however, that the origin server
is typically simply the desktop machine of the site owner. Such machines are
often unavailable for a multitude of reasons ranging from a voluntary shutdown
to a network failure. To overcome this problem, the origin server can define
any number of <EM>backup servers</EM>. Backups are very similar to replica
servers, except that they hold a <EM>full copy</EM> of the hosted site. If a
replica cannot contact the origin server, then it can obtain the requested
information from any backup. Backup servers also perform the role of a
regular replica server, helping serving the content of a site.
</P>
<P>
<A NAME="sec:intro:term:redirector"></A> Once documents have been replicated 
across multiple servers, one needs to automatically redirect client requests
to one of the replicas. This is done by one or more <EM>redirectors</EM>,
which know the list of all replica and backup servers for the site, monitor
their status, and redirect client requests to one of the currently available
servers. Redirectors can use two different mechanisms for redirection: in
HTTP redirection a redirector responds to HTTP requests from the clients with
a redirection return code 302. Alternatively, in DNS redirection, a
redirector implements a specialized DNS server that resolves the site's name
into the IP address of the destination replica.</P>
<P>
It should be clear that the distinction between origin, replica, backup and
redirector servers refers only to the role that a given server takes with
respect to any given site. The same server may for example simultaneously act
as the origin and one of the redirectors for its owner's site, as a backup for
a few selected friend's sites, as a replica for other sites, and as a
redirector for yet other sites.
</P>
<!--TOC subsection 1.3&nbsp;&nbsp;Known issues/limitations-->

<H3><A NAME="htoc4">1.3</A>&nbsp;&nbsp;Known issues/limitations</H3><!--SEC END -->

<P>
<UL><LI>
Globule only works with Apache version 2.0.x. It does <EM>not</EM>
 work with Apache version 1.3.x, and there is no plan on changing
 this.<BR>
<BR>
Apache version 2.1/2.2 is not supported up to and including Globule release
 1.3.1. This may change in future releases of Globule.
</UL>
</P>
<!--TOC section 2&nbsp;&nbsp;Globule Installation-->

<H2><A NAME="htoc5">2</A>&nbsp;&nbsp;<A NAME="sec:install"></A>Globule Installation</H2><!--SEC END -->

<P>
Globule adds replication functionality to the Apache web-server. There are
multiple ways to install Globule, Apache and additional optional software.
The normal installation procedure is the all-in-one package under Unix and
Linux (see Section&nbsp;<A HREF="#sec:install:installer">2.1</A>), or the Windows installer (see
Section&nbsp;<A HREF="#sec:install:winexe">2.2</A>).
</P>
<P>
In a number of special cases, it might be preferable to install Globule by
other means, such as if you want to add replication features to an already
existing Apache installation, you have a minimalistic system without compilers
or you want to rely on installation paths or packaging methodology of your
system. Section&nbsp;<A HREF="#sec:install:source">2.3</A> explains how to install Globule by
hand from source, while Section&nbsp;<A HREF="#sec:install:rpm">2.4</A> explains how to install
pre-compiled RPMs. Beware however that installing Globule by hand from
sources or by using pre-compiled RPMs requires:
</P>
<P>
<UL><LI>
that you are knowledgeable enough to edit Apache configuration files by
 hand;
<LI>that you understand how to select the right package based on the
 requirements you have;
<LI>know how to run the auto-configure script <TT>configure</TT> when
 compiling from source.
</UL>
</P>
<P>
After having installed Globule, refer to section&nbsp;<A HREF="#sec:conf">3</A> on how to
configure it.
</P>
<!--TOC subsection 2.1&nbsp;&nbsp;
 Unix and Linux All-in-one installation-->

<H3><A NAME="htoc6">2.1</A>&nbsp;&nbsp;<A NAME="sec:install:installer"></A>
 Unix and Linux All-in-one installation</H3><!--SEC END -->

<P>
The all-in-one installation is a bundling of Globule and all the necessary
third-party software which installs in a single run.
This facilitates a standardized environment which works on a multitude of
systems. The following software packages are included:
</P>
<P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=1>
<TR><TD ALIGN=left NOWRAP>Apache</TD>
<TD ALIGN=left NOWRAP>The web-server software.</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>Globule</TD>
<TD ALIGN=left NOWRAP>The module for Apache to replicate web-sites.</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>PHP</TD>
<TD ALIGN=left NOWRAP>A scripting language to generate dynamic pages for Apache.</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>Smarty</TD>
<TD ALIGN=left NOWRAP>PHP scripts by which PHP can use templates.</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>MySQL</TD>
<TD ALIGN=left NOWRAP>A database system.</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>Webalizer</TD>
<TD ALIGN=left NOWRAP>Package to generate statistics on the visit of your web-site.</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>GD library</TD>
<TD ALIGN=left NOWRAP>library helping PHP and Webalizer to generate graphics.</TD>
</TR></TABLE>
</P>
<P>
The copyright notices of these packages are included in
Appendix&nbsp;<A HREF="#sec:copyrights">A</A>.
</P>
<P>
To obtain maximum portability to different platforms and Linux distributions,
the installer actually compiles the software packages from source.
Installation therefore takes a bit of time, consumes some disk space and
requires supporting software such as C and C++ compilers to be present.
Modern systems should have sufficient amount of resources such that a default
installation on a fully installed distribution can be done within an
acceptable amount of time. Actual time and resource need will vary on your
system, a typical fairly recent system requires between 5 and 15 minutes and
between 100 and 250 MB of (temporary) disk space to install for a full
installation.
</P>
<P>
Downloaded the all-in-one installer from the web-site of Globule, and execute
it as follows:
</P>
<PRE>
wget 'http://www.globule.org/download/installer.sh'
chmod u+x installer.sh
sh ./installer.sh --keep-build
</PRE>
<P>
The all-in-one installer will do the full installation automatically after you
have confirmed certain settings which are probed by the installer. The
end-result after the installation is a fully capable web-server, installed in
an independent, private directory. You are free to choose this directory as
long as it fits the following requirements:
<OL type=1><LI>
the directory is unused and empty or non-existent;
<LI>it resides on a local disk.
</OL>
</P>
<P>
Good alternatives for this directory are <CODE>/usr/local/globule</CODE>,
<CODE>/home/globule</CODE> or <CODE>/opt/globule</CODE> depending on your system. If you
have a desktop system, we suggest you choose the default provided by the
installer, as indicated by the content in the square brackets. Enter nothing
and press return to accept the default.
</P>
<P>
Other questions the installer asks are about checking the probed hostname of
the system and whether or not to include MySQL support. The provided defaults
should be correct. Including MySQL support is recommended, and can co-exist
with a system-wide MySQL. Including MySQL support will install a database
available only from the web-server, but takes a relatively long time to build.
If you want to use a system-wide MySQL or do not need a database you can
answer ``No'' to this question.
</P>
<P>
When the installer script has finished all files are installed in the target
directory that you specified. This directory is named the prefix or
base-directory. A transcript of the installation is written in
<TT><I>basedir</I></TT><TT>/src/installer.log</TT> We advice you to remove the
installer script you just used, to avoid accidental re-use.<BR>
Be aware that if you will later upgrade, entire directories are removed from
this tree. Read the section on upgrading to understand where you can your
files safely.
</P>
<P>
After installation, you should use the <TT>globulectl</TT> script to start not
just the Apache/Globule software, but also the accompanying software:
</P>
<PRE>
<i>basedir</i>/bin/globulectl start
</PRE>
<P>
At this time, the all-in-one installer will not automatically start the
software when the computer is restarted. You can execute the following
script:
</P>
<PRE>
<i>basedir</i>/bin/globulectl installcrontab
</PRE>
<P>
to install a crontab, which is a periodic check whether the web-server is
running, looks really operational and has been restarted since the last time
the <CODE>httpd.conf</CODE> configuration file was updated. If this is not the case
then it will cleanly restart the server.
</P>
<P>
Once the installation is completed, your server will be ready to operate using
a few example documents. To host your own documents, you will have to defined
how and where to replicate (parts of) your web-server. Section&nbsp;<A HREF="#sec:conf">3</A>
describes how to configure your web-server. The configuration of the
web-server is stored for this all-in-one installer in the file
<B><TT><I>basedir</I></TT></B><B><TT>/etc/httpd.conf</TT></B>. Other configuration files
are all located in that same directory.
</P>
<!--TOC subsubsection Upgrading your installation-->

<H4>Upgrading your installation</H4><!--SEC END -->

<P>
The installer script can be used to upgrade the complete installation
(including supporting software) at later times to the most recent release. To
this end, when the installer script finishes, a modified copy of the installer
script is created as <TT><I>basedir</I></TT><TT>/src/installer.sh</TT>. This script,
not the original, should be used to upgrade and should be run with the same
flags as earlier.
</P>
<P>
If in the initial installation the flag <CODE>--keep-build</CODE> was used,
non-updated software packages will be reused in the installation because
intermediate files are kept. This limits the time needed to upgrade, at the
cost of a some extra disk-space.
Subsection&nbsp;<A HREF="#sec:install:installer:advanced">2.1</A> states some more flags and
checks that can be made on the system, which are only needed in advanced
setups.
</P>
<P>
Be aware however that during upgrading, the script will <EM>remove</EM> certain
directories and files from the basedir. Only <TT>htdocs</TT>, <TT>htbin</TT>
and directories with dots in them are kept untouched. Directories
<TT>src</TT>, <TT>etc</TT> and <TT>var</TT> are largely kept as is. Other
directories are removed.
</P>
<P>
If you create additional directories to hold files of created
VirtualHosts/web-sites and upgrade, they could be whiped out when you upgrade
because this script will only keep certain directories. This is why
directories with dots in them are never deleted, so you can use the domain
name of the web-site as the directory name to use as DocumentRoot.
</P>
<P>
<EM>To avoid data loss, always backup the whole installation before
upgrading.</EM>
</P>
<!--TOC subsubsection 
 Installer advanced usage and troubleshooting-->

<H4><A NAME="sec:install:installer:advanced"></A>
 Installer advanced usage and troubleshooting</H4><!--SEC END -->

<P>
Most users do not need to read this section, and can safely move to
section&nbsp;<A HREF="#sec:conf">3</A> on how to configure Globule.
</P>
<!--TOC paragraph Prerequisite software-->

<H5>Prerequisite software</H5><!--SEC END -->
&nbsp;<BR>
<P>
The installer script is very useful, even if your Linux distribution is
RPM-package based. This because the installer script installs everything
together in a single location with a standard set of features. However, since
it is not tied to the specific distribution you are using, it does not check
on the prerequisite software. Instead it bundles most necessary software
within the installer. In very minimal setups however, such as supplied by
ISPs where even compilers aren't installed, you might need to check whether
the RPMs below are installed on your system.
</P>
<P>
<TABLE CELLSPACING=2 CELLPADDING=0>
<TR><TD ALIGN=left NOWRAP>which</TD>
<TD ALIGN=left NOWRAP>gd</TD>
<TD ALIGN=left NOWRAP>libpng-devel</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>dialog</TD>
<TD ALIGN=left NOWRAP>expat-devel</TD>
<TD ALIGN=left NOWRAP>openssl-devel</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>strace</TD>
<TD ALIGN=left NOWRAP>pcre-devel</TD>
<TD ALIGN=left NOWRAP>flex</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>gdb</TD>
<TD ALIGN=left NOWRAP>db4-devel</TD>
<TD ALIGN=left NOWRAP>libxml2-devel</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>libtool</TD>
<TD ALIGN=left NOWRAP>gdbm-devel</TD>
<TD ALIGN=left NOWRAP>&nbsp;</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>gcc-c++</TD>
<TD ALIGN=left NOWRAP>perl-DBD-MySQL</TD>
<TD ALIGN=left NOWRAP>&nbsp;</TD>
</TR></TABLE>
</P>
<P>
Depending on your distribution, you might be able to check whether a package
is installed using the command:
</P>
<PRE>
rpm -q <i>package-name</i>
</PRE>
<!--TOC paragraph Tuning of the installer operation-->

<H5>Tuning of the installer operation</H5><!--SEC END -->
 &nbsp;<BR>
<P>
It is not encouraged to install the supporting software of Globule in a
non-standard way, however if you do want to tune the installation, you can use
the flag <TT>--extra-<I>package</I></TT><TT>-config=<I>...</I></TT> to add
additional options to how the <TT>./configure</TT> script is run for a
particular software packages, where package is one of <TT>httpd</TT> for
Apache, <TT>php</TT>, <TT>globule</TT>, <TT>mysql</TT>, <TT>gd</TT> or
<TT>webalizer</TT>.
</P>
<P>
The following other options are user-available:
<DL COMPACT=compact><DT><DD><TT>-v</TT> or <TT>--verbose</TT><BR>
Verbose operation, will result in more reporting to the console.<BR>
<DT><DD><TT>-n</TT> or <TT>--noupdate</TT><BR>
Do not attempt to retrieve newer software over the Internet (for upgrading
 only, this is the default for first-time installations).
<DT><DD><TT>--keep-build</TT><BR>
Recommended option to keep the compiled objects file in place, instead of
 removing the compiled source directory after installation.
</DL>
</P>
<P>
Lastly there are two other options which can be used only when upgrading,
<TT>--omit-install</TT> allows you to prepare a new version without installing
it. You should also use the <TT>--keep-build switch</TT>. This way you can
keep the server running while compilation of a upgraded version takes place.
Afterwards you can quickly upgrade a version by manually stop the Apache
server using the globulectl command and running the same command, but now with
the <TT>--omit-build</TT> switch. This minimizes down time for important
systems. A typical usage would be:
</P>
<PRE>
cd <i>basedir</i>
./src/installer.sh --keep-build --omit-install
./bin/globulectl stop
./src/installer.sh --keep-build --omit-build
./bin/globulectl start
</PRE>
<!--TOC subsection 2.2&nbsp;&nbsp;
 Windows installation-->

<H3><A NAME="htoc7">2.2</A>&nbsp;&nbsp;<A NAME="sec:install:winexe"></A>
 Windows installation</H3><!--SEC END -->

<!--TOC subsubsection 1. Requirements-->

<H4>1. Requirements</H4><!--SEC END -->

<P>
This explanation assumes that you are using Windows XP with SP2.
</P>
<P>
If possible, please install Apache and Globule with administrator
privileges. You will need to open ports in your firewall, and only
Administrators can do that.
</P>
<!--TOC subsubsection 2. Run the automated installer-->

<H4>2. Run the automated installer</H4><!--SEC END -->

<P>
The Windows auto-installer for Globule is available as
<A HREF="http://www.globule.org/download/1.3.1/globule-1.3.1.exe">globule-1.3.1.exe</A>.
It contains a full distribution of Apache, so you don't need to install Apache
separately.
</P>
<!--TOC subsubsection 
3. Choose which components to install-->

<H4><A NAME="sec:install:win32:step3"></A>
3. Choose which components to install</H4><!--SEC END -->

<P align=center><IMG SRC="glowin1.png"></P>

<P>
<DL COMPACT=compact><DT><DD><B>Apache:</B> this will install the Apache web server. We check
 if a suitable Apache installation was found. If not, Apache will be
 installed. It requires port 80 to be opened in your firewall.<BR>
You can tell Windows to open port 80, the first time Apache is started, by
 choosing 'Unblock' in the Windows Security Alert window.
<DT><DD><B>Globule:</B> the Globule software. This allows the Apache web
 server to automatically replicate its documents to other servers,
 keep replicas consistent, and to transparently redirect users to the
 best replica.
<DT><DD><B>DNS Redirection:</B> this is the only option you really have
 here. DNS redirection facility adds support for UDP requests to
 Apache (see Section&nbsp;<A HREF="#sec:conf:dnsredir">3.3</A>). If you don't know what DNS
 redirection is or you don't own your own domain name, then you probably
 don't need DNS redirection at all. Using DNS redirection
 requires that you open port 53 in your firewall.
</DL>
</P>
<!--TOC subsubsection 4. Choose an install location for Globule-->

<H4>4. Choose an install location for Globule</H4><!--SEC END -->

<P>
The default installation path is
 <TT>C:\Program&nbsp;Files\Globule</TT>
if you install as administrator, or
 <TT>C:\Documents&nbsp;and&nbsp;Settings\&lt;username&gt;\Globule</TT>
otherwise. You can change this path if you want Globule installed somewhere
else.
</P>
<!--TOC subsubsection 5. Install Apache-->

<H4>5. Install Apache</H4><!--SEC END -->

<P>
If Apache is not already present in your system, then it is going to be
installed now.
</P>
<P align=center><IMG SRC="glowin2.png"></P>

<P>
Click on ``OK'' to start the Apache installer. You will see the following
screens:
</P>
<P>
<UL><LI>
<EM>Apache Welcome Screen</EM>: click ``Next'' to continue.
<LI><EM>Apache License Agreement</EM>: if you accept their terms in the
 license agreement, check the top radio button and click ``Next'' to
 continue.
<LI><EM>Apache Read This First</EM>: after reading, click ``Next'' to continue.
<LI><EM>Apache Server Info</EM>: Apache will now ask you for
 information about your web server. <EM>If you are not sure what to
 fill in here, fill in the values as seen in the screenshot below.</EM>
 Later, when we generate a configuration file for you.
 <UL><LI>
 <EM>Network Domain</EM>: fill in ``localdomain''.
 <LI><EM>Server Name</EM>: fill in ``localhost''.
 <LI><EM>Administrator's Email Address</EM>: fill in your e-mail
 address or ``dummy@globule.org''.
 <LI><EM>Install Apache HTTP Server 2.0 programs and shortcuts
 for</EM>: Choose ``for All Users, on Port 80, as a Service --
 Recommended.''
 </UL>
 <P align=center><IMG SRC="glowin3.png"></P>

<LI><EM>Apache Setup Type</EM>: Choose the ``Typical'' setup type. Then
 click ``Next'' to continue.
<P align=center><IMG SRC="glowin4.png"></P>

<LI><EM>Destination Folder</EM>: choose a location where Apache is
 going to be installed, then click ``Next'' to continue. 
<LI><EM>Ready to Install the Program</EM>: click ``Install'' to start the
 installation of Apache. 
<LI><EM>Installation Completed</EM>: if all went well Apache shows that
 it is successfully installed. Click on ``Finish'' to continue with the
 Globule installation.
</UL>
</P>
<!--TOC subsubsection 6. Where was Apache installed?-->

<H4>6. Where was Apache installed?</H4><!--SEC END -->

<P>
If you installed Apache for <EM>Current User only</EM>, Globule will need to
know where Apache was installed. Note that this is not the default way of
installing Apache, but you know what you are doing, right? Specify the
directory where the <TT>bin</TT> and <TT>modules</TT> directories are in, e.g.
<TT>C:\Documents~and~Settings\&lt;username&gt;\Apache Group\Apache2</TT>.
</P>
<!--TOC subsubsection 7. Stop existing Apache services-->

<H4>7. Stop existing Apache services</H4><!--SEC END -->

<P>
To be able to install itself, Globule will need to stop the Apache server you
just installed. If you installed Apache in the default way as described above,
just press ``OK''. If you installed Apache yourself with a different service
name (default is 'Apache2'), please stop the Apache service manually or by
using the Apache Service Monitor. If you had Apache installed for Current
User, press CTRL-C in the console window where you started Apache.
</P>
<P align=center><IMG SRC="glowin5.png"></P>

<!--TOC subsubsection 8. Installation Completed-->

<H4>8. Installation Completed</H4><!--SEC END -->

<P>
Congratulations, all the software is installed. Now Globule needs to be
configured to be able to use it. Click on ``Finish'' to go to a web-site which
can help you <A HREF="http://www.globeworld.net/">write your configuration
file</A>. You can also manually edit the Apache configuration file in Apache's
conf directory following instructions in section&nbsp;<A HREF="#sec:conf">3</A>.
</P>
<P align=center><IMG SRC="glowin5.png"></P>

<P>
When the installation itself has finished, you will be taken to this web-site
to configure your web server when you you click ``OK''.
</P>
<P>
If you kept the default paths unchanged and installed Globule as Admin, then
your configuration file must be located at <A HREF="file:///C:/Program
Files/Apache Group/Apache2/conf/httpd.conf"><TT>C:/Program Files/Apache
Group/Apache2/conf/httpd.conf</TT></A>. If you installed as non-Admin, then it
should be in <TT>C:\Documents and Settings\&lt;username&gt;\Apache
Group\Apache2\conf\httpd.conf</TT>.
</P>
<P>
You can start/stop your server using the Apache service icon on the bottom
right of your screen. We recommend you use this service icon, which opens the
Apache Monitor rather then the menu items. This because the menu items do not
provide all functionality.
</P>
<!--TOC subsubsection 9. Configuring your firewall-->

<H4>9. Configuring your firewall</H4><!--SEC END -->

<P>
If you are using Windows XP, then you must configure your firewall to allow
your friends to access the server you just installed. Here is how to do it.
</P>
<P>
<UL><LI>
First, you need to know the IP address of your computer. Click on
 '<TT>Start -&gt; Run</TT>', and type '<TT>cmd</TT>'. That will open a shell window.
 Type '<TT>ipconfig</TT>' in it and press enter. You should get output
 looking like the screenshot below. Keep this window open or write
 down the IP address.
</UL>
<P align=center><IMG SRC="glowin6.jpg"></P>

<UL><LI>
You can now configure your firewall to allow HTTP requests to
 enter your system. Click '<TT>Start -&gt; Run</TT>', then type in
 '<TT>control netconnections</TT>' and click 'OK.' Select the network
 device you use to connect to the Internet (e.g. Local Area
 Connection), then click '<TT>Properties</TT>', and the '<TT>Advanced</TT>'
 tab.<BR>
<BR>
Click on the '<TT>Settings...</TT>' button, and enable protect my computer
 if needed. Click on the '<TT>Advanced</TT>' tab.<BR>
<BR>
In the list of Services check '<TT>Web Server (HTTP)</TT>'. A window
 should pop up (or click on <TT>edit</TT>). Fill in the IP address you
 got from the first steps and click '<TT>OK</TT>'. If you do not see
 '<TT>Web Server (HTTP)</TT>' then select the '<TT>Add..</TT>' button, fill
 in the service name, your IP address and '80' for both external and
 internal port.<BR>
<BR>
<LI>If you enabled DNS redirection in
 <A HREF="#sec:install:win32:step3">step 3</A>, then you must also allow
 DNS requests to enter your system. Click the '<TT>Add...</TT>' button.
 Fill in the service name "DNS" and your IP address where requested,
 and the other fields as seen in the screenshot below.
 <EM>Note that '<TT>UDP</TT></EM><EM>' is checked and '<TT>TCP</TT></EM><EM>' is unchecked.</EM>
</UL>
<P align=center><IMG SRC="glowin7.jpg"></P>

<UL><LI>
Congratulations, you have configured your firewall. From now on,
 any user connected to the Internet can access your Globule server.
</UL>
</P>
<!--TOC subsection 2.3&nbsp;&nbsp;
 Source distribution-->

<H3><A NAME="htoc8">2.3</A>&nbsp;&nbsp;<A NAME="sec:install:source"></A>
 Source distribution</H3><!--SEC END -->

<P>
This section is intended for people with some experience in compiling
programs. Compilation from source allows you to make the best
match with your system, tune the installation and allows for special demands.
This is especially suited for package builders and somewhat experienced system
administrators.<BR>
To compile Globule under Windows you will have to
<A HREF="mailto:globule@globule.org">contact us</A>.
</P>
<P>
Before starting to build Globule from source you have to check the
requirements and determine whether your installation needs to do DNS-based
redirection.
</P>
<P>
<EM>First</EM> determine if you might want to do DNS redirection. DNS
redirection allows clients to be redirected at the DNS level to one of the
available replica servers (see Section&nbsp;<A HREF="#sec:conf:dnsredir">3.3</A> for more
information on HTTP vs. DNS redirection). This is the fastest, more
distributed and most transparent redirection method available. It does
however require Globule and Apache to act as an DNS server, which is only
possible if you run a slightly modified Apache server, which requires
recompiling Apache also.
</P>
<P>
Other requirements:
<UL><LI>
<A HREF="http://httpd.apache.org/">A</A>pache version 2.0.50 or higher.
 Note that versions 2.1 and 2.2.x are not yet supported;
<LI>Apache running with a worker or prefork MPM, with dynamic modules
 enabled (these are defaults);
<LI><A HREF="http://gcc.gnu.org/">gcc and g++</A> version 3.2 or better.
 There are known problems with gcc 3.4.0, gcc-4.0.x is known to work; 
<LI><A HREF="http://www.fsf.org/software/make/">gmake</A> version 3.79.1 or
 better.
</UL>
</P>
<P>
You should also preferably install Apache from source. If you want to install
Apache from RPMs and require DNS redirection then you <EM>must</EM> use our
supplied RPMs which include the patch. If using RPMs not provided by us, make
sure you also install the developer packages for Apache and APR (httpd-devel
and apr-devel).
</P>
<P>
Because Globule is a module for Apache, you should install Apache first,
following the guidelines in the next section.
</P>
<!--TOC subsubsection 2.3.1&nbsp;&nbsp;Apache installation from source-->

<H4><A NAME="htoc9">2.3.1</A>&nbsp;&nbsp;Apache installation from source</H4><!--SEC END -->

<P>
Apache can be set-up, configured and extended through modules in a multitude
of fashions. These, even in an environment without Globule can clash, lead to
security issues, or other issues. It is therefore prudent for us to give some
advice on which configuration of Apache is known to work. Globule is also
known to work with the Apache installation from the major Linux distributions.
</P>
<P>
To install Apache from source download Apache from:<BR>
<BLOCKQUOTE>
<A HREF="http://www.globule.org/download/apache-2.0.55/httpd-2.0.55.tar.gz">httpd-2.0.55.tar.gz</A>
</BLOCKQUOTE>
</P>
<P>
Unpack the downloaded distribution:
</P>
<PRE>
gzip -c -d &lt; httpd-2.0.55.tar.gz | tar xvf -
cd httpd-2.0.55
</PRE>
<P>
If you decided to enable DNS redirection in your server, then you need to
patch your Apache source tree <EM>before</EM> configuring and compiling it. The
patch file is distributed in the
<A HREF="http://www.globule.org/download/1.3.1/mod-globule-1.3.1.tar.gz">mod-globule-1.3.1.tar.gz</A>
Globule source package as file <TT>udp-requests-httpd-2.0.55.patch</TT>.
Copy this file from the Globule archive into the Apache source tree and then
execute:
</P>
<PRE>
patch -p0 &lt; udp-requests-httpd-2.0.55.patch
</PRE>
<P>
Then configure and compile Apache according to the
<A HREF="http://httpd.apache.org/docs-2.0/install.html">Apache documentation</A>.
The minimum you should specify is the <TT>--enable-so</TT> option to allow
extension of Apache with modules. We however recommend the following sequence
on the configuration script:
</P>
<PRE>
./configure --prefix=/usr/local/globule --enable-auth-anon=shared 
    --enable-auth-dbm=shared --enable-cache=shared --enable-file-cache=shared 
    --enable-disk-cache=shared --enable-mem-cache=shared --enable-example=shared 
   --enable-deflate=shared --enable-ssl --enable-proxy=shared 
   --enable-proxy-ftp=shared --enable-proxy-http=shared 
   --enable-proxy-connect=shared --enable-expires=shared --enable-headers 
   --enable-mime-magic --enable-http --disable-dav --enable-status=shared 
   --enable-asis=shared --enable-suexec=shared --enable-info=shared 
   --enable-cgi=shared --enable-include=shared --enable-vhost-alias=shared 
   --enable-rewrite=shared
</PRE>
<P>
Then call <CODE>make install</CODE> to compile and install Apache in the designated
target directory as specified by <TT>--prefix</TT>. If the <TT>bin</TT>
directory of this prefix is not in your executable search <CODE>$PATH</CODE>, or
another Apache is installed first then you will need to use either the
<CODE>--with-apache</CODE> or <CODE>--with-apxs</CODE> later when compiling Globule.<BR>
If Apache is installed using a <CODE>--with-layout</CODE> instead of a
<CODE>--prefix</CODE> and/or individual paths have set to split the different items
(such as APR, apr-util and libexec directories) then you are advised to use
the <CODE>--with-apxs</CODE> and <CODE>--with-apr</CODE> flags.
</P>
<!--TOC subsubsection 2.3.2&nbsp;&nbsp;Globule installation from source-->

<H4><A NAME="htoc10">2.3.2</A>&nbsp;&nbsp;<A NAME="sec:install:php"></A>Globule installation from source</H4><!--SEC END -->

<P>
To compile Globule from source after having installed Apache with optionally
the DNS redirection patch you can use the compressed tar-archive available at:
<BLOCKQUOTE>
<A HREF="http://www.globule.org/download/1.3.1/mod-globule-1.3.1.tar.gz">mod-globule-1.3.1.tar.gz</A>
</BLOCKQUOTE>
</P>
<P>
Unpack this archive, and read the <TT>README</TT>, <TT>INSTALL</TT> and
<TT>NEWS</TT> file for any last-minute release notes that may have been added:
</P>
<PRE>
gzip -c -d &lt; mod-globule-1.3.1.tar.gz | tar xvf -
cd mod-globule-1.3.1
</PRE>
<P>
As usual, first call <CODE>./configure</CODE> as supplied with most open source
projects and available with the standard options. If you however installed
Apache in a non-standard path, then you must specify this path using the
<TT>--with-apache</TT> option when running configure. Note that you must specify
the <EM>root</EM> Apache directory (e.g., <TT>/usr/local/globule</TT>) rather than
the directory where the Apache executable resides (e.g.,
<TT>/usr/local/globule/bin</TT>). If you used the <TT>--prefix</TT> option to
specify a path when installing Apache, then you must use the same path here as
well.
</P>
<P>
Alternatively to the <TT>--with-apache</TT> option, you can also use
<TT>--with-apxs</TT> to specify the absolute path where the <TT>apxs</TT> program is
installed. This file is usually located in the same directory as <TT>httpd</TT>
and <TT>apachectl</TT>:
</P>
<PRE>
./configure --with-apxs=/weird/directory/bin/apxs
</PRE>
<P>
If you want to use DNS redirection, then you must add the
<TT>--enable-dns-redirection</TT> flag to <TT>configure</TT>:
</P>
<PRE>
./configure --with-apache=/usr/local/globule --enable-dns-redirection
</PRE>
<P>
We also recommend to use the <CODE>--enable-globuleadm</CODE>
flag. This installs a set of files in the directory <TT>globuleadm</TT>
inside the directory as indicated by <TT>apxs -q htdocsdir</TT> which allow
you to monitor the operation of Globule.
</P>
<P>
Other options available are:
<DL COMPACT=compact><DT><DD><TT>--enable-debug</TT><BR>
Compile Globule with debugging symbols and options enabled.
<DT><DD><TT>--enable-optimize</TT><BR>
Use optimization to compile Globule, recommended.
<DT><DD><TT>--enable-profile</TT><BR>
Compile Globule with profiling enabled (not recommended, does not work
 reliably).
<DT><DD><TT>--enable-documentation</TT><BR>
Also build and install documentation (not recommended, read it on-line).
</DL>
</P>
<P>
After running the <TT>./configure</TT> script with the appropriate options,
run ``make'' and ``make install''. This last command will install the Globule
software and also install a sample Globule configuration file named
<TT>httpd-globule.conf</TT> next to the regular <CODE>httpd.conf</CODE> file (in the
directory as specified by <TT>apxs -q sysconfdir</TT>). Use it as an example
of how to configure the <CODE>httpd.conf</CODE> for use with Globule.
</P>
<!--TOC subsubsection 2.3.3&nbsp;&nbsp;PHP installation from source-->

<H4><A NAME="htoc11">2.3.3</A>&nbsp;&nbsp;PHP installation from source</H4><!--SEC END -->

<P>
To compile PHP yourself, you must make sure that you instruct PHP with the
configure script to use the apxs2filter as the Apache to PHP hand-off and that
safe mode is enabled. If you install Apache in a non-default path (using the
--prefix option), make sure the PHP is actually configured to use the right
installation of Apache.
</P>
<P>
You should be very aware that the PHP pages will be executed on multiple
servers.
PHP is compiled with certain extensions depending on how it was configured.
If you make your PHP pages depend on a certain set of extensions then all
replica servers should have the same set of extensions. For this reason the
all-in-one installer and Globule Broker System are preferred.
</P>
<P>
The recommended configuration for compilation of PHP is:
</P>
<PRE>
./configure --prefix=$prefix --with-apxs2filter=<i>prefix</i>/bin/apxs --disable-cgi 
            --disable-static --enable-safe-mode --enable-dba --with-dbase --with-gdbm 
            --with-db4 --with-ini --with-flatfile --with-gd=<i>...</i> --enable-ftp 
            --with-mysql=<i>...</i> --with-mysqli=<i>...</i>/bin/mysql_config 
</PRE>
<P>
Where <I>prefix</I> is the base installation path of Apache and
<I>...</I> are the paths to the individual software packages being
referred to, which default to <I>prefix</I> for the use with the all-in-one
installer.
</P>
<P>
When compiling and installing PHP, it will modify your existing
<CODE>httpd.conf</CODE> to add directives to enable PHP parsing. This may not
completely be what you want so save a copy of the original <CODE>httpd.conf</CODE>
before your type make install.
</P>
<P>
To add or check whether your PHP is available from within the Apache server,
add the following directives at their proper position in the verb!httpd.conf!,
or check whether all are inserted.
</P>
<P>
<OL type=1><LI>
The PHP module is being loaded using:
<PRE>
LoadModule php5_module modules/libphp5.so
</PRE><LI>PHP-based index files are preferred over others. Look at the
 <CODE>DirectoryIndex</CODE> directive in your <CODE>httpd.conf</CODE>.
 The alternative <CODE>index.php</CODE> should be the first argument in the
 list.
<LI>Locate other directives named <CODE>AddType</CODE>, the following lines should
 be present:
<PRE>
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
</PRE></OL>
</P>
<P>
With these changes, and a restarted server, PHP support is made available to
the Apache web server.
</P>
<!--TOC subsection 2.4&nbsp;&nbsp;
 Installation from RPMs and alikes-->

<H3><A NAME="htoc12">2.4</A>&nbsp;&nbsp;<A NAME="sec:install:rpm"></A>
 Installation from RPMs and alikes</H3><!--SEC END -->

<P>
We provide also alternative installation methods, which require more
experience with the packages your Linux distribution uses.
</P>
<P>
When using a distribution package, such as the RPMs provided and described
here, you need to select which primary package is needed for your system.
Multiple different RPMs with actual the same software package have to be
provided for if you do want DNS redirection or not, where to install the
software the default location or one in <CODE>/usr/local/</CODE> and which
architecture you have. Most importantly though, RPMs provide no means to make
an initial, working configuration file. You therefore have to locate the
Apache configuration file and modify it by hand.
</P>
<P>
Also the actual installation is scattered in different places
(<TT>/var/www</TT> and <TT>/etc/httpd</TT> for instance), with which you have
to be familiar.
</P>
<P>
If you want to be able to use DNS redirection, you must use an Apache
installation which has the DNS patch applied to it. Default RPM based
distributions do not provide an RPM of Apache with this patch applied therefore
you have to use one of our RPMs. To provide a full service, with up-to-date
Apache web services with a configuration known to work we also provide RPMs
for a plain, distribution system-like Apache installation.
</P>
<P>
If you are using a modern Unix or Linux distribution which uses or can use
RPMs, then you can install Globule from the RPMs as described within this
section. Alternate, less supported binary distributions are available for
Debian and another packed as a tarball. The latter distributions only provide
a basic installation without options such as DNS redirection.<BR>
They can be found on the <A HREF="http://www.globule.org/download/">download</A>
page.
</P>
<!--TOC paragraph 1. Requirements-->

<H5>1. Requirements</H5><!--SEC END -->

<P>
You will need a recent Linux distribution (we usually test using recent Redhat 
Fedora or Mandrake distributions). If you have an older (e.g., RedHat 7.2) Linux
version, then we <EM>strongly</EM> recommend that you upgrade. Alternatively,
you can check in Section&nbsp;<A HREF="#sec:trouble">6</A> if and how you can install Globule
on your system.
</P>
<!--TOC paragraph 2. Make up your mind-->

<H5>2. Make up your mind</H5><!--SEC END -->

<P>
At this stage, you must decide whether you want to enable your server to
perform DNS redirection (see Section&nbsp;<A HREF="#sec:conf:dnsredir">3.3</A> for more
information on HTTP vs. DNS redirection). If you don't know what DNS
redirection is or you don't own your own domain name, then probably you don't
need DNS redirection at all.
</P>
<!--TOC paragraph 3a. If you <EM>do not</EM> want DNS redirection-->

<H5>3a. If you <EM>do not</EM> want DNS redirection</H5><!--SEC END -->

<P>
To install Globule you need an recent up-to-date installation of Apache, which
accept dynamic module loading. We provide also Apache RPMs which are known to
work and are similar in functionality and construction as the official Apache
RPMs by RedHat. We however keep more up-to-date and provide the right mix of
modules and settings which co-operate with Globule. Because some platforms
are lacking behind in the update of Apache module it is recommended that you
<EM>uninstall</EM> any standard Apache RPM you may have, and install the RPMs we
provide instead.
</P>
<PRE>
rpm -e --nodeps apache httpd httpd-devel httpd-manual httpd-mmn
rpm -ihv http://www.globule.org/download/apache-2.0.55/httpd-2.0.55-1.i386.rpm
rpm -U http://www.globule.org/download/1.3.1/mod-globule-1.3.1-1.i386.rpm
</PRE>
<!--TOC paragraph 3b. If you <EM>do</EM> want DNS redirection-->

<H5>3b. If you <EM>do</EM> want DNS redirection</H5><!--SEC END -->

<P>
Enabling DNS redirection requires that your Apache server can handle UDP
requests. This is not a standard feature of Apache, so you must install the
patched version we provide. First uninstall any Apache RPM you may have, then
install our patched RPM (since this version is solely dedicated to working
with Globule, we package the two of them together):
</P>
<PRE>
rpm -e --nodeps apache httpd httpd-devel httpd-manual httpd-mmn
rpm -U http://www.globule.org/download/1.3.1/globule-1.3.1-1.i386.rpm 
</PRE>
<!--TOC paragraph 4. Get started-->

<H5>4. Get started</H5><!--SEC END -->

<P>
Our RPMs will install Apache and Globule in the default RedHat installation
paths. In particular, you should edit your configuration by opening file
<TT><B>/etc/httpd/conf/httpd.conf</B></TT> with your favorite text editor. Please
read Section&nbsp;<A HREF="#sec:conf:basic">3.1</A> for basic configuration directives.
</P>
<P>
An attractive way is to avoid composing and maintaining the
<TT>httpd.conf</TT> configuration file is to use the Globule Broker System,
which is an automated way to maintain the co-operative relationships between
origin and replica servers and generate their <TT>httpd.conf</TT>
configuration scripts automatically.
</P>
<P>
You can start/stop your server with this command:
</P>
<PRE>
/etc/rc.d/init.d/httpd [start|stop]
</PRE>
<!--TOC paragraph 5. Installing Globule RPMs in non-standard directories-->

<H5>5. Installing Globule RPMs in non-standard directories</H5><!--SEC END -->

<P>
If you don't want to install your server in the standard RedHat paths (e.g.,
because you want to install Globule side-by-side to an existing Apache
server), then you can use <TT>httpd-local-2.0.50-1.i386.rpm</TT> and
<TT>mod-globule-local-1.3.1-1.i386.rpm</TT> instead of <TT>
httpd-2.0.50-1.i386.rpm</TT> and
<TT>mod-globule-1.3.1-1.i386.rpm</TT>. Apache and Globule will be
installed in directory <TT>/usr/local/globule</TT>. Your configuration file will
be found in <TT>/usr/local/globule/conf/httpd.conf</TT>. To start/stop your
server you must use:
</P>
<PRE>
/usr/local/globule/bin/apachectl [start|stop]
</PRE>
<!--TOC section 3&nbsp;&nbsp;
 Server Configuration-->

<H2><A NAME="htoc13">3</A>&nbsp;&nbsp;<A NAME="sec:conf"></A>
 Server Configuration</H2><!--SEC END -->

<P>
Much like Apache needs to be configured on which web-sites it needs to serve,
Globule as a module to Apache, also needs to be told which parts of the sites
served by Apache need to be replicated. Likewise instructions on security,
configuration and special handling need to be selected. Globule adds another
dimension because it allows tuning of replication and redirection policies and
it is a co-operative network. This means that one explicitly selects partners
with which to co-operate and replicate documents to and from.
</P>
<P>
Globule therefore requires configuration, as does Apache. Like other modules
in Apache, this configuration is embedded in the Apache configuration file
<CODE>httpd.conf</CODE>. Without configuration Globule/Apache can possibly be
started, but is dysfunctional.
</P>
<P>
The Apache configuration can be quite complex to get right. This documentation
does not handle the configuration of Apache itself, nor of any modules which
can be used inside Apache. Refer to the
<A HREF="http://httpd.apache.org/docs-2.0/">Apache documentation</A> and
follow the guidelines in the sample <CODE>httpd.conf</CODE> or <CODE>httpd-std.conf</CODE>
to get the a working web-site first before integrating Globule. Globule also
provides a sample <CODE>httpd-globule.conf</CODE> that can be renamed to
<CODE>httpd.conf</CODE> which can be used to start your configuration from.
</P>
<P>
This section describes how to prepare a configuration in <CODE>httpd.conf</CODE>
which performs a basic replication of a site to other host. Separate
subsections handle individual subjects and enhancements like:
<OL type=1><LI>
Site replication;
<LI>DNS based redirection;
<LI>System Monitoring;
<LI>Dynamic Content.
</OL>
The reference in section&nbsp;<A HREF="#sec:reference">5</A> describes the directives on an
individual basis rather than per subject.
</P>
<!--TOC subsubsection The Globule Broker-->

<H4><A NAME="sec:conf:gbs"></A>The Globule Broker</H4><!--SEC END -->

<P>
Setting up a configuration file <CODE>httpd.conf</CODE> can be quite a difficult
process. Order in which directives are specified matters, their semantical
nesting must be precise, when to add port numbers and many other common tasks.
Globule adds another dimension to managing the <CODE>httpd.conf</CODE> since the
configuration of one server which is the origin of exported documents is
linked to replica servers which import the documents. The locations, shared
secrets and settings need to match between servers.
</P>
<P>
To aid users in setting up <CODE>httpd.conf</CODE> configuration files for their
servers and set up relationships between origin sites and friendly replica
servers, we have created a web-site which:
<UL><LI>
brokers between potential replica servers and your origin server;
<LI>generates a complete and working <CODE>httpd.conf</CODE> configuration file
 based on all your settings.
</UL>
This web-site is the <A HREF="http://www.globeworld.net/">Globule Broker
Service (GBS)</A>. Globule users are able to register their servers, to select
on which server(s) their sites should be replicated, how redirection should be
performed, etc. As an added feature, Globule will provide a set of servers
ready to replicate its users' sites, as well as a public redirection service.
The GBS can be found at
<A HREF="http://www.globeworld.net/">http://www.globeworld.net/</A>. Note however
that its features are currently quite limited. A redesign of the GBS is on
its way.
</P>
<!--TOC subsection 3.1&nbsp;&nbsp;
 Basic Server Configuration-->

<H3><A NAME="htoc14">3.1</A>&nbsp;&nbsp;<A NAME="sec:conf:basic"></A>
 Basic Server Configuration</H3><!--SEC END -->

<P>
Globule is provided as a module for Apache. This requires that you have to
let Apache know that you will be needing the Globule module. Such
instructions, as well as other configuration directives are written in the
Apache configuration file <CODE>httpd.conf</CODE>. Where this file is located
depends on the installation you have chosen. In this file also directives
will be placed that provide instructions to Globule on how to operate.
</P>
<P>
Apache is a highly configurable and flexible server. This also means that
even the basic configuration without Globule is quite extensive and many
details matter. Be aware that small configuration changes can have large
effects. Small omissions, presence of other directives or order in which
directives are placed can result in Apache failing to start, misoperation, or
other unexpected results. Some of these effects are even silent and the
server either does not start, or seems to work, but in a different fashion
(for instance, not using replication).
</P>
<P>
Therefore, <EM>take care to follow instructions precisely</EM> and <EM>make
changes at the proper location</EM>. Look which values you need to change, such
as adding port-numbers, setting the ServerName, and changing the directory
names, etcetera. Some values, like directory names appear multiple times in
configuration files, be sure they are consistent with each other.
</P>
<P>
This section describes how to add the most basic necessary directives to a
functional Apache configuration file. In subsequent sections is explained how
to add further functionality on a per-subject basic. This manual cannot give
an overview on <A HREF="http://httpd.apache.org/docs-2.0/">configuring Apache</A>,
only on the extension Globule provides. Some knowledge on Apache
configuration is needed and we advice to work from a template
<CODE>httpd.conf</CODE> as provided by your installation method.
</P>
<!--TOC subsubsection 3.1.1&nbsp;&nbsp;How to update your configuration-->

<H4><A NAME="htoc15">3.1.1</A>&nbsp;&nbsp;How to update your configuration</H4><!--SEC END -->

<P>
Configuring Apache and Globule involves making changes to the configuration
file <TT>httpd.conf</TT>. When making changes to the configuration, these will
not take effect until your restart Apache. The location of the
<CODE>httpd.conf</CODE> file and how to restart Apache depends on your installation
method. Refer back to the chosen installation method on the location of
<TT>httpd.conf</TT> and the preferred method of starting Apache.
</P>
<P>
In any case, you might also check whether certain errors in the configuration
using the command <CODE>apachectl configtest</CODE> or <CODE>globulectl configtest</CODE>
if provided. However not all configuration errors show up during startup.
When Apache starts, it will run in the background. Any errors at this time
will be written in the error log as specified in the Apache configuration.
Always check this error log for problems.
</P>
<!--TOC subsubsection 3.1.2&nbsp;&nbsp;Check your Apache configuration-->

<H4><A NAME="htoc16">3.1.2</A>&nbsp;&nbsp;<A NAME="sec:conf:normal"></A>Check your Apache configuration</H4><!--SEC END -->

<P>
The installed <TT>httpd.conf</TT> might already be adapted, however this default
configuration file is just a standard template and should be checked and/or
adapted for your system. Refer to the Apache documentation on a full
explanation. The following settings are at least important for a correct
Globule or do vary much between systems. These settings should already be
partially present in the <CODE>httpd.conf</CODE>.
</P>
<!--TOC paragraph Directive <B>Listen</B>-->

<H5>Directive <B>Listen</B></H5><!--SEC END -->
&nbsp;<BR>
<P>
The Listen directive instructs Apache to listen to one or more ports. The
Listen directive must always be specified, even if the default port 80 is
used. At the time of release of version 1.3.1 of Globule, the usage of
multiple listen ports, or the use of SSL/HTTPS may not fully functional.<BR>
Make sure that the port specified here, is in accordance with the
specification on ServerName, NameVirtualHost and VirtualHost directives as
GlobuleReplicaIs/For etcetera directives.
</P>
<P>
Example:
</P>
<PRE>
Listen 8333
</PRE>
<!--TOC paragraph Directives <B>User</B> and <B>Group</B>-->

<H5>Directives <B>User</B> and <B>Group</B></H5><!--SEC END -->
&nbsp;<BR>
<P>
When Apache is instructed to run on from port 80, it requires superuser
priviledges and thus needs to be started as root. Since this can cause
security issues, Apache is always instructed to try to change its identity
after startup to the Unix user and group as specified by the directives
<B>User</B> and <B>Group</B>. Standard Unix/Linux operation as well as
the recommended Apache setup is to change to the Unix user <CODE>nobody</CODE> and
group <CODE>#-1</CODE>. There are however Linux distributions which provide
separate Unix users and groups such as <CODE>apache</CODE>, <CODE>httpd</CODE>,
<CODE>www</CODE>, <CODE>web</CODE>, etcetera. If you run off a default distribution you
might need to use these groups in order for the web-server to access all
files. The Unix user/group combination <CODE>nobody</CODE> and <CODE>#-1</CODE> are
always available.
</P>
<P>
Example:
</P>
<PRE>
User nobody
Group #-1
</PRE>
<!--TOC paragraph For Windows users-->

<H5>For Windows users</H5><!--SEC END -->

<P>
Windows users, who use DNS redirection (their machine plays the role of the
redirector need to disable the AcceptEx windows call. This Microsoft
optimization breaks quite a lot of software, including our and MySQL software.
Besides, enabling it provides limited performance increase. Since Windows
serves pages very slow compared to Linux servers, you can safely disable this
feature always:
</P>
<PRE>
&lt;IfModule mpm_winnt.c&gt;
  Win32DisableAcceptEx
  ...
&lt;/IfModule&gt;
</PRE>
<P>
Locate the existing <TT>IfModule mpm_winnt</TT> section and add the
Win32DisableAcceptEx directive.
</P>
<!--TOC paragraph Directive <B>ServerName</B>-->

<H5>Directive <B>ServerName</B></H5><!--SEC END -->
&nbsp;<BR>
<P>
The ServerName directives appears at least once in the <CODE>httpd.conf</CODE> at a
global level, which means not inside a VirtualHost section or other. Only one
such a ServerName at the global level should exist, quite early in the
configuration file. The single argument to the ServerName directive should be
the hostname of your machine, which will always resolve to the public IP
address of the machine.
</P>
<PRE>
Listen 80
...
ServerName world.cs.vu.nl
</PRE>
<P>
If your server does not use the default HTTP port (as specified as
<TT>Listen 80</TT> earlier in the <CODE>httpd.conf</CODE>) then the ServerName should
have a colon appended to it:
</P>
<PRE>
Listen 8333
... 
ServerName world.cs.vu.nl:8333
</PRE>
<P>
The usage of an IP number instead of a fully qualified hostname is
discouraged, as the usage of VirtualHosts is not supported, nor is DNS
redirection.
</P>
<!--TOC paragraph <B>VirtualHost</B> sections-->

<H5><B>VirtualHost</B> sections</H5><!--SEC END -->
&nbsp;<BR>
<P>
The usage of VirtualHost is documented in the Apache documentation, but due to
the many mistakes one can make with it, and the effect it has on Globule, some
remarks on the configuration are below.
i.e. when URLs with different host names return a different set of
pages. You must use name-based virtual hosting in most cases, even if
you only want to host a single site.
</P>
<P>
Unless you have multiple IP addresses on your machine and know what you are
doing, you want <EM>name</EM> based virtual hosting instead of plain virtual
hosting. In a name based configuration you should start with the
specification of a NameVirtualHost directive. Then for each web-site with a
different hostname to be served, define a VirtualHost directive
environment. These should at least contain a ServerName directive with the
web-site name and a DocumentRoot directive which specifies where the documents
for that web-site should come from. Be sure that the ServerName directives
within the VirtualHost environment are tagged with the port number in the same
way as the global ServerName;
</P>
<PRE>
Listen 8333
...
ServerName world.cs.vu.nl:8333
...
DocumentRoot /var/www/html
...
NameVirtualHost *

&lt;VirtualHost *&gt;
  ServerName world.cs.vu.nl:8333
  DocumentRoot /var/www/html
  ...
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
  ServerName www.revolutionware.net:8333
  DocumentRoot /var/www/www.revolutionware.net
  ...
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
  ServerName _default_:8333
  DocumentRoot /var/www/html
  ...
&lt;/VirtualHost&gt;
</PRE>
<P>
You <EM>must</EM> specify a VirtualHost section for the global ServerName too.
Thus, in the example above, world.cs.vu.nl is first, and global ServerName
specified and must also be present in one of the VirtualHost environments (as
in the first in the examples).
Note that because the global ServerName and the first VirtualHost name
ServerName are the same, the DocumentRoot should be the same too.
</P>
<P>
The last VirtualHost section in the example catches all incoming requests that
don't resolve to any of the VirtualHost. It is common for this section to
have the same DocumentRoot as the global DocumentRoot, but this is possible
only if this site is not (partial) replicated.
</P>
<P>
If now, or in future you will add ServerAlias directives, then take note that
you shouldn't add the port number when specifying aliases for your hosts.
</P>
<P>
For each VirtualHost with a new DocumentRoot you should also check whether the
files are accessible, both by having world-accessible permission bits when
running the server on an Unix machine and because the server program is
allowed through it's configuration. Within the <CODE>httpd.conf</CODE> access is
allowed or denied through the specification of <TT>Directory</TT> directives,
see the next paragraph and the Apache documentation.
</P>
<!--TOC paragraph <B>Directory</B> specifications-->

<H5><B>Directory</B> specifications</H5><!--SEC END -->
&nbsp;<BR>
<P>
Whenever Apache serves a document, locating and authorizing the file to be
served goes through several stages. The DocumentRoot specifies the initial
location, Location directives specify how to treat individual paths, but
whether an actual file may be accessed is controlled by a
<TT>&lt;Directory&gt;</TT> directive environment. A default configuration will
always deny access to all files by disallowing anything for ``<TT>/</TT>''
Therefore if you add a VirtualHost and a DocumentRoot which is not yet allowed,
you need to add a <TT>Directory</TT> section for it. Also if you change a
DocumentRoot or ServerRoot directory, remember to check all paths in Directory
environments.
</P>
<P>
Taken the example in the previous paragraph, access will only be allowed from a
default location for the files being served at
<TT>http://www.revolutionware.net:8333/</TT> if we add to the
<CODE>httpd.conf</CODE>:
</P>
<PRE>
&lt;Directory "/var/www/www.revolutionware.net"&gt;
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;
</PRE>
<P>
This configuration snippet should be stated just below a <TT>&lt;Directory
/&gt;</TT> specification normally present in your configuration, but at least before
any VirtualHost specification.
</P>
<!--TOC subsubsection 3.1.3&nbsp;&nbsp;Add Globule support-->

<H4><A NAME="htoc17">3.1.3</A>&nbsp;&nbsp;Add Globule support</H4><!--SEC END -->

<P>
This subsection describes how add Globule to a working non-Globule Apache
configuration, however with no web-site being replicated or imported from
another origin server.
</P>
<!--TOC paragraph Add a <B>LoadModule</B> directive for Globule-->

<H5>Add a <B>LoadModule</B> directive for Globule</H5><!--SEC END -->
&nbsp;<BR>
<P>
First Apache must be instructed to use the Globule module by adding a line
which loads the module:
</P>
<PRE>
LoadModule globule_module modules/mod_globule.so
</PRE>
<P>
This LoadModule directive should be placed below the other already present
LoadModule directives. These normally occur early in the configuration after
the MPM specific section.
</P>
<!--TOC paragraph Add Directive <B>GlobuleAdminURL</B>-->

<H5>Add Directive <B>GlobuleAdminURL</B></H5><!--SEC END -->
&nbsp;<BR>
<P>
Globule will not work unless it has some web address through which it can talk
to itself. This schizophrenic notion is necessary because Apache isn't a
single program, but when started Apache splits off in multiple processes. A
reserved URL lets Globule do it's internal book keeping. Using the
<TT>GlobuleAdminURL</TT> directive you can provide Globule with a URL into
your web-server that can freely be used by Globule.
</P>
<P>
A good choice for the site-name is the first, global ServerName that appears
is your configuration and use a path like <CODE>globuleadm</CODE>. Following the
earlier examples this would result in the specification of:
</P>
<PRE>
GlobuleAdminURL http://world.cs.vu.nl:8333/globuleadm/
</PRE>
<P>
Note that;
<UL><LI>
The URL that you provide must be fully qualified path, including the
<CODE>http://</CODE> and hostname and port part (for which the global ServerName is
a good choice);<BR>
<BR>
<LI>Any path you will give, like in the example <CODE>/globuleadm/</CODE> will do;<BR>
<BR>
<LI>The GlobuleAdminURL <EM>must</EM> end with a slash;<BR>
<BR>
<LI>The address to which the URL points should not contain any actual
content, nor any sub-path of it. It should also not be replicated.<BR>
<BR>
This with the exception of the supporting files for the monitoring (see
section&nbsp;<A HREF="#sec:conf:monitoring">3.4</A>). These files must be actually installed at
the filesystem location pointed to by the GlobuleAdminURL.
</UL>
</P>
<P>
The GlobuleAdminUrl directive is normally placed directly after the global
DocumentRoot and at least below the first, global ServerName and Globule's
LoadModule directive.
</P>
<!--TOC paragraph Prevent unwanted entries in your access log-->

<H5>Prevent unwanted entries in your access log</H5><!--SEC END -->
&nbsp;<BR>
<P>
Globule relies on a number of periodic tasks executed roughly every second
(e.g., to check is a given file was modified or if a replica server is still
alive). These tasks usually perform an internal HTTP request to your own
server. As a result, your <TT>logs/access_log</TT> file will quickly get filled
up with records of these internal requests. There is enough of them to fill up
any hard drive within a matter of days or weeks.
</P>
<P>
All internal Globule requests use either the custom-created SIGNAL or the
REPORT HTTP method. To filter these requests out of your log files, we
recommend that you enter in your <TT>httpd.conf</TT> an equivalent of the
following lines:
</P>
<PRE>
SetEnvIf Request_Method "SIGNAL" dontlog 
SetEnvIf Request_Method "REPORT" dontlog
CustomLog logs/access_log combined env=!dontlog
</PRE>
<P>
The order of these statements is relevant. In your <CODE>httpd.conf</CODE> there
should already be one or more <B>CustomLog</B> directives, where the first
should be defined at a global level (i.e. not inside an environment like
VirtualHost) almost directly after several <B>LogFormat</B>s are defined.
The <B>SetEnvIf</B> entries should be defined in between these two. Then
<EM>all</EM> occurrences of <B>CustomLog</B> should have <CODE>env=!dontlog</CODE>
appended to them.<SUP><A NAME="text1" HREF="#note1">1</A></SUP>
</P>
<!--TOC subsection 3.2&nbsp;&nbsp;
 Site Replication-->

<H3><A NAME="htoc18">3.2</A>&nbsp;&nbsp;<A NAME="sec:repl"></A>
 Site Replication</H3><!--SEC END -->

<P>
Globule's main feature is to replicate Web sites. This section will explain
you how to configure Globule so that documents from a given web site are
replicated (i.e., copied) across multiple servers and maintained consistent
(i.e., updated when the origin version is updated).
</P>
<P>
Each Web site must have one <A HREF="#sec:intro:term:origin">origin server</A>,
which holds the authoritative version of the documents. It can be replicated
across any number of <A HREF="#sec:intro:term:backup">backup servers</A> and
<A HREF="#sec:intro:term:replica">replica servers</A>. To establish replication
from an origin server to a replica server, or from an origin server to a
backup server, both servers need to be configured appropriately:
</P>
<P>
<OL type=1><LI>
The origin server needs to know where its replica/backup server
 is. This is done using the <A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A> or
 <A HREF="#GlobuleBackupIs">GlobuleBackupIs</A> directive.
<LI>The replica/backup server needs to know where its origin server
 is. This is done using the <A HREF="#GlobuleReplicaFor">GlobuleReplicaFor</A> or
 <A HREF="#GlobuleBackupFor">GlobuleBackupFor</A> directive.
<LI>Both servers need to authenticate each other by using a shared
 password (i.e., they both need to know the same password).
<LI><A NAME="sec:repl:replicaandbackup"></A> If the same site has one or
 more backup server and one or more replica server at the same time,
 then replica servers need to know where the backup servers are. This
 is done using the <A HREF="#GlobuleBackupForIs">GlobuleBackupForIs</A> directive.
</OL>
</P>
<P>
Whenever a browsing user on the Internet surfs to the web-site being
replicated, one of the replica servers or the origin server is selected to
handle the request. If a replica server is selected, the browser is
<EM>redirected</EM> to the replica server. The most accessible form of
redirection is HTTP redirection. HTTP redirection is easier to understand and
set up, but has some disadvantages over DNS based redirection. After you
understand HTTP redirection you can turn to section&nbsp;<A HREF="#sec:conf:dnsredir">3.3</A>
for DNS based redirection.
</P>
<!--TOC subsubsection Replicating a site with HTTP redirection-->

<H4>Replicating a site with HTTP redirection</H4><!--SEC END -->

<P>
We will go through the configuration of a web-site replicated across one
origin and one replica server. Later we will add a backup server which acts
as a fall-back when the origin isn't available for replica servers to fetch
fresh copies of web pages.
</P>
<P>
<UL><LI>
- In this example we assume that you have a computer with hostname
<TT>world.cs.vu.nl</TT> and that you have a web-site
<CODE>http://www.revolutionware.net</CODE> being served from this computer.
<LI>- Your friend provides you with the ability to use his web-server
on his machine <TT>wereld.cs.vu.nl</TT> as a replica.
At this web-server, your pages will be replicated at the URL:
<TT>http://wereld.cs.vu.nl:8080/worldpages/</TT>
</UL>
</P>
<P>
Note that the web-servers run at different port numbers (yours on the default
port 80, the server of your friend at port 8080). With HTTP redirection any
combination of ports is possible.
</P>
<P>
As an example of a document being replicated consider the photo image file
available at <TT>http://www.revolutionware.net/photo.jpg</TT>. This will be
copied and made available at
<TT>http://wereld.cs.vu.nl:8080/worldpages/photo.jpg</TT>
</P>
<P>
To replicate your site <TT>www.revolutionware.net</TT> you must modify your
configuration to something like:
</P>
<PRE>
Listen 80
ServerName world.cs.vu.nl
...
LoadModule globule_module modules/mod_globule.so
GlobuleAdminURL http://world.cs.vu.nl/globuleadm/
...
NameVirtualHost *
...
&lt;VirtualHost *&gt;
  ServerName www.revolutionware.net
  DocumentRoot /var/www/html/pages
  <b>&lt;Location "/"&gt;</b>
    <b>GlobuleReplicate on</b>
    <b>GlobuleReplicaIs http://wereld.cs.vu.nl:8080/worldpages/  coffee</b>
  <b>&lt;/Location&gt;</b>
&lt;/VirtualHost&gt;
</PRE>
<P>
This configuration shows the ServerName, GlobuleAdminURL, etcetera laid out in
a manner described in section&nbsp;<A HREF="#sec:conf:normal">3.1.2</A>. It then resumes with
defining the www.revolutionware.net virtual host section and the documents for
this web-site which will be replicated are to be placed in
<CODE>/var/www/html/pages</CODE>.<SUP><A NAME="text2" HREF="#note2">2</A></SUP>
</P>
<P>
The actual replication is performed by two directives
<TT>GlobuleReplicate</TT> and <TT>GlobuleReplicaIs</TT>. Both <EM>must</EM> be
defined inside a <TT>Location</TT> environment which determines from which
path the documents will be replicated. In this case the path is anything from
<CODE>/</CODE> and all sub-paths, in other words: the entire web-site.
</P>
<!--TOC paragraph GlobuleReplicate on-->

<H5>GlobuleReplicate on</H5><!--SEC END -->
&nbsp;<BR>
<P>
The <TT>GlobuleReplicate</TT> declares that the web-site must be replicated
and that this server will act in the role of origin for the
web-site. Because the GlobuleReplicate directive is placed inside a Location
directive, the URL path from which to start to replicate is determined from
this Location environment.
</P>
<P>
You can also turn redirection partially off for a web-site. Turning off
replication is described in&nbsp;<A HREF="#sec:turningoff">3.2.2</A>.
</P>
<!--TOC paragraph GlobuleReplicaIs...-->

<H5>GlobuleReplicaIs...</H5><!--SEC END -->
&nbsp;<BR>
<P>
One or multiple GlobuleReplicaIs then declare the replica server(s) to which
to replicate the web-site to.
</P>
<P>
You an your friend need to agree upon an URL path you are exporting (assumed
until now to be <TT>http://www.revolutionware.net<B>/</B></TT>) and a URL
path on which your friend will be importing your web-pages (assumed until now
to be <TT>http://wereld.cs.vu.nl:8080/<B>worldpages/</B></TT>).
</P>
<P>
You also need to agree upon a shared secret; a password known by both your
origin server and your friends replica server and used for inter-server
authorization. In the above configuration the phrase ``coffee'' was chosen.
</P>
<P>
Now your server is configured, but your friend needs to update his
configuration as well.
</P>
<PRE>
Listen 8080
ServerName wereld.cs.vu.nl
...
DocumentRoot /var/www/html
...
LoadModule globule_module modules/mod_globule.so
GlobuleAdminURL http://wereld.cs.vu.nl:8080/globuleadm/
...
NameVirtualHost *
...
&lt;VirtualHost *&gt;
  ServerName wereld.cs.vu.nl
  DocumentRoot /var/www/html
  <b>&lt;Location "/worldpages/"&gt;</b>
    <b>GlobuleReplicaFor http://www.revolutionware.net/  coffee</b>
  <b>&lt;/Location&gt;</b>
&lt;/VirtualHost&gt;
</PRE>
<P>
This configuration has one Globule-specific directive; namely the
GlobuleReplicaFor directive which specifies that your friends server will act
within the role of a replica server for your (as specified in the argument of
GlobuleReplicaFor) server. The GlobuleReplicaFor also needs to be located
inside a Location directive to indicate to globule at which path your web-site
should be available.
</P>
<P>
Your friend has a mirror configuration that you have. The ServerName and
Location in which your friends GlobuleReplicaFor is form the URL as specified
by your GlobuleReplicaIs. Vice versa, the ServerName and Location in which
your GlobuleReplicate/GlobuleReplicaIs is placed form the URL as specified in
the argument to GlobuleReplicaFor.
</P>
<!--TOC subsubsection 3.2.1&nbsp;&nbsp;Using a backup-->

<H4><A NAME="htoc19">3.2.1</A>&nbsp;&nbsp;Using a backup</H4><!--SEC END -->

<P>
Whenever a replica copy of a document is not available or no longer valid at a
replica server, it will fetch a fresh copy of the page from the origin server.
This way replica servers will keep up-to-date. However it can be that the
origin server is not available at the time.
</P>
<P>
To this end, backup servers may be defined. The role of these servers it to
maintain a complete set of documents for the replicated web-site. They obtain
this set of pages from the origin server through the same method as normal
replica servers, but just make sure they keep a valid copy at all times.
Replica servers can thus fetch a copy of a web-page from the origin server,
but if unavailable also from a backup server.
<SUP><A NAME="text3" HREF="#note3">3</A></SUP>.
</P>
<P>
Since the operation of a backup server is largely the same as a replica
server, the configuration follows the same line, with three exceptions:
<OL type=1><LI>
instead of using GlobuleReplicaIs and GlobuleReplicaFor use the
directives GlobuleBackupIs and GlobuleBackupFor;
<LI>the normal replicas need to define which alternative backup servers
there are when the regular origin isn't available, which will be done using
the specification of a GlobuleBackupForIs;
<LI>finally the backup-servers need to be told to always keep the documents,
by specifying a suitable replication policy with the
GlobuleDefaultReplicationPolicy directive.
</OL>
</P>
<P>
We will run through the modifications in the origin server and replica server
and how the backup server should be configured. We assume you have another
friend with the machine <TT>monde.cs.vu.nl</TT> which offers to be your
backup-server, then in your configuration of the origin site add the
GlobuleBackupFor directive:
</P>
<PRE>
Listen 80
ServerName world.cs.vu.nl
...
&lt;VirtualHost *&gt;
  ServerName www.revolutionware.net
  DocumentRoot /var/www/html/pages
  &lt;Location "/"&gt;
    GlobuleReplicate on
    GlobuleDefaultReplicationPolicy Invalidate
    GlobuleReplicaIs http://wereld.cs.vu.nl:8080/worldpages/  coffee
    GlobuleBackupIs  http://monde.cs.vu.nl:8333/worldpages/   tea
  &lt;/Location&gt;
&lt;/VirtualHost&gt;
</PRE>
<P>
Clearly, backup servers are almost the same as regular replica servers for the
redirector. The main change is that all regular replica servers need to be
explicitly told there is a redirector available for this site:
</P>
<PRE>
Listen 8080
ServerName wereld.cs.vu.nl
...
&lt;VirtualHost *&gt;
  ServerName wereld.cs.vu.nl
  DocumentRoot /var/www/html
  &lt;Location "/worldpages/"&gt;
    GlobuleReplicaFor http://www.revolutionware.net/  coffee
    <b>GlobuleBackupForIs http://www.revolutionware.net/ http://monde.cs.vu.nl:8333/worldpages/</b>
  &lt;/Location&gt;
&lt;/VirtualHost&gt;
</PRE>
<P>
Note that the usage of the GlobuleBackupForIs is with two arguments, first
arguments specifies for which site we are defining a backup
(GlobuleBackup<B>For</B>Is), the second argument specifies who the backup
server is (GlobuleBackupFor<B>Is</B>). No password needs to be defined; the
first argument must always be the same as specified in GlobuleReplicaFor.
</P>
<P>
Finally the backup server of your other friend needs to setup his
configuration, which is almost the same as setting up a replica, but you
should also add a GlobuleDefaultReplicationPolicy and use GlobuleBackupIs.
GlobuleBackupIs<SUP><A NAME="text4" HREF="#note4">4</A></SUP>.
</P>
<PRE>
Listen 8080
ServerName wereld.cs.vu.nl
...
DocumentRoot /var/www/html
...
LoadModule globule_module modules/mod_globule.so
GlobuleAdminURL http://wereld.cs.vu.nl:8080/globuleadm/
...
NameVirtualHost *
...
&lt;VirtualHost *&gt;
  ServerName wereld.cs.vu.nl
  DocumentRoot /var/www/html
  &lt;Location "/worldpages/"&gt;
    <b>GlobuleDefaultReplicationPolicy Ttl</b>
    <b>GlobuleBackupFor http://www.revolutionware.net/  tea</b>
  &lt;/Location&gt;
&lt;/VirtualHost&gt;
</PRE>
<!--TOC subsubsection 3.2.2&nbsp;&nbsp;Replicating a partial site-->

<H4><A NAME="htoc20">3.2.2</A>&nbsp;&nbsp;<A NAME="sec:turningoff"></A>Replicating a partial site</H4><!--SEC END -->

<P>
Globule allows you to easily define parts of your site that should <EM>not</EM>
be replicated. The origin server will simply not redirect clients to replica
servers, but only the the original, origin server for the paths selected not
to be replicated.
</P>
<PRE>
&lt;VirtualHost *:8333&gt;
  ServerName www.revolutionware.net:8333
  DocumentRoot ...
  &lt;Location "/"&gt;
    GlobuleReplicate on
    GlobuleReplicaIs ...
    GlobuleBackupIs  ...
  &lt;/Location&gt;
  &lt;Location "/cgi-bin/"&gt;
    GlobuleReplicate off
  &lt;/Location&gt;
&lt;/VirtualHost&gt;
</PRE>
<P>
This instructs Globule to replicate the web-site with the URL
<TT>http://www.revolutionware.net:8333/</TT> except the pages that are in the
sub-path <TT>http://www.revolutionware.net:8333/cgi-bin/</TT>.
</P>
<P>
When using HTTP redirection, another way to replicate only parts of a site is
to insert the <A HREF="#GlobuleReplicate">GlobuleReplicate</A>, <A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A>
and <A HREF="#GlobuleBackupIs">GlobuleBackupIs</A> directives inside a <TT>&lt;Location&gt;</TT>
container with a sub-path of <CODE>/</CODE>:
</P>
<PRE>
&lt;VirtualHost *:8333&gt;
  ServerName www.revolutionware.net:8333
  DocumentRoot ...
  &lt;Location "/replicate_me/"&gt;
    GlobuleReplicate on
    GlobuleReplicaIs ...
    GlobuleBackupIs  ...
  &lt;/Location&gt;
&lt;/VirtualHost&gt;
</PRE>
<!--TOC subsection 3.3&nbsp;&nbsp;
 Client Redirection using DNS-->

<H3><A NAME="htoc21">3.3</A>&nbsp;&nbsp;<A NAME="sec:conf:dnsredir"></A>
 Client Redirection using DNS</H3><!--SEC END -->

<!--TOC subsubsection 3.3.1&nbsp;&nbsp;What is DNS redirection?-->

<H4><A NAME="htoc22">3.3.1</A>&nbsp;&nbsp;What is DNS redirection?</H4><!--SEC END -->

<P>
Until now, all configurations shown in this documentation use a redirection
mechanism called HTTP redirection. This means that, when an origin Web server
receives a request, it can reply by ordering the browser to re-issue the same
request at a different server. This scheme is extremely simple, but it has two
major drawbacks. First, as the browser is effectively returned a modified URL,
it can decide to store that URL for future reference. As a consequence,
removing or replacing a replica may render various cached URLs
invalid. Second, each request is still initially posted to the origin server,
so the success of the request depends on the availability of the origin.
</P>
<P>
DNS redirection addresses these problems by basing redirection on a web site's
name. For example, when a browser queries ``http://www.revolutionware.net/'',
it first resolves the server name ``www.revolutionware.net''. In a
non-replicated setup, the browser would always receive the IP address of the
server to contact. Using DNS redirection, the DNS redirector will check where
the client is located and return the IP address of the most suitable server
out of the available replica servers for the site. IP addresses are usually
not shown to the users, so DNS redirection is invisible to them.
</P>
<P>
DNS redirection imposes a few restrictions:
<UL><LI>
Redirection can only be realized for a Web site as a whole, so
 everything from the location <CODE>/</CODE>. It is impossible to replicate
 only a part of a site.<BR>
<BR>
<LI>All servers taking part in the replication of the Web site must
 run on the same port number.<BR>
<BR>
<LI>Running a DNS redirector requires that Apache is started as
 root.<BR>
<BR>
<LI>You must control the DNS domain inside which you want to run your
 web-site. For example, if you want to have your site available
 under the URL <CODE>http://www.revolutionware.net/</CODE>&nbsp;&nbsp;then you must
 own the domain <CODE>revolutionware.net</CODE>. If you do not already own
 a domain, then any
 <A HREF="http://www.internic.net/regist.html">registrar</A> will
 let you register one for a modest yearly fee for the <CODE>.com</CODE>,
 <CODE>.net</CODE> and <CODE>.org</CODE> and some more top-levels. Other top
 levels, such as <CODE>.nl</CODE> are available through
 <A HREF="http://www.iana.org/cctld/cctld-whois.htm">local</A>
 registrars.<BR>
<BR>
Alternatively, if one of your friends already owns a DNS domain
 (for instance <CODE>revolutionware.net</CODE>), then she may delegate a sub-domain
 (for instance <CODE>berry.revolutionware.net</CODE>) to you so that you can for
 example create a site called
 <CODE>http://www.berry.revolutionware.net</CODE> or even<BR>
<CODE>http://berry.revolutionware.net</CODE>.
</UL>
</P>
<!--TOC subsubsection 3.3.2&nbsp;&nbsp;Required elements to setup DNS redirection in Globule-->

<H4><A NAME="htoc23">3.3.2</A>&nbsp;&nbsp;Required elements to setup DNS redirection in Globule</H4><!--SEC END -->

<P>
<UL><LI>
The Apache installation of the origin server must be compiled with the
 patch provided by Globule. This is done by default when using the automated
 installer, otherwise refer to section&nbsp;<A HREF="#sec:install:source">2.3</A>.<BR>
<BR>
<LI>You must setup a DNS server that will contain all informations
 about the domain. How to install a DNS server is unfortunately
 relatively complex, and outside the scope of this document. We
 refer the reader to a good
 <A HREF="http://www.freeos.com/articles/3956/">DNS
 tutorial</A>, or to this
 <A HREF="http://www.oreilly.com/catalog/dns4/">famous book</A>
 on the topic. Alternatively, most good registrars offer a service
 where they run DNS servers for you, and simply ask you to provide
 the information that must be kept there. We strongly recommend
 readers to select a registrar which provides this service, such as
 <A HREF="http://www.gandi.net/">Gandi</A> and
 <A HREF="http://www.godaddy.com/">GoDaddy</A> amongst many
 others.
</UL>
</P>
<!--TOC subsubsection 3.3.3&nbsp;&nbsp;Setting up DNS entries for redirection-->

<H4><A NAME="htoc24">3.3.3</A>&nbsp;&nbsp;Setting up DNS entries for redirection</H4><!--SEC END -->

<P>
Let's assume that you own the domain <CODE>revolutionware.net</CODE> and that you
want to setup DNS redirection for the site
<CODE>http://www.revolutionware.net/</CODE>. In a non-distributed setup, the name
<CODE>www.revolutionware.net</CODE> would simply be an alias for the actual server's
host name. In a Globule setup, <CODE>www.revolutionware.net</CODE> will point to
different machines when being looked up by different clients. We call
<CODE>www.revolutionware.net</CODE> the <EM>generic name</EM> of the site, which
represents all machines collectively. Additionally, each server taking part
in the replication needs a <EM>specific name</EM> of its own that will be used
when Globule needs to contact one specific server within the replicated
site<SUP><A NAME="text5" HREF="#note5">5</A></SUP>.
It is not a problem to give multiple names to the same machine, so even if
these machines already have names (e.g., ``wereld.cs.vu.nl''), you should
create additional generic and specific names just for the sake of the Web
site.
</P>
<P>
Imagine that you have two machines called ``wereld.cs.vu.nl'' and
``world.cs.vu.nl'', which you want to perform the role of origin server and
replica server respectively. Let's assign them the specific names
<CODE>origin.revolutionware.net</CODE> and <CODE>replica.revolutionware.net</CODE>
respectively. The following lines should be inserted in your DNS
zone<SUP><A NAME="text6" HREF="#note6">6</A></SUP>:
</P>
<PRE>
$ORIGIN revolutionware.net.
origin   IN  CNAME  wereld.cs.vu.nl.
replica  IN  CNAME  world.cs.vu.nl.
</PRE>
<P>
Do not forget the dots at the ends of the lines!
</P>
<P>
Alternatively, if you know the IP addresses of your servers (e.g.,
130.37.198.252 and 130.37.193.70), then you may define your zone as follows to
provide minor performance and reliability improvements:
</P>
<PRE>
$ORIGIN revolutionware.net.
origin   IN  A  130.37.198.252
replica  IN  A  130.37.193.70
</PRE>
<P>
Note that A records do not end with a dot.
</P>
<P>
You must now define the generic name <CODE>www.revolutionware.net</CODE> where your
site will be located. We do not want to associate a specific IP address to
this name, but instead let Globule's DNS redirector decide which IP address
should be returned to clients who lookup that name. In the setup we are
creating, the origin server will also be the DNS redirector, so you need to
insert this in the DNS (it is not possible to use an IP address here instead
of the name origin.revolutionware.net):
</P>
<PRE>
www  IN  NS  origin.revolutionware.net.
</PRE>
<P>
Be warned that any change in the DNS records may take a few hours before being
ready for use. If your DNS-redirected site does not work as expected and you
see errors like ``www.revolutionware.net not found'', this probably means that
you should be patient and wait for changes to be fully propagated.
</P>
<!--TOC subsubsection 3.3.4&nbsp;&nbsp;Configuring Globule for DNS redirection-->

<H4><A NAME="htoc25">3.3.4</A>&nbsp;&nbsp;Configuring Globule for DNS redirection</H4><!--SEC END -->

<P>
You must now configure the origin and the replica server so that they support
DNS redirection.
</P>
<P>
Two modifications are needed compared to a non-replicated setup:
<OL type=1><LI>
The origin server must be told to act as a DNS redirector.
<LI>The origin and replica servers must be configured to respond to the
 newly-defined generic and specific DNS names.
</OL>
</P>
<P>
A normal origin server configuration without DNS redirection, based on the
machine hostname wereld.cs.vu.nl and the site www.revolutionware.net, would
look similar to:
</P>
<PRE>
  ...
  ServerName wereld.cs.vu.nl
  ...
  GlobuleAdminURL http://wereld.cs.vu.nl/globulectl
  ...
  NameVirtualHost *

  &lt;VirtualHost *&gt;
    ServerName www.revolutionware.net
    DocumentRoot ...
    &lt;Location /&gt;
      GlobuleReplicate on
      GlobuleReplicaIs ...
  ...
</PRE>
<P>
Note that the sections separated by vertical dots (:) appear at different
points in the configuration file. This order matters, especially the
VirtualHost which needs to be at the end of the configuration file.
</P>
<P>
First, let's enable DNS redirection at the origin server. This is done using
the <TT>GlobuleRedirectionMode</TT> directive. At the global level you need to
add or modify the redirection mode into <CODE>GlobuleDefaultRedirection BOTH</CODE>,
enabling both HTTP and DNS redirection for the server as a whole.<BR>
Then, inside each VirtualHost section which specifies an origin of a
Globule-replicated site, you must declare whether to use HTTP redirection or
DNS redirection only.
</P>
<P>
Having done that, you only need to specify that your site can be reached both
as <CODE>http://www.revolutionware.net/</CODE> and
<CODE>http://origin.revolutionware.net/</CODE>.
</P>
<P>
Here is the resulting configuration file:
</P>
<PRE>
  ...
  ServerName wereld.cs.vu.nl
  ...
  GlobuleAdminURL http://wereld.cs.vu.nl/globulectl
  GlobuleRedirectionMode BOTH
  ...
  NameVirtualHost *

  &lt;VirtualHost *&gt;
    ServerName origin.revolutionware.net
    ServerAlias www.revolutionware.net
    GlobuleRedirectionMode DNS
    DocumentRoot ...
    &lt;Location /&gt;
      GlobuleReplicate on
      GlobuleReplicaIs http://replica.revolutionware.net/  sharedpassword
  ...
</PRE>
<P>
It is important that the ServerName entry contains the specific server name
(origin.revolutionware.net), and that the generic server name
(www.revolutionware.net) appears as the first entry of the ServerAlias
directive. Specific names should be used in other directives such as
GlobuleReplicaIs and GlobuleBackupIs.
</P>
<P>
You must also update the replica server's configuration file to specify that
the replica of the <CODE>http://www.revolutionware.net/</CODE> site can also be
reached using it's location-specific address
<CODE>http://replica.revolutionware.net/</CODE>.
</P>
<PRE>
  ServerName world.cs.vu.nl
  ...
  GlobuleAdminURL http://world.cs.vu.nl/globulectl/
  ...
  NameVirtualHost *
  
  &lt;VirtualHost *&gt;
    ServerName replica.revolutionware.net
    ServerAlias www.revolutionware.net
    DocumentRoot ...
    &lt;Location /&gt;
      GlobuleReplicaFor  http://origin.revolutionware.net/  sharedpassword
    &lt;/Location&gt;
  &lt;/VirtualHost&gt;
</PRE>
<P>
You can now start the two servers. Do not forget to run them as root, as
regular users normally cannot run DNS redirectors! Your site should now be
available at URL <CODE>http://www.revolutionware.net/</CODE>.
</P>
<!--TOC subsubsection 3.3.5&nbsp;&nbsp;Testing DNS redirection-->

<H4><A NAME="htoc26">3.3.5</A>&nbsp;&nbsp;Testing DNS redirection</H4><!--SEC END -->

<P>
With DNS redirection, the identity of the server which served your requests
will not be shown to you. You may then start wondering if redirection
actually works, or if all requests will end up being served by a single
server.
</P>
<P>
Most Linux distributions contain the utility ``dig'' which is used to query
DNS servers by hand. If you do not find it, it is usually part of an RPM
package called <CODE>bind-utils</CODE>.
</P>
<P>
Start by testing your DNS domain:
</P>
Type:
<PRE>
dig -t NS revolutionware.net
</PRE>
<P>
The result looks something like:
</P>
<PRE>
; &lt;&lt;&gt;&gt; DiG 9.2.4 &lt;&lt;&gt;&gt; -t NS revolutionware.net
;; global options:  printcmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 43750
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; QUESTION SECTION:
;revolutionware.net.         IN  NS

;; ANSWER SECTION:
revolutionware.net.   86400  IN  NS  NAME-OF-YOUR-DNS-SERVER1.com.
revolutionware.net.   86400  IN  NS  NAME-OF-YOUR-DNS-SERVER2.com.

;; Query time: 1 msec
;; SERVER: 130.37.20.3#53(130.37.20.3)
;; WHEN: Thu Nov 10 15:18:18 2005
;; MSG SIZE  rcvd: 66
</PRE>
<P>
In the ``answer section'' you should see at least two lines with the names of
the DNS servers responsible for your domain. If you used the services of your
registrar to hold informations about your domain, then both servers should
probably belong to it.
</P>
<P>
Now, test the names that you have created:
</P>
<PRE>
dig origin.revolutionware.net
</PRE>
<PRE>
; &lt;&lt;&gt;&gt; DiG 9.2.4 &lt;&lt;&gt;&gt; origin.revolutionware.net
;; global options:  printcmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 50422
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;origin.revolutionware.net.      IN   A

;; ANSWER SECTION:
origin.revolutionware.net.  430  IN   A    130.37.199.101

;; AUTHORITY SECTION:
revolutionware.net.         430  IN   NS   NAME-OF-YOUR-DNS-SERVER1.com. 

;; Query time: 3 msec
;; SERVER: 130.37.20.3#53(130.37.20.3)
;; WHEN: Thu Nov 10 15:31:30 2005
;; MSG SIZE  rcvd: 66
</PRE>
<P>
In the ``answer section'' you should see the IP address of your origin
server. Do the same to test the name <CODE>replica.revolutionware.net</CODE>.
</P>
<P>
Now, let's test if the redirector is correctly registered:
</P>
<PRE>
dig -t NS www.revolutionware.net
</PRE>
<PRE>
; &lt;&lt;&gt;&gt; DiG 9.2.4 &lt;&lt;&gt;&gt; -t NS www.revolutionware.net
;; global options:  printcmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 55825
;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;www.revolutionware.net.         IN   NS

;; AUTHORITY SECTION:
www.revolutionware.net.     600  IN   NS   origin.revolutionware.net.

;; Query time: 0 msec
;; SERVER: 130.37.193.66#53(goupil)
;; WHEN: Thu Nov 10 15:34:50 2005
;; MSG SIZE  rcvd: 62
</PRE>
<P>
The authority section should contain a line ending up with<BR>
<CODE>NS origin.revolutionware.net.</CODE><BR>
Finally, let's test if the DNS redirector works:
</P>
<PRE>
dig @origin.revolutionware.net www.revolutionware.net
</PRE>
<PRE>
; &lt;&lt;&gt;&gt; DiG 9.2.4 &lt;&lt;&gt;&gt; @origin.revolutionware.net www.revolutionware.net
;; global options:  printcmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 61015
;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;www.revolutionware.net.         IN   A

;; ANSWER SECTION:
www.revolutionware.net.     10   IN   A    130.37.199.101

;; AUTHORITY SECTION:
www.revolutionware.net.     0    IN   NS   origin.revolutionware.net.

;; Query time: 1 msec
;; SERVER: 130.37.198.252#53(origin.revolutionware.net)
;; WHEN: Thu Nov 10 15:38:04 2005
;; MSG SIZE  rcvd: 78
</PRE>
<P>
In the ``answer section'' you should see the IP address of one of your
servers. Issue the same command several times, you should receive a different
IP address each time.
</P>
<!--TOC subsubsection 3.3.6&nbsp;&nbsp;Advanced usage-->

<H4><A NAME="htoc27">3.3.6</A>&nbsp;&nbsp;Advanced usage</H4><!--SEC END -->

<!--TOC paragraph Using a backup server-->

<H5>Using a backup server</H5><!--SEC END -->
&nbsp;<BR>
<P>
A backup server adds virtually no additional complexity to the setup. Like
using <CODE>replica.revolutionware.net</CODE> as the DNS name for a plain replica,
we can use a separate name for a replica which performs the role of a backup
server. Suppose we add <CODE>backup.revolutionware.net</CODE> to the DNS, which is
some alias name for a server which will play the role of the backup server.
Then the origin of www.revolutionware.net will declare:
</P>
<PRE>
    ServerName origin.revolutionware.net
    ServerAlias www.revolutionware.net
    &lt;Location /&gt;
      GlobuleReplicate on
      GlobuleReplicaIs http://replica.revolutionware.net/  sharedpassword
      GlobuleBackupIs  http://backup.revolutionware.net/   wachtwoord
    ...
</PRE>
<P>
The backup server will be the same as any other replica server, but instead of
using GlobuleReplicaFor it will use the directive GlobuleBackupFor and use
backup.revolutionware.net as ServerName and www.revolutionware.net as
ServerAlias. Likewise the replica servers should use the name
<CODE>backup.revolutionware.net</CODE> in their declaration of a GlobuleBackupForIs
directive:
</P>
<PRE>
    ServerName replica.revolutionware.net
    ServerAlias www.revolutionware.net
    &lt;Location /&gt;
      GlobuleReplicaFor  http://origin.revolutionware.net/  sharedpassword
      GlobuleBackupForIs http://origin.revolutionware.net/  http://backup.revolutionware.net/
    ...
</PRE>
<!--TOC paragraph Not running DNS redirection on port 53 for testing purposes-->

<H5>Not running DNS redirection on port 53 for testing purposes</H5><!--SEC END -->
&nbsp;<BR>
<P>
Globule will bind itself to port 53 for answering DNS queries. This port
number is the only port normally used by browsers to resolve the hostnames in
URLs. However if you want to just test DNS redirection you can resolve
hostnames using the <CODE>dig</CODE> program. Using the -p option you can instruct
dig to contact the name server at a different port, however you should also
contact the machine serving the request directly, so you need to use the
<TT>@<I>hostname</I></TT> construct. For instance:
</P>
<PRE>
dig -p 5353 @wereld.cs.vu.nl www.revolutionware.net
</PRE>
<P>
Would instruct dig to ask the name server running on the machine
wereld.cs.vu.nl at port 5353 to resolve the name www.revolutionware.net.
</P>
<P>
Globule can be instructed to resolve DNS queries on another port as port 53
using the GlobuleDNSRedirectionAddress directive:
</P>
<PRE>
GlobuleDNSRedirectionAddress :5353
</PRE>
<P>
The GlobuleDNSRedirectionAddress directive needs to be specified before any
GlobuleRedirectionMode directive.
</P>
<!--TOC subsection 3.4&nbsp;&nbsp;
 System Monitoring-->

<H3><A NAME="htoc28">3.4</A>&nbsp;&nbsp;<A NAME="sec:conf:monitoring"></A>
 System Monitoring</H3><!--SEC END -->

<P>
Globule is more complex than a regular Apache server. As it is inherently
distributed, information about it is spread over multiple machines which bare
complex relationships. One of the goals of Globule is performance and
reliability increase, but evaluation is less straight forward because of the
distributed system. In case of unexpected behaviour the cause of this is
harder to trace.
Globule has a monitoring framework which allows to gain more insight behaviour
of a Globule replicates web-site.
</P>
<P>
Typically an administrator wants to monitor a running service, which we define
as the ability to:
<OL type=1><LI>
Find the reason behind any current fault or apparent incorrect
operation, such as the inability of Globule to use a replica server and
redirect to it;
<LI>View the impending failure, whether the server is becoming overloaded or
other exceptional information;
<LI>Record resource usage for accounting purposes;
<LI>Use resource usage and visit rate to evaluate how well the web-server
performs. Specifically, view the benefits Globule brings;
<LI>Interact with the tunable parameter of the site-operation such that an
optimum performance can be reached;
<LI>Gather statistical information about the visitors of the web-site for
external purposes such as generating a report for marketing;
<LI>Have fun watching the server doing its work, otherwise a background task
like a web-server is a nearly invisible entity.
</OL>
</P>
<P>
To address these needs, Globule has an interface for these forms of
monitoring controls:
<OL type=1><LI>
log a history of regular operations, web-page accesses in this case;
<LI>view and modify tunable parameters;
<LI>view the current state;
<LI>view a history of exceptional events (such as errors, warnings, but also
for instance increases in resource usage).
</OL>
</P>
<P>
Apache itself provides two logging files which provide some means of
monitoring. One is the access-log, which contains a listing of all URLs which
have been requested from the web-site. The other logging file is the
error-log, which contains error messages ranging in severity from critical,
through normal warnings and informational messages. The amount of current
state that can be monitored is very minimal, only server-info and
server-status module provide some information and are rarely used.
</P>
<P>
The access- and error-log contain only a bit of monitoring data, which is also
unstructured and limited in information. Therefore Globule also provides
monitoring information which is more suited for a distributed setup, is
extendible and has more advantages. It is however very useful to have the
standard error and access log interface for two reasons:
</P>
<P>
<OL type=1><LI>
The error log in certain cases is the only way in which errors can be
reported back to the administrator of the web-server;
<LI>Standard utilities and analysis software reuse the default Apache access
log (and to a lesser extent the error log) in their operation.
</OL>
</P>
<P>
Globule therefore provides three main access points for monitoring. First,
errors, warnings and some other messages are written to the default Apache
error log. Second, an equivalence for the access log is produced. The third
monitoring access is specific to Globule. To make it as accessible as
possible, detailed Globule information is made available through a
web-interface.
</P>
<P>
The usage of these three are now viewed individually in the next subsections.
</P>
<!--TOC subsubsection 3.4.1&nbsp;&nbsp;Error log-->

<H4><A NAME="htoc29">3.4.1</A>&nbsp;&nbsp;Error log</H4><!--SEC END -->

<P>
Each Apache server maintains one or more error-log file(s) where information,
warnings and error messages are written.
</P>
<P>
The error log is not Globule specific and therefore also other modules use the
same error log file to write down messages. Its purpose is primary to log
messages which hamper the correct or intended working of the web-server after
the web-server has been started.<BR>
Such messages are written into the error-log as indicated in the
<CODE>httpd.conf</CODE> configuration file, as Apache is a server program. Services
run in the background without ever contacting the user directly.
</P>
<P>
A standard error log file is normally defined naming either <CODE>error_log</CODE>
or <CODE>error.log</CODE> and placed into the <TT><I>ServerRoot</I></TT><TT>/logs</TT>
directory.
</P>
<P>
Similar to what Apache itself does, Globule associates different levels of
significance to messages it generates. This allows the administrator to
select which messages should be written into the log or processed otherwise.
Globule error, warning and informational messages are not marked any
differently from any other messages. Next to the LogLevel directive, however,
there is another Globule-specific directive that controls how verbose Globule
is in reporting events. This because within a running Globule enabled server
you want to be able to increase the verbosity for certain types of events when
finding faults. The directive <TT>GlobuleDebugProfile</TT> sets the initial
verbosity of Globule.
</P>
<P>
Only one GlobuleDebugProfile directive can and should be used, which takes
global effect over the web-sites. A common use it to set it at a default
level using:
</P>
<PRE>
GlobuleDebugProfile default
</PRE>
<P>
This will keep any messages of level ``error'' or above passing through to the
Apache logging method. Other profiles available at this time are:
<TABLE CELLSPACING=2 CELLPADDING=0>
<TR><TD ALIGN=left NOWRAP><TT>default</TT></TD>
<TD ALIGN=left NOWRAP>significant error messages are logged</TD>
</TR>
<TR><TD ALIGN=left NOWRAP><TT>defaults</TT></TD>
<TD ALIGN=left NOWRAP><I>same as default</I></TD>
</TR>
<TR><TD ALIGN=left NOWRAP><TT>extended</TT></TD>
<TD ALIGN=left NOWRAP>errors and exceptional situations are logged,</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>&nbsp;</TD>
<TD ALIGN=left NOWRAP>this will cause periodically logging even if idle</TD>
</TR>
<TR><TD ALIGN=left NOWRAP><TT>verbose</TT></TD>
<TD ALIGN=left NOWRAP>more verbose logging of events</TD>
</TR></TABLE>
These levels relate to the LogLevel ``warn'' and ``info'', but Globule may
provide specific filters to specific classes of events at runtime.
</P>
<P>
For a correctly running server, informational and warning messages generated
by Globule may be accessed through the web interface discussed later too, but
the error-log is the only means for Apache/Globule to report situations in
which the server is failing. It therefore should be inspected by the
administrator of a web-site in case of problems.
</P>
<P>
Note that when configuring Apache you may:
<UL><LI>
Denote separate error log files for separate VirtualHost definitions.
<LI>Use LogLevel to suppress messages having a severity below a certain
level. Note that the LogLevel directive needs to be defined before ErrorLog
directive to take effect, this allows overriding the LogLevel for different
ErrorLog definitions.
<LI>Not see any error messages when starting Apache, but Apache will still
fail to start. Therefore you should always inspect the error-log. There are
even instances where Apache will fail to start and no error messages are
produced in the error-log. In these cases you want to check whether the
Apache service daemon has started, named <CODE>httpd</CODE>.
</UL>
</P>
<!--TOC subsubsection 3.4.2&nbsp;&nbsp;Merged access log-->

<H4><A NAME="htoc30">3.4.2</A>&nbsp;&nbsp;Merged access log</H4><!--SEC END -->

<P>
A standard installation of Apache provides log files of all successful URL
accesses to the server as defined by the CustomLog and/or AccessLog
directives. The format of the AccessLog filename is referred to as a Common
Log Format (CLF) which is a format shared between multiple types of
web-servers. With the CustomLog format you are free to specify the format to
be used, but most likely you will use an extension to the CLF known as a
combined log format. In any case these log file can be global, or you can
specify a separate access log for individual VirtualHost specifications.
</P>
<P>
The default access log produced by Apache is however badly suited within a
setup of Globule. It namely only logs accesses to <EM>this</EM> web-server.
Accesses to the same web-site but serviced by a replica web-server are logged
at that other web-server. This is not the result you would want from an
access log, as one is not interested in the accesses to this web-<EM>server</EM>
but to this web-<EM>site</EM>.
Globule solves this by merging logs of all requests to all replica web-servers
serving the same web-site.
</P>
<P>
Each web-server collects data on a per-site basis regarding accesses and
some other information. These partial logs are periodically shipped back,
based on the interval as specified by the <TT>GlobuleHeartBeatInterval</TT>
directive, through the HTTP protocol back to the origin server, which appends
this to its own information. Consequently the accumulation of this data is
only partially sorted in time.<SUP><A NAME="text7" HREF="#note7">7</A></SUP>
</P>
<P>
This combined access log not only reports on the bare accesses being made, but
also some information relevant for a distributed web-site setup, such as which
replica server received the request. Because of this, a file format such as
the CLF is not usable and Globule uses a different format (documented in
appendix&nbsp;<A HREF="#sec:reportlog-format">B.1</A>). One can however convert merged access
logs from Globule's format into standard common log format (see
Section&nbsp;<A HREF="#sec:conf:monitoring:globuleutil">3.4.3</A>).
</P>
<P>
Apart from the format, also the location where this file is stored is
different. If you replicate a web-site, then Globule creates a directory
named <CODE>.htglobule</CODE> in the directory containing the web-documents being
replicated. In this directory a file <CODE>report.log</CODE> is created which is a
log of events accumulated from all replica servers. For instance if you have
the following definition in your <CODE>httpd.conf</CODE>:
<PRE>
DocumentRoot /home/www/htdocs
&lt;Location /&gt;
GlobuleReplicate on
&lt;/Location&gt;
</PRE>Then this report-log is stored as
<CODE>/home/www/htdocs/.htglobule/report.log</CODE>.
</P>
<P>
As mentioned in the introduction of this section there are utilities which
depend on a CLF or combined log format access-log file to extract information
about the usage of the web-site. Naturally you would want to be able to use
any existing utilities. Therefore the globule module is accompanied with a
program which transforms a report.log file into a valid access-log file in
combined or CLF format. Naturally the additional information stored by
Globule is lost in this translation but these would not make sense to any such
software.
</P>
<!--TOC subsubsection 3.4.3&nbsp;&nbsp;
 Utility program globuleutil-->

<H4><A NAME="htoc31">3.4.3</A>&nbsp;&nbsp;<A NAME="sec:conf:monitoring:globuleutil"></A>
 Utility program globuleutil</H4><!--SEC END -->

<P>
The <CODE>globuleutil</CODE> program converts one or more report-log files into a
file similar in structure to a Apache common or combined log file. The output
produced is written to standard output and can be either fed directly using a
pipe into a web log analyzer program such as webalizer or written to a file:
</P>
<PRE>
globuleutil /home/www/htdocs/.htglobule/report.log &gt; access.log
</PRE>
<P>
When the utility program is given multiple arguments representing multiple
report-log files, they will be merged based on the timestamp in each file.
Not only report-log files may be specified as input files, also regular Apache
common or combined log file formats may be specified.
</P>
<P>
Since most of the time input files are not completely sorted in time, you need
to either sort them beforehand, or indicate to globuleutil that the files are
only partially sorted.
The globuleutil utility will then allow for entries to be out of place, as
long as the time difference between where the entry should have appeared in
the log file based on its timestamp and the place where it actually appeared
later on in the log file is no longer than <I>n</I> seconds away. The maximum
allowed slag <I>n</I> is the lookahead window in time. This time difference is on
a per input file basis.
</P>
<P>
If the window given is too small, an error message will be generated. When
specifying a large time interval window, the globuleutil program will execute
much slower and consume more memory. This trade-off depend on the settings of
your web-server, the outage of replica and origin servers and the
<TT>GlobuleHeartBeatInterval</TT> interval.
</P>
<!--TOC paragraph globuleutil usage-->

<H5>globuleutil usage</H5><!--SEC END -->
&nbsp;<BR>
<PRE>
<b>globuleutil</b> [ <b>-v</b> ] [ <b>-f</b> <b>combined</b> | <b>common</b> ]
            [ <b>-w</b> <i>seconds</i> ] [ <b>-p</b> <i>prefix</i> ]
            <i>file1</i>...
</PRE>
<!--TOC subparagraph <TT>-h</TT>-->

<H5><TT>-h</TT></H5><!--SEC END -->
&nbsp;<BR>
<P>
Output help information.
</P>
<!--TOC subparagraph <TT>-v</TT>-->

<H5><TT>-v</TT></H5><!--SEC END -->
&nbsp;<BR>
<P>
Increases the verbosity of information such as the input file format detected,
resources and interval window used, etcetera. Multiple options <TT>-v</TT>
increase the verbosity level.
</P>
<!--TOC subparagraph <TT>-f<I>format</I></TT> or
 <TT>--format=<I>format</I></TT>-->

<H5><TT>-f<I>format</I></TT> or
 <TT>--format=<I>format</I></TT></H5><!--SEC END -->
&nbsp;<BR>
<P>
Where format it either <TT>common</TT> or <TT>combined</TT>, specifies in
which Apache log style to output the result. Only the common a.k.a. CLF file
format is standardized, but the combined log file is an often used Apache file
format.
</P>
<!--TOC subparagraph <TT>-p<I>prefix</I></TT> or <TT>--prefix=<I>prefix</I></TT>-->

<H5><TT>-p<I>prefix</I></TT> or <TT>--prefix=<I>prefix</I></TT></H5><!--SEC END -->

<P>
Prepend the path <I>prefix</I> before each URL. The URIs in the report-log
files are relative to the path imported or exported from. Full URLs are not
used as the initial path can be different on the replica servers and origin
server in case of HTTP redirection. Therefore you often want to prepend the
path from which the documents are being exported, equal to the path in the
<TT>Location</TT> directive in which the <CODE>GlobuleReplicate</CODE> on resides.
</P>
<P>
For DNS redirection, this would be <TT>/</TT>, which is the default.
</P>
<!--TOC subparagraph <TT>-w <I>seconds</I></TT> or
 <TT>--lookahead-window=<I>seconds</I></TT>-->

<H5><TT>-w <I>seconds</I></TT> or
 <TT>--lookahead-window=<I>seconds</I></TT></H5><!--SEC END -->
&nbsp;<BR>
<P>
Specifies the window by of time by which items in any input file may be
unsorted.
</P>
<!--TOC subsubsection 3.4.4&nbsp;&nbsp;Webalizer monitoring and the installer setup-->

<H4><A NAME="htoc32">3.4.4</A>&nbsp;&nbsp;Webalizer monitoring and the installer setup</H4><!--SEC END -->

<P>
If you have chosen for the installer procedure to install Globule, it will
include the program webalizer to provide statistics about your web-site and
the globuleutil program is automatically invoked when you access the web-page
with the webalizer report through the globule administration URL. More on the
administration URLs in the next section.
</P>
<P>
Your installation uses the globulectl program with run option webalizer to
detect which origin site is to be updated and how to run the
report.log file through globuleutil and feed the result to the webalizer
statistical program. If you have different needs then you would to modify
this script and the webalizer configuration file
...<CODE>etc/webalizer.conf</CODE>.
</P>
<P>
The webalizer reports are also kept up-to-date in this installation through a
periodically run script if kept enabled in the crontab.
</P>
<!--TOC subsubsection 3.4.5&nbsp;&nbsp;Globule monitoring web interface-->

<H4><A NAME="htoc33">3.4.5</A>&nbsp;&nbsp;Globule monitoring web interface</H4><!--SEC END -->

<P>
Monitoring data specific to Globule can be accessed through a web-interface.
A globule-enabled server provides a single address for all the web-sites
within Globule's control hosted by the server, which is accessible at the URL
specified by the GlobuleAdminURL directive.
</P>
<P>
A normal installation will have a default set of pages installed at this
location when Globule has been compiled with the <TT>--enable-globuleadm</TT>
arguments. If you installed using Globule using the automatic installer then
the administration pages are always installed. They are not installed for
RPM-based installations. These pages can be customized at will as they are
not embedded within the server, but communicate with Globule to obtain the
monitoring information.
</P>
<P>
The uncustomized pages will show a menu to the different subjects at the top
of the pages. Since the pages evolve with each release this documentation
does not strive to give a detailed walk-through. Rather, this documentation
only explains the rough outline. The pages themselves describe their
individual functionality.
</P>
<P>
What the administration pages provide is:
</P>
<P>
<UL><LI>
Generic data about which version of Globule is installed, what
extensions are available (such as PHP) and how much global resources are in
use.
<LI>A summary of error messages and diagnostics information.
<LI>A listing of all web-sites which are under the control of Globule at
this server. This includes sites for which this server plays the role of
origin, replica or redirector.<BR>
<BR>
When replicating only certain parts of a web-site (multiple GlobuleReplicate
on directives within the same ServerName for different paths), it will list
each path from which a site is being replicated individually.
For this reason the web interface refers to these as <EM>sections</EM> of the
server in which Globule plays a role. Additionally, a section can also be a
Globule-replicated database as discussed in the section on dynamic content.
</UL>
</P>
<P>
For each section defined you can browse through details such as:
<UL><LI>
The other servers which with this web-server is connected for this
web-site, these are called the <EM>peers</EM>. Such as if this server is the
origin of this web-site, all the servers which play the role of replica
server. Of interest here is mainly if these servers are available to help
your server host your web-content.
<LI>The recent accessed documents and their current status.
<LI>A report of the accesses as made by webalizer if Globule had been
installed through the automated installer.
</UL>
</P>
<!--TOC subsection 3.5&nbsp;&nbsp;
 Dynamically generated content-->

<H3><A NAME="htoc34">3.5</A>&nbsp;&nbsp;<A NAME="sec:dyncontent"></A>
 Dynamically generated content</H3><!--SEC END -->

<P>
Dynamically-generated content allows the pages of a web site to be more
functional by returning content specifically of interest to the browsing user,
such as the results of a search function for example. Therefore web-sites
with dynamic content will and are becoming more predominant.
</P>
<P>
Dynamic content is defined as documents which are not literally stored as
files, but generated as the result of a program execution each time the page
is being requested by a browser. Despite their names DHTML and flash
content are not dynamic content, as the same content is served to every
browser. It is just displayed by the browser differently.
</P>
<P>
For a web server, delivering dynamic content is different than static content
because after locating the URL-related resource it needs to invoke a program
to transform the plain resource to generate the actual content to be passed to
the browser. An interpreter takes the URL-related resource and executes it.
This can in turn result in accessing additional resources such as files and
databases before the result is passed to the browser. Globule also provides
solutions for executing these web-applications distributedly.
</P>
<P>
Globule enables the replication of dynamic content based on PHP scripts
without any structural changes of the content. It works in the following way:
</P>
<P>
<UL><LI>
It replicates the sources used to generate dynamic content rather than
replicating the generated content;
<LI>It recursively fetches other resources required by the script being
interpreted to make them available at replica servers.
</UL>
</P>
<P>
This is a much more advanced method of replication than mirrors or caching
proxies, and much easier to convert to than complicated distributed
environments. However there are some limitations of the current
implementation of dynamic content replication:
<UL><LI>
It only works for PHP scripts. Other dynamic document generation
techniques such as Perl and servlets are not supported;
<LI>Scripts which must undergo some small changes;
<LI>It does not support the usage of backup servers to replicate data at
this time;
<LI>PHP must be configured in safe mode, and references to resources should
be relative and within the exported URL path;
<LI>Changes to plain data files are currently not sent back to the origin
server (this may be improved in future releases);
<LI>It only supports access to the most common functions of the MySQL-style
database interface in PHP.
</UL>
</P>
<P>
To get replication of dynamic content operational you need to:
<UL><LI>
compile and add PHP support to Apache;
<LI>instrument your PHP pages to inform Globule about the usage
 of sub-resources and databases;
<LI>instruct Globule on how to contact the database in the <CODE>httpd.conf</CODE>
 configuration file.
</UL>
</P>
<!--TOC subsubsection 3.5.1&nbsp;&nbsp;Adding PHP support to Apache-->

<H4><A NAME="htoc35">3.5.1</A>&nbsp;&nbsp;Adding PHP support to Apache</H4><!--SEC END -->

<P>
With PHP, the content is generated by an interpreter program, which is a
separate software which plugs into the Apache server and must therefore be
installed and configured too.
</P>
<P>
If you used the automatic installer, PHP support should be present already and
the <CODE>httpd.conf</CODE> configuration file have PHP enabled.
</P>
<P>
If you need to add PHP support or want to check whether PHP is enabled in your
configuration, this section provides some guidelines on the way Globule
expects PHP to be installed. Since the addition on PHP support is not
directly related to Globule we refer to the
<A HREF="http://www.php.net/manual/en/install.php">official documentation</A>
for a full PHP installation reference.
</P>
<P>
Basic installation and configuration of PHP is relative simple, but since PHP
can be installed and configured so diversely, be aware that incompatibility
can arise when diverting from the expected installation. We therefore
strongly suggest to use the all-in-one installation which provides a standard
installation. The automatic installer and Globule Broker System also provide
the right settings in the <CODE>httpd.conf</CODE> file for usage with Globule.
</P>
<P>
If you use the installer and answered ``Yes'' to include MySQL support you
already have dynamic content support and you can continue with
section&nbsp;<A HREF="#sec:dyncontent:usage">3.5.2</A> on using Globule support in PHP. If you
used the installer without MySQL support, then you will be able to use PHP
scripts but database drivers will not be compiled. Contact us if you need to
overcome this. If you installed Globule from source, read
Section&nbsp;<A HREF="#sec:install:php">2.3.2</A> on how to install PHP from source.
</P>
<!--TOC subsubsection 3.5.2&nbsp;&nbsp;
 Using Globule support in PHP-->

<H4><A NAME="htoc36">3.5.2</A>&nbsp;&nbsp;<A NAME="sec:dyncontent:usage"></A>
 Using Globule support in PHP</H4><!--SEC END -->

<P>
Globule will take care of the replication of the PHP source files to replica
servers. However, the PHP programs do have to be modified and provide some
additional information to Globule.
</P>
<P>
The modifications to the original PHP pages for a Globule environment have to
do with telling Globule that one PHP page actually <EM>requires</EM> another PHP
page, data file or database entries to be present. Globule can then also make
sure these are present on the local server and point the PHP page to the right
location for the specific replica server.
</P>
<P>
The modifications to your PHP pages are:
</P>
<P>
<UL><LI>
You must put the following line in the beginning of all your PHP pages:
<PRE>
&lt;?PHP eval(stripslashes($_SERVER["GLOBULE_PHPSCRIPT"])); ?&gt;
</PRE><LI>For all instances of the statements <CODE>require</CODE>, <CODE>require_once</CODE>,
<CODE>include</CODE>, <CODE>include_once</CODE>, etcetera wrap the argument in a call to
the <TT>globule(<I>...</I></TT><TT>)</TT> function. For example:
<PRE>
require "includedpage.php";
</PRE>must become:
<PRE>
require globule("includedpage.php");
</PRE>If you open data files read-only, you should wrap the first argument
representing the filename also in a call to the <TT>globule()</TT>
function. However, do this only if this is a local file, not if the
open is called with an URL.
</UL>
</P>
<!--TOC subsubsection 3.5.3&nbsp;&nbsp;MySQL query caching with Globule-->

<H4><A NAME="htoc37">3.5.3</A>&nbsp;&nbsp;<A NAME="sec:dynamicdb"></A>MySQL query caching with Globule</H4><!--SEC END -->

<P>
In many cases, PHP pages must access a database to produce a result.
In such setups, the simplest setup is to let Globule replicate the PHP
code, but keep the database centralized. This setup, often called
edge-side computing, may however prove quite inefficient if the
performance bottleneck lies in the database. One of Globule's most
innovative features allows programmers to design their PHP/MySQL
applications such that database query results are cached at the
replica servers. This system can greatly improve the overall system's
performance&nbsp;[<A HREF="#swami2005c"><CITE>3</CITE></A>].
</P>
<P>
Configuring Globule to cache MySQL query results requires:
</P>
<P>
<UL><LI>
to update the database-related statements in the PHP code;
<LI>and to update the Apache configuration file of the origin and
 replica servers.
</UL>
</P>
<P>
Note that this setup currently works only for MySQL databases; also,
the use of backup servers is not supported so no page can be delivered
while the central database is unreachable.
</P>
<!--TOC paragraph Updating PHP pages-->

<H5>Updating PHP pages</H5><!--SEC END -->
&nbsp;<BR>
<P>
To make use of database query caching, PHP pages must be edited in the
following way:
</P>
<P>
<UL><LI>
All PHP calls to the MySQL driver in the form of
<TT>mysql_<I>...</I></TT> must be rewritten as <TT>globule_mysql_</TT>.
Thus for example:
<PRE>
mysql_connect("localhost","master","");
</PRE>must become:
<PRE>
globule_mysql_connect("localhost","master","");
</PRE><BR>
<BR>
<LI>After any call that determins the database being used (i.e.,
 <TT>globule_mysql_connect</TT> and/or
 <TT>globule_mysql_select_db</TT>), you must insert a call to
 <TT>globule_mysql_reattach</TT>. The argument in this statement is
 described in section&nbsp;<A HREF="#sec:dynamicdb">3.5.3</A> and represents a
 Globule-specific URL for the database. A good name might be
 <TT>db-<I>database</I></TT>, where <TT>database</TT> is the
 database name of being connected to. For example:
<PRE>
globule_mysql_connect("localhost","master","");
globule_mysql_select_db("globecbc");
globule_mysql_reattach("db-globecbc");
</PRE><LI>Furthermore, when using MySQL, you must replace the usage of
 <TT>mysql_query</TT> with the usage of
 <TT>globule_mysql_execute</TT> and declare the queries being made
 first, as described next.
</UL>
</P>
<!--TOC paragraph Usage of query templates-->

<H5>Usage of query templates</H5><!--SEC END -->
&nbsp;<BR>
<P>
For Globule to handle cached database queries correctly, it is
necessary to declare all queries before they can be use by your PHP
scripts. The usage of <TT>mysql_query</TT> is therefore not directly
possible. Instead, any query you want to execute first needs to be
stored before it can be used. This procedure is similar to the
prepared statement interface in the improved PHP MySQL interface, and
many other modern database interfaces.
</P>
<P>
Instead of building the string representing the query and executing
it, such as in:
</P>
<PRE>
for($i=0; $i&lt;10; $i++) {
  $query = "select * from t where t.id &gt; " + $i + " and t.rel = 4";
  mysql_query($query)
  ...
</PRE>
<P>
We instead will first declare a template of the query:
</P>
<PRE>
globule_mysql_declare("myquery","select * from t where t.id &gt; ? and t.rel = 4");
</PRE>
<P>
These declare statements should be inserted after any call to the relevant
<TT>globule_mysql_attach</TT> statement. The above statement <EM>declares</EM>
a named statement ``myquery'', where certain parts may be filled in when the
query is later executed. These yet unspecified, formal arguments are denoted
with a question mark <CODE>?</CODE>.
</P>
<P>
The query can then be executed, where there used to be a call to
<TT>mysql_query</TT> using a call to <TT>globule_mysql_execute</TT>, which
instead of using the full query, just uses the query name:
</P>
<PRE>
globule_mysql_execute("myquery", array($i));
</PRE>
<P>
The first argument represents the query name, and the second argument is an
array of all values to be instantiated for the formal argument in the query
template, as denoted with question marks.
</P>
<!--TOC paragraph Configuring Globule for Database Query Caching-->

<H5>Configuring Globule for Database Query Caching</H5><!--SEC END -->
&nbsp;<BR>
<P>
Now, you also need to update the <CODE>httpd.conf</CODE> configuration files
of your origin and replica servers.
</P>
<P>
Suppose that, before updating your PHP scripts you had the following
MySQL connection sequence:
</P>
<PRE>
mysql_connect("localhost","master","");
mysql_select_db("globecbc");
</PRE>
<P>
This would make a contact to the database running on the localhost server,
using username ``master'' and with an empty password using the database
``globecbc''.
</P>
<P>
To make this database reachable from the replica servers, we need to update
the configuration of the origin server, such that a HTTP based interface for
queries to the database:
</P>
<PRE>
  &lt;VirtualHost *&gt;
    ServerName origin.revolutionware.net
  ...
    &lt;Location /&gt;
      GlobuleReplicate on
      GlobuleReplicaIs http://replica.revolutionware.net/  sharedpassword
  ...
    &lt;/Location&gt;
    &lt;Location /db-globecbc&gt;
      GlobuleDatabase mysql://master@localhost/globecbc dbsharedpassword
    &lt;/Location&gt;
  ...
</PRE>
<P>
The database identified by the URL <CODE>mysql://master@localhost/globecbc</CODE>
indicates the same identification as used in the <TT>mysql_connect</TT> and
<TT>mysql_select_db</TT> call. If the password to the database would not be
empty then use a hash sign after the username in the URL, as is the standard
format for URLs (e.g., <CODE>mysql://master#password@localhost/globecbc</CODE>).
</P>
<P>
The password <TT>dbsharedpassword</TT> does <EM>not</EM> represent database
password, but a password that each replica server must know to be allowed to
issue requests to the database through the origin server.
</P>
<P>
Now, replica servers can access your database via the URL
<CODE>http://origin.revolutionware.net/db-globecbc/</CODE>. The path
<TT>db-globecbc</TT> must be the same as specified in the
<TT>globule_mysql_reattach</TT> statements of your PHP scripts.
</P>
<P>
If your scripts use multiple databases, then you can repeat this with
different names. Make sure the same name is not used twice for different
databases!
</P>
<P>
Replica servers should define a similar connection, under the same path.
However, instead of specifying the URL with the actual MySQL database,
the URL of the HTTP interface of the origin server is specified as such:
</P>
<PRE>
  &lt;VirtualHost *&gt;
    ServerName replica.revolutionware.net
  ...
    &lt;Location /&gt;
      GlobuleReplicaFor http://origin.revolutionware.net/ sharedpassword
    &lt;/Location&gt;
    &lt;Location /db-globecbc&gt;
      GlobuleDatabase http://origin.revolutionware.net/db-globecbc dbsharedpassword
    &lt;/Location&gt;
  ...
</PRE>
<P>
There is just a single shared password amongst all replica-servers at the
current implementation. The <TT>/db-globecbc</TT> location path can be freely
chosen, but must match in the origin definition, replica definition and PHP
script.
</P>
<!--TOC section 4&nbsp;&nbsp;Supporting utilities-->

<H2><A NAME="htoc38">4</A>&nbsp;&nbsp;Supporting utilities</H2><!--SEC END -->

<!--TOC subsection 4.1&nbsp;&nbsp;GlobuleUtil-->

<H3><A NAME="htoc39">4.1</A>&nbsp;&nbsp;GlobuleUtil</H3><!--SEC END -->

<P>
The <CODE>globuleutil</CODE> section is used to convert a report-log, as found in
the <CODE>.htglobule</CODE> directory of origin web-sites into access-log files.
Multiple report-log and Apache access-log can be merged and sorted on the fly.
</P>
<P>
The GlobuleUtil program is discussed in more detail in
section&nbsp;<A HREF="#sec:conf:monitoring:globuleutil">3.4.3</A>.
</P>
<!--TOC subsection 4.2&nbsp;&nbsp;GlobuleCtl-->

<H3><A NAME="htoc40">4.2</A>&nbsp;&nbsp;GlobuleCtl</H3><!--SEC END -->

<P>
The <CODE>globulectl</CODE> script is installed along with the Globule module. It
serves the same purpose as the apachectl script used is a default Apache
installation but has a number of extensions:
</P>
<P>
<UL><LI>
In case of a installer based setup, it also starts/stops any supporting
software, such as the optional MySQL database.
<LI>It case when using the Globule Broker Service, which generates the Apache <CODE>httpd.conf</CODE> configuration file for you.
</UL>
</P>
<PRE>
<b>globulectl</b> <b>stop</b>
<b>globulectl</b> <b>start</b>
<b>globulectl</b> <b>restart</b>
<b>globulectl</b> <b>graceful</b>
<b>globulectl</b> <b>configtest</b>
<b>globulectl</b> <b>monitorhost</b> [ <i>logging-server</i> ]
<b>globulectl</b> [ -v ] [ --no-serial ] [ --no-restart ] <b>check</b>
<b>globulectl</b> <b>installcrontab</b>
<b>globulectl</b> <b>installconf</b>
<b>globulectl</b> <b>webalizer</b>
<b>globulectl</b> <b>webalizer</b> <i>directory</i> [ <i>servername</i> ] [ <i>path</i> ]
</PRE>
<!--TOC section 5&nbsp;&nbsp;Configuration Directive Reference-->

<H2><A NAME="htoc41">5</A>&nbsp;&nbsp;Configuration Directive Reference<A NAME="sec:reference"></A></H2><!--SEC END -->

<!--TOC subsection 5.1&nbsp;&nbsp;Generic Directives-->

<H3><A NAME="htoc42">5.1</A>&nbsp;&nbsp;Generic Directives</H3><!--SEC END -->

<!--TOC subsubsection 5.1.1&nbsp;&nbsp;GlobuleAdminURL-->

<H4><A NAME="htoc43">5.1.1</A>&nbsp;&nbsp;<A NAME="GlobuleAdminURL">GlobuleAdminURL</A></H4><!--SEC END -->

<PRE>
<b>GlobuleAdminURL</b> <i>url</i> [ <i>password</i> ]
</PRE>
<P>
Set the internal reference and configuration location. Globule requires a
path by which the internals of Globule can be reached. This is used by
Globule to contact itself and to provide monitoring information. Any location
which addresses an available space of your web-server is valid. The URL must
end with a slash and must by a fully qualified path, including protocol
<CODE>http://</CODE> and hostname.
</P>
<!--TOC subsubsection 5.1.2&nbsp;&nbsp;GlobuleAdmURL-->

<H4><A NAME="htoc44">5.1.2</A>&nbsp;&nbsp;<A NAME="GlobuleAdmURL">GlobuleAdmURL</A></H4><!--SEC END -->

<P>
GlobuleAdmURL is an alias for GlobuleAdminURL.
</P>
<!--TOC subsubsection 5.1.3&nbsp;&nbsp;GlobuleBrokerConfigurationSerial-->

<H4><A NAME="htoc45">5.1.3</A>&nbsp;&nbsp;<A NAME="GlobuleBrokerConfigurationSerial">GlobuleBrokerConfigurationSerial</A></H4><!--SEC END -->

<PRE>
<b>GlobuleBrokerConfigurationSerial</b> <i>text</i>
</PRE>
<P>
For use with the Globule Broker System (GBS) at
<TT>http://www.globeworld.net/</TT>. The
<B>GlobuleBrokerConfigurationSerial</B> directive is automatically generated
by the GBS system to indicate the last time this configuration file has been
generated. It should not be changed or removed from the configuration if
present. There is no use for specifying this directive by hand. Globule
itself only stores the date value specified, but does not interpret it. The
value is returned by the page as specified by GlobuleAdminURL with appended
path <TT>/gbs</TT>.
</P>
<!--TOC subsubsection 5.1.4&nbsp;&nbsp;GlobuleFancyServerName-->

<H4><A NAME="htoc46">5.1.4</A>&nbsp;&nbsp;<A NAME="GlobuleFancyServerName">GlobuleFancyServerName</A></H4><!--SEC END -->

<PRE>
<b>GlobuleFancyServerName</b> "<i>A fancy name for this machine</i>"
</PRE>
<P>
Gives the server some verbose human interpretable name. This is not used by
Globule itself, but in normal settings reported back through special headers
back to the browser and may be used by a Javascript program or special
plug-ins.
This is usefull to indicate by whom the request was actually served,
especially when using DNS redirection. Not only for diagnostical reasons, but
also some publicity can be used to indicate on the web-page ``this web-site was
 by ...''.
</P>
<P>
For this reason there are three possible type of values this directive
recommended to give this directive:
<UL><LI>
either it can be a fully specified URL pointing to some image which has
a logo or sorts of the site.
<LI>it can be a single word identifying the server
<LI>it can be an entire text line, however without HTML formatting.
</UL>
The latter is however not always nicely reported back to the user for all type
of display scripts.
</P>
<P>
If not specified, defaults to the ServerName in effect. This directive can be
specified at a global level and later overridden on a per globule imported or
exported section.
</P>
<!--TOC subsubsection 5.1.5&nbsp;&nbsp;GlobuleMonitor-->

<H4><A NAME="htoc47">5.1.5</A>&nbsp;&nbsp;<A NAME="GlobuleMonitor">GlobuleMonitor</A></H4><!--SEC END -->

<PRE>
<b>GlobuleMonitor</b> <i>item</i> <i>filter</i> <i>options</i>
</PRE>
<P>
Deprecated and ignored use GlobuleDebugProfile instead.
</P>
<!--TOC subsubsection 5.1.6&nbsp;&nbsp;GlobuleDebugProfile-->

<H4><A NAME="htoc48">5.1.6</A>&nbsp;&nbsp;<A NAME="GlobuleDebugProfile">GlobuleDebugProfile</A></H4><!--SEC END -->

<PRE>
<b>GlobuleDebugProfile</b> [ <b>defaults</b> | <b>normal</b> | <b>extended</b> | <b>verbose</b> ]
</PRE>
<P>
Specifies how verbose the error reporting should be by Globule. The
``defaults'' setting is now equivalent to the setting ``normal'', this default
setting does not output much information about its workings and logs only
serious error messages. You can change this by selecting one of the standard
profiles.
</P>
<P>
Note that even though the setting may be set to ``verbose'', the messages with
log-level ``informational'', etcetera may still be suppressed by a LogLevel
directive as used by Apache. For instance, if you set your ErrorLevel to
error, you will not see most messages which would have been outputted by the
extended profile. Also remember that with Apache, you should specify the
ErrorLevel <EM>before</EM> the ErrorLog directive.
</P>
<!--TOC subsubsection 5.1.7&nbsp;&nbsp;GlobuleMemSize-->

<H4><A NAME="htoc49">5.1.7</A>&nbsp;&nbsp;<A NAME="GlobuleMemSize">GlobuleMemSize</A></H4><!--SEC END -->

<PRE>
<b>GlobuleMemSize</b> <i>size</i>
</PRE>
<P>
Instructs Globule to use a shared memory segment of the instructed size
instead of the default. The size is in bytes, but may be followed with a
denomination as specified in&nbsp;<A HREF="#sec:units">5.7</A>, such as in:
</P>
<PRE>
GlobuleMemSize "8 mb"
</PRE>
<P>
Which specifies 8 megabyte, or 8388608 bytes, which is also the default.
</P>
<P>
Many Linux/Unix operating systems do not allow large quantities of shared
memory to be allocated. Instructions on how to check your current limits, and
increase them if necessary, are available in Section&nbsp;<A HREF="#sec:trouble:shmem">6.2.1</A>.
</P>
<!--TOC subsection 5.2&nbsp;&nbsp;Replication Directives-->

<H3><A NAME="htoc50">5.2</A>&nbsp;&nbsp;Replication Directives</H3><!--SEC END -->

<!--TOC subsubsection 5.2.1&nbsp;&nbsp;GlobuleReplicate-->

<H4><A NAME="htoc51">5.2.1</A>&nbsp;&nbsp;<A NAME="GlobuleReplicate">GlobuleReplicate</A></H4><!--SEC END -->

<PRE>
<b>&lt;Location</b> <i>/path</i><b>&gt;</b>
     <b>GlobuleReplicate</b> [ <b>on</b> | <b>off</b> ]
   [ <b>GlobuleReplicaIs</b>    <i>url</i> <i>secret</i> ]
   [ <b>GlobuleBackupIs</b>     <i>url</i> <i>secret</i> ]
   [ <b>GlobuleRedirectorIs</b> <i>url</i> <i>secret</i> ]
 <b>&lt;/Location&gt;</b>
</PRE>
<P>
The <TT>GlobuleReplicate</TT> directive is used in an origin server to define
which part of the site must be copied to replica, backup or redirector
servers. It must be contained within a standard Apache <TT>&lt;Location&gt;</TT>,
<TT>&lt;Directory&gt;</TT> or <TT>&lt;Files&gt;</TT> environment. It specifies that all the
contents which match that environment should (or should not) be replicated to
replica servers, overriding an earlier-defined parent location
specification. This way you can turn off replication for a sub-location, and
turn it on again for a sub-sub-location. Also replication can be turned off
for files matching a given pattern, using the Apache <TT>&lt;Files&gt;</TT> and
<TT>&lt;FilesMatch&gt;</TT> environment.
</P>
<PRE>
&lt;Location /&gt;
     GlobuleReplicate on
     GlobuleReplicaIs    ...
     GlobuleBackupIs     ...
     GlobuleRedirectorIs ...
     &lt;Location /cgi-bin/&gt;
         GlobuleReplicate off
     &lt;/Location&gt;
     &lt;Files *.pdf&gt;
         GlobuleReplicate off
     &lt;/Files&gt;  
 &lt;/Location&gt;
</PRE>
<P>
In a hierarchy of <TT>&lt;Location&gt;</TT> with <TT>GlobuleReplicate</TT> set on and off,
only the parent definition should contain <A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A>,
<A HREF="#GlobuleBackupIs">GlobuleBackupIs</A> and/or <A HREF="#GlobuleRedirectorIs">GlobuleRedirectorIs</A>
directives. They are defined for the whole section of locations. You cannot
overload them in sub-locations.
</P>
<P>
Note that a location definition using <TT>&lt;Location /export&gt;</TT> may mean
something different from <TT>&lt;Location /export/&gt;</TT>. The latter is a directory
specification, which is probably what you want.
</P>
<!--TOC subsubsection 5.2.2&nbsp;&nbsp;GlobuleReplicaIs-->

<H4><A NAME="htoc52">5.2.2</A>&nbsp;&nbsp;<A NAME="GlobuleReplicaIs">GlobuleReplicaIs</A></H4><!--SEC END -->

<PRE>
<b>GlobuleReplicaIs</b> http://replica.full.domain/  p4ssw0rd1
<b>GlobuleReplicaIs</b> http://replica.full.domain:8333/replicapath/ p4ssw0rd2
</PRE>
<P>
<TT>GlobuleReplicaIs</TT> is used at origin servers to specify which servers
should act as a replica for the site. For each specified replica server, it
also defines a password which is used for mutual authentication between the
origin and the replica. Note that it is in general not a good idea to use the
same password for several origin-replica pairs.
</P>
<P>
Replica servers listed on the origin server must add a corresponding
<A HREF="#GlobuleReplicaFor">GlobuleReplicaFor</A> directive. The origin's
<TT>GlobuleReplicaIs</TT> directive and the corresponding replica's
<TT>GlobuleReplicaFor</TT> directive must mention the same password, otherwise
mutual authentication will fail.
</P>
<P>
The URL mentioned in <TT>GlobuleReplicaIs</TT> is a concatenation of the replica
server's fully qualified hostname, port number (if different from 80) and its
import path as defined in the replica's <A HREF="#GlobuleReplicaFor">GlobuleReplicaFor</A>
definition. Fully qualified hostnames are mandatory. The path must end in a
slash, as a whole directory is normally exported.
</P>
<!--TOC subsubsection 5.2.3&nbsp;&nbsp;GlobuleBackupIs-->

<H4><A NAME="htoc53">5.2.3</A>&nbsp;&nbsp;<A NAME="GlobuleBackupIs">GlobuleBackupIs</A></H4><!--SEC END -->

<PRE>
<b>GlobuleBackupIs</b> http://replica.full.domain/  p4ssw0rd1
<b>GlobuleBackupIs</b> http://replica.full.domain:8333/replicapath/ p4ssw0rd2
</PRE>
<P>
<TT>GlobuleBackupIs</TT> is similar to the <A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A>
directive, except that is is used at an origin server to define backups of the
site (rather than to define its replicas). It also takes the same arguments.
</P>
<P>
Backup servers listed on the origin server must add a corresponding
<A HREF="#GlobuleBackupFor">GlobuleBackupFor</A> directive. The origin's <TT>GlobuleBackupIs</TT>
directive and the corresponding backup's <TT>GlobuleBackupFor</TT> directive must
mention the same password, otherwise mutual authentication will fail.
</P>
<P>
In addition, all replicas of the site must add a
<A HREF="#GlobuleBackupForIs">GlobuleBackupForIs</A> directive in their configuration. When they
need a fresh copy of a document, if the origin server is unreachable, then
they will retrieve it from one of the backups specified that way.
</P>
<!--TOC subsubsection 5.2.4&nbsp;&nbsp;GlobuleRedirectorIs-->

<H4><A NAME="htoc54">5.2.4</A>&nbsp;&nbsp;<A NAME="GlobuleRedirectorIs">GlobuleRedirectorIs</A></H4><!--SEC END -->

<PRE>
<b>GlobuleRedirectorIs</b> http://redir.full.domain/  p4ssw0rd1
<b>GlobuleRedirectorIs</b> http://redir.full.domain:8333/redirpath/ p4ssw0rd2
</PRE>
<P>
<TT>GlobuleRedirectorIs</TT> is used at an origin server to specify one or more
stand-alone redirectors for the site. Using one or more redirector(s) external
to the origin server is useful to keep the site running even though the origin
may be down.
</P>
<P>
If no redirector is specified for a given origin, then the origin server will
automatically act as its own redirector.
</P>
<P>
<TT>GlobuleRedirectorIs</TT> takes the same arguments as a
<A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A> directive.
</P>
<P>
Redirector servers listed at an origin server must add a corresponding
<A HREF="#GlobuleRedirectorFor">GlobuleRedirectorFor</A> directive. The origin's
<TT>GlobuleRedirectorIs</TT> directive and the corresponding backup's
<TT>GlobuleRedirectorFor</TT> directive must mention the same password, otherwise
mutual authentication will fail.
</P>
<!--TOC subsubsection 5.2.5&nbsp;&nbsp;GlobuleReplicaFor-->

<H4><A NAME="htoc55">5.2.5</A>&nbsp;&nbsp;<A NAME="GlobuleReplicaFor">GlobuleReplicaFor</A></H4><!--SEC END -->

<PRE>
<b>&lt;Location /path&gt;</b>
   <b>GlobuleReplicaFor</b>  <i>origin-url</i>  <i>secret</i>
 [ <b>GlobuleBackupForIs</b> <i>origin-url</i>  <i>backup-url</i> ]
 [ <b>GlobuleBackupForIs</b> <i>origin-url</i>  <i>2nd-backup-url</i> ]
<b> &lt;/Location&gt;</b>
</PRE>
<P>
The <TT>GlobuleReplicaFor</TT> directive is used to configure a replica
server. This directive must be used within a <TT>&lt;Location&gt;</TT> or
<TT>VirtualServer</TT> container which indicates what is the location of the
replica. <TT>GlobuleReplicaFor</TT> must match a corresponding
<A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A> directive configured at the origin server.
</P>
<P>
The <TT>GlobuleReplicaFor</TT> directive takes as parameters the URL of the
origin site, and a password. The URL must contain a fully qualified host name,
and refer to the whole path specified at the origin server (e.g., if the
origin server exports <TT>http://www.mysite.com/myorigin/</TT> then you cannot
import only <TT>http://www.mysite.com/myorigin/subdir/</TT> at the replica. The
specified password must be the same as in the origin server's configuration,
otherwise authentication will not work.
</P>
<P>
Note that, if the site has one or more backup(s), then they must be mentioned
in each replica server's configuration using the
<A HREF="#GlobuleBackupForIs">GlobuleBackupForIs</A> directive.
</P>
<!--TOC subsubsection 5.2.6&nbsp;&nbsp;GlobuleBackupFor-->

<H4><A NAME="htoc56">5.2.6</A>&nbsp;&nbsp;<A NAME="GlobuleBackupFor">GlobuleBackupFor</A></H4><!--SEC END -->

<PRE>
<b>&lt;Location /path&gt;</b>
   <b>GlobuleBackupFor</b>  <i>url</i>  <i>secret</i>
<b>&lt;/Location&gt;</b>
</PRE>
<P>
The <TT>GlobuleBackupFor</TT> directive is used to configure a backup
server. This directive must be used within a <TT>&lt;Location&gt;</TT> or
<TT>VirtualServer</TT> container which indicates what is the location of the
backup. <TT>GlobuleReplicaFor</TT> must match a corresponding
<A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A> directive configured at the origin server.
</P>
<P>
The URL must contain a fully qualified host name, and refer to the whole path
specified at the origin server (e.g., if the origin server exports
<TT>http://www.mysite.com/myorigin/</TT> then you cannot import only
<TT>http://www.mysite.com/myorigin/subdir/</TT> at the backup. The specified
password must be the same as in the origin server's configuration, otherwise
authentication will not work.
</P>
<!--TOC subsubsection 5.2.7&nbsp;&nbsp;GlobuleBackupForIs-->

<H4><A NAME="htoc57">5.2.7</A>&nbsp;&nbsp;<A NAME="GlobuleBackupForIs">GlobuleBackupForIs</A></H4><!--SEC END -->

<PRE>
<b>&lt;Location /path/&gt;</b>
   <b>GlobuleReplicaFor</b>  <i>origin-url</i>  <i>secret</i>
   <b>GlobuleBackupForIs</b> <i>origin-url</i>  <i>backup-url</i>
<b>&lt;/Location&gt;</b>
</PRE>
<P>
The <TT>GlobuleBackupForIs</TT> directive is used at the replica servers to
specify the list of backup servers they can access in case the origin is
down. The first argument defines the fully qualified URL of the origin
server. This should be the same as indicated in the
<A HREF="#GlobuleReplicaFor">GlobuleReplicaFor</A> directive. The second argument defines the
fully qualified URL of the backup.
</P>
<!--TOC subsubsection 5.2.8&nbsp;&nbsp;GlobuleRedirectorFor-->

<H4><A NAME="htoc58">5.2.8</A>&nbsp;&nbsp;<A NAME="GlobuleRedirectorFor">GlobuleRedirectorFor</A></H4><!--SEC END -->

<PRE>
&lt;Location /path/&gt;
   <b>GlobuleRedirectorFor</b>  <i>url</i>  <i>secret</i>
 &lt;/Location&gt;
</PRE>
<P>
The <TT>GlobuleRedirectorForIs</TT> directive is used at the origin servers to
specify one or more external redirector(s). Each <TT>GlobuleRedirectorForIs</TT>
directive must match a corresponding <A HREF="#GlobuleRedirectorIs">GlobuleRedirectorIs</A>
directive at the redirector server.
</P>
<P>
If no external redirector is defined for a given site, then the origin server
will perform the redirection itself.
</P>
<P>
External redirectors are useful because they allow clients to be redirected to
replicas even though the master server is down. To build a reasonably
fault-tolerant site, at least two external redirectors are necessary.
</P>
<P>
This directive takes two parameters. The <TT>url</TT> parameter defines for which
site the redirector will be defined. The URL must exactly match an exported
path as indicated by a <A HREF="#GlobuleReplicate">GlobuleReplicate</A> directive at the origin
server. The second parameter is a password used for mutual authentication
between the origin and the redirector servers. The same password must be
present in both configurations.
</P>
<!--TOC subsubsection 5.2.9&nbsp;&nbsp;GlobuleDefaultReplicationPolicy-->

<H4><A NAME="htoc59">5.2.9</A>&nbsp;&nbsp;<A NAME="GlobuleDefaultReplicationPolicy">GlobuleDefaultReplicationPolicy</A></H4><!--SEC END -->

<PRE>
<b>GlobuleDefaultReplicationPolicy</b> {<b>Ttl</b>|<b>Alex</b>|<b>Invalidate</b>|<b>PureProxy}</b>
</PRE>
<P>
The <TT>GlobuleDefaultReplicationPolicy</TT> directive defines the replication
policy that should be associated to new documents. After a while, Globule will
use the recorded access logs to this document to decide on which policy is
best for this document.
</P>
<P>
Globule contains five different policies:
</P>
<P>
<UL><LI>
<TT>Ttl</TT> replicates the document at the replica server for a
 finite time (currently fixed at 10 seconds). After this delay, the
 document is removed from the replica. When requested for this
 document later on, it will fetch it again from the master or one of
 its backups.
<LI><TT>Alex</TT> is similar to the Ttl policy, but computes the time
 at which a documents remains valid based on the last update of that
 document. The validity period of a document is defined as a fraction
 of its age (defined as the delay between the time it was last
 updated and the time it was fetched by the replica server). 
<LI><TT>Invalidate</TT> replicates the document at the replica servers
 for indefinite time. when a copy of the document is made at a
 replica server, the origin server remembers where copies of this
 document are located. As soon as the document is updated, the origin
 server will send invalidations to the replicas to ask them to
 destroy their stale copy.
<LI><TT>PureProxy</TT> does not replicate documents. Each time a
 replica will receive a request for the document, it will fetch it
 from the master and deliver it to the client without storing it in
 its repository. 
</UL>
</P>
<P>
The only sensible replication strategy to be used for disconnected origin
server operation is currently <TT>Invalidate</TT>.
</P>
<P>
The default is <TT>Invalidate</TT>.
</P>
<!--TOC subsubsection 5.2.10&nbsp;&nbsp;GlobuleMaxDiskSpace-->

<H4><A NAME="htoc60">5.2.10</A>&nbsp;&nbsp;<A NAME="GlobuleMaxDiskSpace">GlobuleMaxDiskSpace</A></H4><!--SEC END -->

<PRE>
GlobuleMaxDiskSpace 64mb
</PRE>
<P>
<TT>GlobuleMaxDiskSpace</TT> is used at replica servers to define how much disk
space may be used for storing the replicated site. If the size of the site is
greater than the configured allowed space, then rarely-accessed documents will
be removed from the replica. Note that Globule may exceed this limit
temporarily while servicing a request.
</P>
<P>
<TT>GlobuleMaxDiskSpace</TT> takes one parameter, which is the size allocated for
this replica in bytes. You may append a unit size such as ``kb'', ``mb'',
``gb'' or even ``gigabytes''. Note that the default is in bytes, so if you
specify just ``100'' it will probably pose some problems as 100 bytes it
probably too little for even a single document.
</P>
<P>
Default value is 50&nbsp;MB.
</P>
<!--TOC subsubsection 5.2.11&nbsp;&nbsp;GlobuleMaxMetaDocsInMemory-->

<H4><A NAME="htoc61">5.2.11</A>&nbsp;&nbsp;<A NAME="GlobuleMaxMetaDocsInMemory">GlobuleMaxMetaDocsInMemory</A></H4><!--SEC END -->

<PRE>
GlobuleMaxMetaDocsInMemory 1000
</PRE>
<P>
Globule never stores documents in main memory. However, for performance
reasons, it often stores information about documents (i.e., meta-documents) in
memory.
</P>
<P>
<TT>GlobuleMaxMetaDocsInMemory</TT> is used at the origin, replica and backup
servers to define how many meta-documents may reside in main memory. Note that
Globule may temporarily exceed this limit while servicing a request.
</P>
<P>
<TT>GlobuleMaxMetaDocsInMemory</TT> takes one parameter, which is (as you
guessed) the maximum number of meta-documents.
</P>
<P>
If you increase this limit, then you must probably also increase
<A HREF="#GlobuleMemSize">GlobuleMemSize</A>, otherwise your server may crash.
</P>
<P>
The default value is 500.
</P>
<!--TOC subsubsection 5.2.12&nbsp;&nbsp;GlobuleLockCount-->

<H4><A NAME="htoc62">5.2.12</A>&nbsp;&nbsp;<A NAME="GlobuleLockCount">GlobuleLockCount</A></H4><!--SEC END -->

<PRE>
GlobuleLockCount 4
</PRE>
<P>
Globule uses locks to synchronize access to shared memory. The
number of locks can be set at a global level or can be overridden in
an exported or imported section. A high number of locks will take
more resources on your machine, but it will allow better
multitasking at the Globule server.
</P>
<P>
Some Linux/Unix systems will restrict the number of locks that you can
allocate. Instructions on how to check your current limits, and increase them
if necessary, are available in Section&nbsp;<A HREF="#sec:trouble:locks">6.2.2</A>.
</P>
<P>
The default value is 4 locks per exported or imported web-site.
</P>
<!--TOC subsubsection 5.2.13&nbsp;&nbsp;GlobuleDirectory-->

<H4><A NAME="htoc63">5.2.13</A>&nbsp;&nbsp;<A NAME="GlobuleDirectory">GlobuleDirectory</A></H4><!--SEC END -->

<PRE>
 &lt;Location /&gt;
     GlobuleReplicate on
     GlobuleDirectory /var/www/htdocs/somedir/.htglobule
     GlobuleReplicaIs    ...
     GlobuleBackupIs     ...
     GlobuleRedirectorIs ...
 &lt;/Location&gt;
</PRE>
<P>
Globule needs to store information about documents on disk. Each origin,
replica or backup configured at a given Globule server will need its own
repository for meta-documents.
</P>
<P>
If no <TT>GlobuleDirectory</TT> directive is defined, then meta-documents are
stored <EM>within the directory which contains documents</EM>, in a
sub-directory called <TT>.htglobule</TT>. The <TT>GlobuleDirectory</TT> directive
allows to set this directory to a different path.
</P>
<P>
<TT>GlobuleDirectory</TT> take as parameter the absolute path of the directory
where meta-documents must be stored instead.
If the specified directory does not exist, Globule will create it
automatically. When Globule is started as root, it will transfer the ownership
of the directories in the <TT>GlobuleDirectory</TT> to the user that will run the
worker servers (i.e., the user specified via the standard Apache User
directive.)
The use of this directive is however discouraged and may be depricated in
future.
</P>
<!--TOC subsubsection 5.2.14&nbsp;&nbsp;GlobuleDatabase-->

<H4><A NAME="htoc64">5.2.14</A>&nbsp;&nbsp;<A NAME="GlobuleDatabase">GlobuleDatabase</A></H4><!--SEC END -->

<PRE>
<b>GlobuleDatabase</b> mysql://<i>user</i>#<i>password</i>@<i>hostname</i>/<i>database</i>  <i>secret</i>
<b>GlobuleDatabase</b> http://<i>host</i>/<i>path</i> <i>secret</i>
</PRE>
<P>
At the origin server the first syntax form is used to establish a connection
to the actual database. The latter forms are used at the replica sites to
tunnel queries to the origin server. In effect, both forms provide a method
for executing queries on the database using a HTTP interface, to be used by
Globule only (``mounting the database on a HTTP address'').
</P>
<P>
The GlobuleDatabase directive should be enclosed inside a <CODE>&lt;Location&gt;</CODE>
environment, where origin and replica servers should use the same path in the
Location, otherwise PHP scripts cannot transparently access the database.
Normally the <I>hostname</I> is set to <CODE>localhost</CODE> to use the local
database accessible through a Unix domain socket. The <CODE>#password</CODE> part
is optional, if left out an empty password is used.
</P>
<P>
The shared password <I>secret</I> should be match between origin and all
replica servers, to shield the usage of the database interface by
non-authorized users.<BR>
Only access to the defined database is given, not other databases on the
database server. If multiple databases are to be accessed, each one should
use a GlobuleDatabase definition.
</P>
<!--TOC subsection 5.3&nbsp;&nbsp;Redirection Directives-->

<H3><A NAME="htoc65">5.3</A>&nbsp;&nbsp;Redirection Directives</H3><!--SEC END -->

<P>
For an introduction to redirection in Globule, please read
section&nbsp;<A HREF="#sec:conf:dnsredir">3.3</A>.
</P>
<!--TOC subsubsection 5.3.1&nbsp;&nbsp;GlobuleRedirectionMode-->

<H4><A NAME="htoc66">5.3.1</A>&nbsp;&nbsp;<A NAME="GlobuleRedirectionMode">GlobuleRedirectionMode</A></H4><!--SEC END -->

<PRE>
<b>GlobuleRedirectionMode</b> {<b>OFF</b>|<b>HTTP</b>|<b>DNS</b>|<b>BOTH}</b>
</PRE>
<P>
The <TT>GlobuleRedirectionMode</TT> directive defines which redirection
mechanism should be used by a server.
<UL><LI>
OFF disables redirection; 
<LI>HTTP activates HTTP-based redirection (302 Moved); 
<LI>DNS activates internal DNS server (requires access to port 53,
 so you probably must have administrator privileges);
<LI>BOTH activates both HTTP and DNS redirection modes.
</UL>
</P>
<P>
<TT>GlobuleRedirectionMode</TT> must be defined <EM>before</EM> any exported or
imported sections in your configuration. If any of the exported sections want
to use DNS redirection, then you must enable DNS redirection at a global
level. The individual sections can then override to use HTTP redirection only.
</P>
<P>
To use DNS redirection, you must use our patched version of Apache, so that it
can handle UDP requests. Instructions on how to do that are available in
Section&nbsp;<A HREF="#sec:install">2</A>.
</P>
<P>
The default value is HTTP.
</P>
<!--TOC subsubsection 5.3.2&nbsp;&nbsp;GlobuleDefaultRedirectPolicy-->

<H4><A NAME="htoc67">5.3.2</A>&nbsp;&nbsp;<A NAME="GlobuleDefaultRedirectPolicy">GlobuleDefaultRedirectPolicy</A></H4><!--SEC END -->

<PRE>
<b>GlobuleDefaultRedirectPolicy</b> {<b>RR</b>|<b>WRR</b>|<b>AS</b>|<b>BAS</b>|<b>WRAND</b>|<b>static}</b>
</PRE>
<P>
 Globule can use several redirection policies, that is, several ways
 to decide to which replica clients should be redirected to. The
 <TT>GlobuleDefaultRedirectPolicy</TT> directive allows you to select
 one policy out of these:
</P>
<UL><LI>
<B>RR</B> enables round-robin redirection. This means that
 clients will be redirected to each replica server, one after the
 other, without trying to optimize the client-to-replica distance.
<LI>bf WRR enables weighted round-robin. Operates like RR, except
 that replica's are assigned weights, where replica's with a higher weight
 are selected more often to be the first on the list to be returned.
<LI><B>AS</B> enables AS-based redirection. It redirects each client
 to a replica so that the number of
 <A HREF="http://en.wikipedia.org/wiki/Autonomous_system_%28Internet%29">Autonomous
 Systems</A> traversed on the client-to-replica path is minimized. It
 needs to read network routing information from a file (see the
 <A HREF="#GlobuleBGPDataFile">GlobuleBGPDataFile</A> and
 <A HREF="#GlobuleBGPReloadAfter">GlobuleBGPReloadAfter</A> directives).
<LI><B>BAS</B> enables a balanced AS-based redirection. Operates like AS,
 except that replica's are assigned weights and if a replica is chosen 
 more often that others in respect to its assigned weight, it will be
 skipped until it load is more in line with the other replica's.
<LI><B>WRAND</B> enables weighted random redirection. Replica's are chosen
 randomly, where replica's with a higher weight are more likely to be chosen.
<LI><B>static</B> always returns the first host in the list (this is
 sometimes useful when doing stand-alone redirection, i.e., when
 replication is disabled).
</UL>
<P>
 The default value is <EM>static</EM>.
</P>
<!--TOC subsubsection 5.3.3&nbsp;&nbsp;GlobuleBGPDataFile-->

<H4><A NAME="htoc68">5.3.3</A>&nbsp;&nbsp;<A NAME="GlobuleBGPDataFile">GlobuleBGPDataFile</A></H4><!--SEC END -->

<PRE>
GlobuleBGPDataFile /etc/oix-full-snapshot-latest.dat
</PRE>
<P>
To use the AS-based redirection policies, you must first download a view of the
current routing information from the routeviews.org Web site. At
<A HREF="ftp://ftp.routeviews.org/oix-route-views/"><TT>ftp://ftp.routeviews.org/oix-route-views/</TT></A> there is a
directory for the current year and month, containing a file called
<TT>oix-full-snapshot-latest.dat.bz2</TT>. You need to download the most recent
file, and uncompress it using the
<A HREF="http://sources.redhat.com/bzip2/">bzip2</A> utility. You then make the
file available to Globule via this <TT>GlobuleBGPDataFile</TT> directive.
</P>
<P>
Based on this file, Globule creates a map of the Internet, and then uses it to
calculate the distance between clients and replicas. In general, only the most
recent BGP data file needs to be downloaded from the RouteViews site. If the
BGP data file is unavailable or corrupted, Globule will default to static
redirection.
</P>
<P>
Default is <TT>/dev/null</TT>.
</P>
<!--TOC subsubsection 5.3.4&nbsp;&nbsp;GlobuleBGPReloadAfter-->

<H4><A NAME="htoc69">5.3.4</A>&nbsp;&nbsp;<A NAME="GlobuleBGPReloadAfter">GlobuleBGPReloadAfter</A></H4><!--SEC END -->

<PRE>
GlobuleBGPReloadAfter 86400
</PRE>
<P>
When using a AS-based redirection policy, you will want to keep your routing
information up-to-date. The <TT>GlobuleBGPReloadAfter</TT> directive allows you
to specify how often (in seconds) Globule should re-read its BGP data file.
</P>
<P>
Note that Globule currently cannot reload this file automatically from the
RouteViews FTP site, so you will have to do it yourself. The
<A HREF="http://www.gnu.org/software/wget/wget.html">wget</A> and
<A HREF="http://www.unixgeeks.org/security/newbie/unix/cron-1.html">cron</A>
utilities can be useful here.
</P>
<P>
By appending a unit such as ``min'', ``seconds'', ``days'', ``week'', you can
use the more human friendly numberic value.<BR>
<BR>
See&nbsp;<A HREF="#sec:units">5.7</A> for accepted units.<BR>
<BR>
The default value is 86400 seconds (1 day).
</P>
<!--TOC subsection 5.4&nbsp;&nbsp;DNS Redirection-->

<H3><A NAME="htoc70">5.4</A>&nbsp;&nbsp;DNS Redirection</H3><!--SEC END -->

<P>
A DNS query to a replicated site is responded by a set of IP numbers of the
replica servers. Accompanying this data is also a Time-To-Live (TTL) field
indicating how long the result may be cached by the browser (or Proxy, or an
intermediate ISP DNS server) before it has to re-ask the same query again.
The system contains default TTL values for different redirection policies.
These defaults may be changed using one of the GlobuleTTL* directives.
</P>
<P>
<TABLE CELLSPACING=2 CELLPADDING=0>
<TR><TD ALIGN=left NOWRAP>redirection policy</TD>
<TD ALIGN=left NOWRAP>uses TTL as specified by:</TD>
</TR>
<TR><TD ALIGN=left NOWRAP><TT>Static</TT>, or no-policy</TD>
<TD ALIGN=left NOWRAP><TT>GlobuleTTL</TT></TD>
</TR>
<TR><TD ALIGN=left NOWRAP><TT>RR</TT>, <TT>WRR</TT></TD>
<TD ALIGN=left NOWRAP><TT>GlobuleTTL_RR</TT></TD>
</TR>
<TR><TD ALIGN=left NOWRAP><TT>WRAND</TT></TD>
<TD ALIGN=left NOWRAP><TT>GlobuleTTL_RR</TT></TD>
</TR>
<TR><TD ALIGN=left NOWRAP><TT>AS</TT>, <TT>BAS</TT></TD>
<TD ALIGN=left NOWRAP><TT>GlobuleTTL_AS</TT></TD>
</TR></TABLE>
</P>
<P>
Lower values will make your site more responsive to changes in the set of
available replicas, but they will increase the load at your redirectors.
</P>
<P>
<B>Attention:</B> TTL values below 600 seconds may strongly reduce your
redirection efficiency and is considered mal-practice on the Internet.
</P>
<!--TOC subsubsection 5.4.1&nbsp;&nbsp;GlobuleTTL-->

<H4><A NAME="htoc71">5.4.1</A>&nbsp;&nbsp;<A NAME="GlobuleTTL">GlobuleTTL</A></H4><!--SEC END -->

<PRE>
GlobuleTTL 86400
</PRE>
<P>
This sets the TTL value for all DNS responses regarding static sites (see
<A HREF="#GlobuleDefaultRedirectPolicy">GlobuleDefaultRedirectPolicy</A>).
</P>
<P>
The default value is 86400 seconds (i.e., 1 day).
</P>
<!--TOC subsubsection 5.4.2&nbsp;&nbsp;GlobuleTTL_RR-->

<H4><A NAME="htoc72">5.4.2</A>&nbsp;&nbsp;<A NAME="GlobuleTTL_RR">GlobuleTTL_RR</A></H4><!--SEC END -->

<PRE>
GlobuleTTL_RR 1800
</PRE>
<P>
This sets the TTL value for all DNS responses regarding round-robin sites (see
<A HREF="#GlobuleDefaultRedirectPolicy">GlobuleDefaultRedirectPolicy</A>).
</P>
<P>
The default value is 1800 seconds (i.e., 30 minutes).
</P>
<!--TOC subsubsection 5.4.3&nbsp;&nbsp;GlobuleTTL_AS-->

<H4><A NAME="htoc73">5.4.3</A>&nbsp;&nbsp;<A NAME="GlobuleTTL_AS">GlobuleTTL_AS</A></H4><!--SEC END -->

<PRE>
GlobuleTTL_AS 600
</PRE>
<P>
This sets the TTL value for all DNS responses regarding AS-based sites (see
<A HREF="#GlobuleDefaultRedirectPolicy">GlobuleDefaultRedirectPolicy</A>).
</P>
<P>
The default value is 600 seconds (i.e., 10 minutes).
</P>
<!--TOC subsubsection 5.4.4&nbsp;&nbsp;GlobuleMaxIPCount-->

<H4><A NAME="htoc74">5.4.4</A>&nbsp;&nbsp;<A NAME="GlobuleMaxIPCount">GlobuleMaxIPCount</A></H4><!--SEC END -->

<PRE>
GlobuleMaxIPCount 3
</PRE>
<P>
Upon DNS queries, Globule selects a number of IP addresses based on the
availability and redirection policy. Depending on availability and policy
used the number of returned addresses is between 0 and <I>count</I>. The
default is to try to return 3 IP addresses.
</P>
<P>
<TT>GlobuleMaxIPCount</TT> defines how many responses should be returned.
</P>
<P>
Note that HTTP redirectors can return only one response, so
<TT>GlobuleMaxIPCount</TT> has no effect on them.
</P>
<P>
The default value is 3.
</P>
<!--TOC subsubsection 5.4.5&nbsp;&nbsp;GlobuleDNSRedirectionAddress-->

<H4><A NAME="htoc75">5.4.5</A>&nbsp;&nbsp;<A NAME="GlobuleDNSRedirectionAddress">GlobuleDNSRedirectionAddress</A></H4><!--SEC END -->

<PRE>
<b>GlobuleDNSRedirectionAddress</b> :<i>port-number</i>
<b>GlobuleDNSRedirectionAddress</b> <i>ip-address</i>
<b>GlobuleDNSRedirectionAddress</b> <i>ip-address</i>:<i>port-number</i>
<b>GlobuleDNSRedirectionAddress</b> <i>ip-address</i> <i>port-number</i>
</PRE>
<P>
The <TT>GlobuleDNSRedirectionAddress</TT> directive allows to specify which port
the DNS redirector should listen to and/or which specific ip-address to bind
to. It serves the same purpose as the standard Apache <TT>Listen</TT>
directive, but now for DNS requests.
</P>
<P>
This directive is mostly useful for debug purposes as it allows you to test
DNS redirection as non-root user.
</P>
<P>
Note that, if you select any port number other than 53, then your redirector
will not be accessible to regular clients.
</P>
<P>
This directive <EM>must</EM> be specified <EM>before</EM> the first <B>RedirectionMode</B> directive.
</P>
<!--TOC subsection 5.5&nbsp;&nbsp;Periodic tasks-->

<H3><A NAME="htoc76">5.5</A>&nbsp;&nbsp;Periodic tasks</H3><!--SEC END -->

<P>
Globule needs to update its internal state on a periodic basis, among others
to check for updated documents, whether replica servers are available and if
there isn't a more optimal usage of resources.
</P>
<P>
Periodic tasks are triggered by a so-called heart-beat mechanism. The
following directives allow you to control how fast Globule's heart should
beat.
</P>
<!--TOC subsubsection 5.5.1&nbsp;&nbsp;GlobuleHeartBeatInterval-->

<H4><A NAME="htoc77">5.5.1</A>&nbsp;&nbsp;<A NAME="GlobuleHeartBeatInterval">GlobuleHeartBeatInterval</A></H4><!--SEC END -->

<PRE>
GlobuleHeartBeatInterval 10seconds
GlobuleHeartBeatInterval 1minute
</PRE>
<P>
This directive controls how often periodic tasks should take place. The most
important of these tasks consists of checking whether replica servers are
still alive. This should be done on a fairly frequent basis, otherwise it may
take a long time before an unavailable replica is noticed and clients are no
longer redirected to it.
</P>
<P>
The argument is in seconds or can be suffixed with an appropriate denominator
(seconds, minutes, hours, days, etc.)
</P>
<P>
The default value is 120 seconds.
</P>
<!--TOC subsubsection 5.5.2&nbsp;&nbsp;GlobulePolicyAdaptationInterval-->

<H4><A NAME="htoc78">5.5.2</A>&nbsp;&nbsp;<A NAME="GlobulePolicyAdaptationInterval">GlobulePolicyAdaptationInterval</A></H4><!--SEC END -->

<PRE>
GlobulePolicyAdaptationInterval 1200seconds
GlobulePolicyAdaptationInterval 20minutes
GlobulePolicyAdaptationInterval 3hours
</PRE>
<P>
Every few heart beat events, Globule will reevaluate its choices of
replication policies for each document. If the current policy for a document
is no longer the best one, its replication policy will be switched to the new
best one. Evaluating the policy is done on a per-document basis, but all
documents for an exported path are evaluated in one go. The
<TT>GlobulePolicyAdaptationInterval</TT> directive specifies the delay (in
seconds) between policy re-evaluations.
</P>
<P>
Please note that the <TT>GlobulePolicyAdaptationInterval</TT> must be a multiple
of <A HREF="#GlobuleHeartBeatInterval">GlobuleHeartBeatInterval</A>. If it is not, then it will be
rounded up to the next multiple.
</P>
<P>
Any declaration of the <A HREF="#GlobuleHeartBeatInterval">GlobuleHeartBeatInterval</A> must precede
the declaration of a <TT>GlobulePolicyAdaptationInterval</TT>.
</P>
<P>
Replication policies should not be re-evaluated too often, because otherwise
the choices will be based on very few information. This will lead to
sub-optimal performance. On the other hand, if it is set too high, then your
system will take a long time to react to a change in access patterns.
</P>
<P>
The argument is in seconds or can be suffixed with an appropriate
denominator. Specifying a <TT>GlobulePolicyAdaptationInterval</TT> value of 0
means that policies should never be adapted.
</P>
<P>
The default is 1200 seconds (20 minutes).
</P>
<!--TOC subsubsection 5.5.3&nbsp;&nbsp;GlobuleContentTraversalInterval-->

<H4><A NAME="htoc79">5.5.3</A>&nbsp;&nbsp;<A NAME="GlobuleContentTraversalInterval">GlobuleContentTraversalInterval</A></H4><!--SEC END -->

<PRE>
GlobuleContentTraversalInterval "1 minute"
GlobuleContentTraversalInterval "1h"
</PRE>
<P>
Globule will traverse the entire content of your replicated web-site in
order to make sure backup servers have a full copy of your site. Normally
this is done as frequent as checking the availability of the replica
servers, however you may want to slow down this process.
The <TT>GlobuleContentTraversalInterval</TT> directive specifies the delay (in
seconds) between traversing the document tree.
</P>
<P>
Please note that the <TT>GlobuleContentTraversalInterval</TT> must be a multiple
of <A HREF="#GlobuleHeartBeatInterval">GlobuleHeartBeatInterval</A>. If it is not, then it will be
rounded up to the next multiple.
</P>
<P>
Any declaration of the <A HREF="#GlobuleHeartBeatInterval">GlobuleHeartBeatInterval</A> must precede
the declaration of a <TT>GlobuleContentTraversalInterval</TT>.
</P>
<P>
This directive is provided in case the content, or rather the number of files,
in your web-site grows very large. In case the server it not able to scan
all documents within the period of the HeartBeatInterval then you might want
to set the GlobuleContentTraversalInterval to a fair multiple of the time
required to scan the filesystem. This will not degrade the scanning whether
your files are up, just that the backup-server isn't being informed so often
of new files that have come into existance.
</P>
<P>
The argument is in seconds or can be suffixed with an appropriate
denominator. Specifying a <TT>GlobuleContentTraversalInterval</TT> value of 0
means that the filesystem will never be scanned. This can be used if no
backup server is present to improve performance.
</P>
<P>
The default is equal to the HeartBeatInterval, whatever it's current value
is at configuration time / startup.
</P>
<!--TOC subsection 5.6&nbsp;&nbsp;Obscure and rare settings -->

<H3><A NAME="htoc80">5.6</A>&nbsp;&nbsp;Obscure and rare settings </H3><!--SEC END -->

<!--TOC subsubsection 5.6.1&nbsp;&nbsp;GlobuleAnythingFor-->

<H4><A NAME="htoc81">5.6.1</A>&nbsp;&nbsp;<A NAME="GlobuleAnythingFor">GlobuleAnythingFor</A></H4><!--SEC END -->

<PRE>
<b>GlobuleAnythingFor</b> <i>url</i> <i>secret</i>
</PRE>
<P>
With this directive you can declare that your server can be a replica for any
other server, without going into a co-operative agreementship. The shared
password named <I>secret</I> is in fact not used in this case, nor is the
specified <I>url</I>. These are currently place-holders for the further use
of this directive to use a common third-party broker.
</P>
<P>
Currently this directive should just be used as such:
</P>
<PRE>
  ServerName world.cs.vu.nl
  &lt;Location "/"&gt;
    GlobuleAnythingFor "http://localhost" "geheim"
  &lt;/Location&gt;
</PRE>
<P>
While an origin server should specify to use the replica-for-everyone server
as:
</P>
<PRE>
  ServerName wereld.cs.vu.nl
  &lt;Location "/"&gt;
    GlobuleReplicate on
    GlobuleReplicaIs "http://world.cs.vu.nl/http://wereld.cs.vu.nl/" "geheim"
  &lt;/Location&gt;
</PRE>
<P>
Note that:
<UL><LI>
The <CODE>http://localhost</CODE> should indeed wrongly not end with a slash;
<LI>The origin site uses its own URL in the path where the replica server
 should import the document on. This way the replica server knows where to
 fetch the documents from
</UL>
</P>
<P>
This directive is due to change to use a broker site without notification and
it's use is highly experimental at this stage.
</P>
<!--TOC subsubsection 5.6.2&nbsp;&nbsp;GlobuleMirrorIs-->

<H4><A NAME="htoc82">5.6.2</A>&nbsp;&nbsp;<A NAME="GlobuleMirrorIs">GlobuleMirrorIs</A></H4><!--SEC END -->

<PRE>
<b>GlobuleMirrorIs</b> <i>url</i> <i>weight</i>
</PRE>
<P>
With this directive you can specify that a non-Globule enabled server is to be
used as a replica server, which should use plain old-fashion mirroring to
fetch the content from the origin server and configuration must be done
manually. The <I>url</I> is the address of the mirror-site, while the
<I>weight</I> has the same function as in a regular
<A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A> definition, but is a required argument in the
GlobuleMirrorIs directive.
</P>
<P>
Note that most of the advantages of Globule, such as consistency, merged
access logs and accounting are lost. Therefor the use of this directive is
highly discouraged. Globule will maintain the ability to use DNS redirection
and makes a minimal check on the availability of the mirror-based server such
to not redirect to a server which is obviously unavailable. It can not
however do a full check on the availability.
</P>
<P>
We encourage the use of normal Globule enabled replicas and do not actively
support the use of mirrors like can be specified with this directive.
</P>
<!--TOC subsubsection 5.6.3&nbsp;&nbsp;GlobuleDisabledReplicaIs-->

<H4><A NAME="htoc83">5.6.3</A>&nbsp;&nbsp;<A NAME="GlobuleDisabledReplicaIs">GlobuleDisabledReplicaIs</A></H4><!--SEC END -->

<PRE>
<b>GlobuleDisabledReplicaIs</b> <i>url</i> <i>secret</i>
</PRE>
<P>
This directive does almost the same as the <A HREF="#GlobuleReplicaIs">GlobuleReplicaIs</A>
directive, but the replica server being declared will never actively be used
to redirect to. I.e. it is permanently held in the state of unavailable.
This can be used to test replica servers, as they can authorize themselves to
the origin server.
</P>
<P>
Using the GlobuleDisabledReplicaIs directive is similar, but not the same, as
defining a replica server with weight 0. We encourage using the weight as a
better way to take replica's out of the loop of available replica servers to
redirect to.
</P>
<!--TOC subsubsection 5.6.4&nbsp;&nbsp;GlobuleProxyFor-->

<H4><A NAME="htoc84">5.6.4</A>&nbsp;&nbsp;<A NAME="GlobuleProxyFor">GlobuleProxyFor</A></H4><!--SEC END -->

<PRE>
<b>GlobuleProxyFor</b> <i>url</i>
</PRE>
<P>
This directive can be used in conjunction with an origin site specification to
indicate that the server is an origin server, but the original documents do in
fact not really reside on this server. When the server is requested to serve
a document for which it (as an origin server!) has no longer a valid copy, it
will try to download the document from a third-party. This third-party
upstream server is not under a Globule controlled web-server. This approach
is somewhat similar to proxying, but then only for a single web-site.
</P>
<P>
The GlobuleProxyFor directive is used in the following way to make a copy of
the web-site at <CODE>http://www.revolutionware.net/</CODE> on the Globule-enabled
server wereld.cs.vu.nl:
</P>
<PRE>
&lt;VirtualHost *&gt;
  ServerName wereld.cs.vu.nl
  &lt;Location "/"&gt;
    GlobuleReplicate on
    <b>GlobuleProxyFor http://www.revolutionware.net/</b>
    GlobuleReplicaIs http://world.cs.vu.nl/
  &lt;/Location&gt;
&lt;/VirtualHost&gt;
</PRE>
<P>
Many advantages of Globule are lost in this way, therefor it is discouraged to
use this directive except for demonstration usage. Problems will arise with
the translation of links and the replication of dynamic content is not really
possible.
</P>
<!--TOC subsubsection 5.6.5&nbsp;&nbsp;GlobuleOriginWeight-->

<H4><A NAME="htoc85">5.6.5</A>&nbsp;&nbsp;<A NAME="GlobuleOriginWeight">GlobuleOriginWeight</A></H4><!--SEC END -->

<PRE>
<b>GlobuleOriginWeight</b> <i>weight</i>
</PRE>
<P>
When redirecting browsing users to one of the available replica servers, some
redirection policies have be ability to redirect more often to certain replica
servers than others. Each server is assigned a certain weight, servers with a
heavier weight are loaded with more requests than others.
</P>
<P>
The GlobuleOriginWeight directive assigns a weight to the origin server.
Optional parameters to GlobuleReplicaIs assign the weight of each of the
replica servers. By default the weight of each server is set to 1.
</P>
<P>
The value <I>weight</I> must be an integer ranging from 0 to 32767. The
default weight when not specified is 1. The weight parameters determin the
spread of the load over the available web-servers. If the weight of this
server is set at <I>n</I> and the sum of all the weights of all available servers
is <I>s</I> then the optimal load for this server is taken to be <I>n</I>/<I>s</I> of
the number of requests. The actual load may vary.
</P>
<P>
<PRE>
  ServerName origin.revolutionware.net
  &lt;Location "/"&gt;
    GlobuleReplicate on
    GlobuleOriginWeight 1
    GlobuleReplicaIs http://replica.revolutionware.net/  secret  9
  &lt;/Location&gt;
</PRE></P>
In the above example it is declared that of each 10 requests, the origin
should handle just 1, while the replica server should handle the remaining
9.<BR>
<BR>
<!--TOC subsubsection 5.6.6&nbsp;&nbsp;GlobuleStaticResolv-->

<H4><A NAME="htoc86">5.6.6</A>&nbsp;&nbsp;<A NAME="GlobuleStaticResolv">GlobuleStaticResolv</A></H4><!--SEC END -->

<PRE>
<b>GlobuleStaticResolv</b> <i>dns-name</i> <b>A</b>     <i>ip-address</i>
<b>GlobuleStaticResolv</b> <i>dns-name</i> <b>CNAME</b> <i>dns-name</i>
</PRE>
<P>
Globule automatically responds to DNS queries for sections for which it is an
origin server or redirector and where DNS redirection is enabled. Any query
to the name specified in the ServerAlias<SUP><A NAME="text8" HREF="#note8">8</A></SUP> such an exported section is responded by
with an A record of one or more available replica server. It is possible to
add more entries to Globule, such that it can also respond to certain other
queries with a fixed result. The GlobuleStaticResolv directive adds these
entries.
</P>
<P>
There are two possible entries which can be added, either A or CNAME DNS
record types. An A record points to the indicated IPv4 address. A CNAME
indicates an alias pointing to another Fully Qualified HostName (FQHN).
Unlike syntaxes like Bind, the FQHN specified here should not have an dot
appended to it and is never relative to another domain.<BR>
All dns-name's should be fully qualified hostnames, i.e. the hostname with the
domain name.
</P>
<P>
One possible use of this is to use Globule also to resolve the origin and
replica specific site-names. Normally one would have the <EM>specific</EM>
site-name in the ServerName, and the <EM>generic</EM> site-name which is
resolved by Globule as first in the ServerAlias. These <EM>specific</EM> site
names should be static addresses of the origin and replica sites. As such
they cannot be resolved by Globule itself and should be resolved by an
external nameserver. This is why Globule is made only the nameserver (NS
record) of the generic site, often www.<I>yourdomain</I>.<I>com</I>.
GlobuleStaticResolv does allow you to make Globule the authorative nameserver
of the entire domain by adding records like
origin.<I>yourdomain</I>.<I>com</I>. However you must remember that all
stand-alone redirectors must have the same data inserted into their
configuration.
</P>
<P>
Example:
</P>
<PRE>
GlobuleStaticResolv origin.mydomain.com  A      1.2.3.4
GlobuleStaticResolv replica.mydomain.com CNAME myfriend.his-isp.com
</PRE>
This directive is only available in case DNS redirection is compiled in (and
into the Apache server).<BR>
<BR>
<!--TOC subsection 5.7&nbsp;&nbsp;Recognized units-->

<H3><A NAME="htoc87">5.7</A>&nbsp;&nbsp;<A NAME="sec:units"></A>Recognized units</H3><!--SEC END -->

<P>
For values indicating sizes in bytes you can append the following units:
<DL COMPACT=compact><DT>
<B>kb, kbyte, kbytes, kilobyte, kilobytes</B><DD>
 to indicate a value in multiple of 1024 bytes, also known as a binary
 kilobyte;
<DT><B>mb, mbyte, mbytes, megabyte, megabytes</B><DD>
 1048576 bytes or 1024 kilobytes, also known as a binary megabyte;
<DT><B>gb, gbyte, gbytes, gigabyte, gigabytes</B><DD>
 1073741824 bytes or 1024 megabytes, also known as a binary gigabyte;
<DT><B>tb, tbyte, tbytes, terabyte, terabytes</B><DD>
 1099511627776 bytes or 1024 gigabytes, also known as a binary terrabyte.
</DL>
</P>
<P>
For values which represent a time period, you can use the following units:
<DL COMPACT=compact><DT>
<B>usec, usecs, microsecond, microseconds</B><DD>
 1/1000000 of a second;
<DT><B>msec, msecs, millisecond, milliseconds</B><DD>
 1/1000 of a second;
<DT><B>s, sec, secs, second, seconds</B><DD>
 the default, seconds;
<DT><B>m, min, mins, minut, minutes</B><DD>
 for multiple of minutes, i.e. 60 seconds;
<DT><B>h, hour, hours</B><DD>
 for multiple of hours, i.e. 3600 seconds;
<DT><B>d day, days</B><DD>
 for multiple of 86400 seconds;
<DT><B>w, week, weeks</B><DD>
 for multiple of 604800 seconds, a.k.a. weeks.
</DL>
</P>
<P>
Additionally the string ``never'' (indicating a value of 0) is accepted by
some Directives to turn off a certain feature.
</P>
<P>
Most directives are specified as a number of seconds, therefore any value
smaller that that (for instance 1millisecond) is rounded upwards to 1 second.
</P>
<!--TOC section 6&nbsp;&nbsp;
 Troubleshooting-->

<H2><A NAME="htoc88">6</A>&nbsp;&nbsp;<A NAME="sec:trouble"></A>
 Troubleshooting</H2><!--SEC END -->

<P>
This section handles a number of trouble shooting issues, which can cause
problems with a correct functioning of Globule and instructions on how to
overcome obstables in some cases.
</P>
<!--TOC subsection 6.1&nbsp;&nbsp;Compatibility with other Apache modules and settings-->

<H3><A NAME="htoc89">6.1</A>&nbsp;&nbsp;Compatibility with other Apache modules and settings</H3><!--SEC END -->

<P>
In general, Globule is well-behaved and follows the Apache interface. However,
some modules or configurations can clash. Most incompatibilities with other
modules and settings emerge because the same environment as the origin server
cannot be emulated on the replica host. This section surveys a number of them.
</P>
<!--TOC subsubsection 6.1.1&nbsp;&nbsp;Modules that won't work-->

<H4><A NAME="htoc90">6.1.1</A>&nbsp;&nbsp;Modules that won't work</H4><!--SEC END -->

<P>
The usage of the following modules will not work when the modules are active
on the web-site being replicates. This means that the modules can be used
within the same server that runs Globule, just not on a web-site that is
Globule replicated:
</P>
<P>
<DL COMPACT=compact><DT>
<B>mod_var</B><DD>&nbsp;<BR>
Also known as type maps. Since this module can be compiled in, you might want
to make sure the module simply isn't active. Type maps are made active with
the line:
<PRE>
AddHandler type-map var
</PRE>Type maps cannot be supported by Globule, because replica servers cannot
determine beforehand which alternatives are available in the type map.
<DT><B>mod_rewrite</B><DD>&nbsp;<BR>
URLs rewriting is unsafe, and the rewriting cannot interact well with
redirection at this moment.
</DL>
</P>
<!--TOC subsubsection 6.1.2&nbsp;&nbsp;Constructions that won't work-->

<H4><A NAME="htoc91">6.1.2</A>&nbsp;&nbsp;Constructions that won't work</H4><!--SEC END -->

<P>
The following Directives and constructions will not operate well with Globule.
</P>
<P>
<DL COMPACT=compact><DT>
<B>Usage of ``DirectorySlash Off''</B><DD>&nbsp;<BR>
By default, the Apache configuration has set the DirectorySlash option to
true, turning it off will break DNS redirection to URLs inadvertently not
ending with a slash, but which actually is a directory index.
</DL>
</P>
<!--TOC subsection 6.2&nbsp;&nbsp;System resource usage-->

<H3><A NAME="htoc92">6.2</A>&nbsp;&nbsp;System resource usage</H3><!--SEC END -->

<P>
In Linux, if Apache/Globule crashes, it sometimes does not deallocate the
semaphores used for process synchronization. Restarting the server may then
fail because it cannot allocate sufficient semaphores. You can cleanup all
semaphores using:
</P>
<PRE>
ipcrm `ipcs -s | awk '(int($2)&gt;0){print"-s",$2}'`
</PRE>
<P>
Use with care, especially when running as root as this will release all
semaphores, also ones still in use by other programs (X windows amongst
others).
</P>
<!--TOC subsubsection 6.2.1&nbsp;&nbsp;
 Allow high quantities of shared memory in your operating system-->

<H4><A NAME="htoc93">6.2.1</A>&nbsp;&nbsp;<A NAME="sec:trouble:shmem"></A>
 Allow high quantities of shared memory in your operating system</H4><!--SEC END -->

<P>
Your operating system must be configured to support the amount of shared
memory specified in directive <A HREF="#GlobuleMemSize">GlobuleMemSize</A>. You can check
and set this as follows:
</P>
<P>
<B>Linux:</B><BR>
</P>
<P>
<OL type=1><LI>
Multiply the values returned by the following two commands:
<PRE>
cat /proc/sys/kernel/shmmax
cat /proc/sys/kernel/shmmni
</PRE>
<P>
 Alternatively, if you have Perl installed, you can run: 
</P>
<PRE><FONT SIZE=2>echo print `cat /proc/sys/kernel/shmmax` \* `cat /proc/sys/kernel/shmmni` | perl  
</FONT></PRE>
<BR>
<BR>
<LI>The result (in bytes) should be larger than the amount you want
Globule to allocate. If not, you can adjust them as follows:
<PRE>
echo 33554432 &gt; /proc/sys/kernel/shmmax
echo 4096 &gt; /proc/sys/kernel/shmmni
</PRE>
when logged in as root.
</OL>
</P>
<P>
<B>Solaris:</B>
</P>
<P>
<OL type=1><LI>
Run:
<PRE>
sysdef -i
</PRE><LI>Multiply the values listed for ``max shared memory segment size
(SHMMAX)'' and ``shared memory identifiers (SHMMNI)''.
<LI>The result (in bytes) should be larger than the amount you want
Globule to allocate.
<LI>If not, you can adjust them by editing <TT>/etc/system</TT> as root:
<PRE>
set shmsys:shminfo_shmmax=33554432
set shmsys:shminfo_shmmni=4096
set shmsys:shminfo_shmseg=200
</PRE></OL>
</P>
<!--TOC subsubsection 6.2.2&nbsp;&nbsp;
 Allow large numbers of locks in your operating system-->

<H4><A NAME="htoc94">6.2.2</A>&nbsp;&nbsp;<A NAME="sec:trouble:locks"></A>
 Allow large numbers of locks in your operating system</H4><!--SEC END -->

<P>
Your operating system must be configured to support the number of locks
specified in directive <A HREF="#GlobuleLockCount">GlobuleLockCount</A>. You can check and set
this as follows:
</P>
<P>
<B>Linux:</B>
</P>
<P>
<OL type=1><LI>
Run this command: 
<PRE>
ipcs -l
</PRE><BR>
<BR>
<LI>Under the heading ``Semaphore Limits'' there is the value ``max number
of arrays'', which corresponds to the maximum number of (global) mutexes
Globule can allocate.
</OL>
</P>
<P>
<B>Solaris:</B>
</P>
<P>
<OL type=1><LI>
Run this command:
 <PRE>
sysdef -i
</PRE><LI>Under the heading ``IPC Semaphores'' there is the value ``semaphore
 identifiers (SEMMNI)'', which corresponds to the maximum number of
 (global) mutexes Globule can allocate.
</OL>
</P>
<!--TOC section A&nbsp;&nbsp;
 Copyright notices-->

<H2><A NAME="htoc95">A</A>&nbsp;&nbsp;<A NAME="sec:copyrights"></A>
 Copyright notices</H2><!--SEC END -->

<P>
Some packages Globule distributions contain third-party software. They are
redistributed under their own copyright.
</P>
<P>
Globule itself is subject to the following copyright rules:
</P>
<PRE>
Copyright (c) 2003-2006, Vrije Universiteit
All rights reserved.

Redistribution and use of the GLOBULE system in source and binary forms,
with or without modification, are permitted provided that the following
conditions are met:

   * Redistributions of source code must retain the above copyright
     notice, this list of conditions and the following disclaimer.

   * Redistributions in binary form must reproduce the above
     copyright notice, this list of conditions and the following
     disclaimer in the documentation and/or other materials provided
     with the distribution.

   * Neither the name of Vrije Universiteit nor the names of the software
     authors or contributors may be used to endorse or promote
     products derived from this software without specific prior
     written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS, AUTHORS, AND
CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
IN NO EVENT SHALL VRIJE UNIVERSITEIT OR ANY AUTHORS OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This product includes software developed by the Apache Software Foundation
&lt;http://www.apache.org/&gt;.
</PRE>
<!--TOC subsection A.1&nbsp;&nbsp;Apache httpd server-->

<H3><A NAME="htoc96">A.1</A>&nbsp;&nbsp;Apache httpd server</H3><!--SEC END -->

<P>
The packaged Apache HTTP server version 2.0.55 or similar version is governed
with the following copyright notice.
</P><FONT SIZE=1>
2</FONT><PRE><FONT SIZE=1>
                                 Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.



APACHE HTTP SERVER SUBCOMPONENTS: 

The Apache HTTP Server includes a number of subcomponents with
separate copyright notices and license terms. Your use of the source
code for the these subcomponents is subject to the terms and
conditions of the following licenses. 

For the mod_mime_magic component:

/*
 * mod_mime_magic: MIME type lookup via file magic numbers
 * Copyright (c) 1996-1997 Cisco Systems, Inc.
 *
 * This software was submitted by Cisco Systems to the Apache Group in July
 * 1997.  Future revisions and derivatives of this source code must
 * acknowledge Cisco Systems as the original contributor of this module.
 * All other licensing and usage conditions are those of the Apache Group.
 *
 * Some of this code is derived from the free version of the file command
 * originally posted to comp.sources.unix.  Copyright info for that program
 * is included below as required.
 * ---------------------------------------------------------------------------
 * - Copyright (c) Ian F. Darwin, 1987. Written by Ian F. Darwin.
 *
 * This software is not subject to any license of the American Telephone and
 * Telegraph Company or of the Regents of the University of California.
 *
 * Permission is granted to anyone to use this software for any purpose on any
 * computer system, and to alter it and redistribute it freely, subject to
 * the following restrictions:
 *
 * 1. The author is not responsible for the consequences of use of this
 * software, no matter how awful, even if they arise from flaws in it.
 *
 * 2. The origin of this software must not be misrepresented, either by
 * explicit claim or by omission.  Since few users ever read sources, credits
 * must appear in the documentation.
 *
 * 3. Altered versions must be plainly marked as such, and must not be
 * misrepresented as being the original software.  Since few users ever read
 * sources, credits must appear in the documentation.
 *
 * 4. This notice may not be removed or altered.
 * -------------------------------------------------------------------------
 *
 */


For the  modules\mappers\mod_imap.c component:

  "macmartinized" polygon code copyright 1992 by Eric Haines, erich@eye.com

For the  server\util_md5.c component:

/************************************************************************
 * NCSA HTTPd Server
 * Software Development Group
 * National Center for Supercomputing Applications
 * University of Illinois at Urbana-Champaign
 * 605 E. Springfield, Champaign, IL 61820
 * httpd@ncsa.uiuc.edu
 *
 * Copyright  (C)  1995, Board of Trustees of the University of Illinois
 *
 ************************************************************************
 *
 * md5.c: NCSA HTTPd code which uses the md5c.c RSA Code
 *
 *  Original Code Copyright (C) 1994, Jeff Hostetler, Spyglass, Inc.
 *  Portions of Content-MD5 code Copyright (C) 1993, 1994 by Carnegie Mellon
 *     University (see Copyright below).
 *  Portions of Content-MD5 code Copyright (C) 1991 Bell Communications 
 *     Research, Inc. (Bellcore) (see Copyright below).
 *  Portions extracted from mpack, John G. Myers - jgm+@cmu.edu
 *  Content-MD5 Code contributed by Martin Hamilton (martin@net.lut.ac.uk)
 *
 */


/* these portions extracted from mpack, John G. Myers - jgm+@cmu.edu */
/* (C) Copyright 1993,1994 by Carnegie Mellon University
 * All Rights Reserved.
 *
 * Permission to use, copy, modify, distribute, and sell this software
 * and its documentation for any purpose is hereby granted without
 * fee, provided that the above copyright notice appear in all copies
 * and that both that copyright notice and this permission notice
 * appear in supporting documentation, and that the name of Carnegie
 * Mellon University not be used in advertising or publicity
 * pertaining to distribution of the software without specific,
 * written prior permission.  Carnegie Mellon University makes no
 * representations about the suitability of this software for any
 * purpose.  It is provided "as is" without express or implied
 * warranty.
 *
 * CARNEGIE MELLON UNIVERSITY DISCLAIMS ALL WARRANTIES WITH REGARD TO
 * THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS, IN NO EVENT SHALL CARNEGIE MELLON UNIVERSITY BE LIABLE
 * FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN
 * AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING
 * OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
 * SOFTWARE.
 */

/*
 * Copyright (c) 1991 Bell Communications Research, Inc. (Bellcore)
 *
 * Permission to use, copy, modify, and distribute this material
 * for any purpose and without fee is hereby granted, provided
 * that the above copyright notice and this permission notice
 * appear in all copies, and that the name of Bellcore not be
 * used in advertising or publicity pertaining to this
 * material without the specific, prior written permission
 * of an authorized representative of Bellcore.  BELLCORE
 * MAKES NO REPRESENTATIONS ABOUT THE ACCURACY OR SUITABILITY
 * OF THIS MATERIAL FOR ANY PURPOSE.  IT IS PROVIDED "AS IS",
 * WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES.  
 */

For the  srclib\apr\include\apr_md5.h component: 
/*
 * This is work is derived from material Copyright RSA Data Security, Inc.
 *
 * The RSA copyright statement and Licence for that original material is
 * included below. This is followed by the Apache copyright statement and
 * licence for the modifications made to that material.
 */

/* Copyright (C) 1991-2, RSA Data Security, Inc. Created 1991. All
   rights reserved.

   License to copy and use this software is granted provided that it
   is identified as the "RSA Data Security, Inc. MD5 Message-Digest
   Algorithm" in all material mentioning or referencing this software
   or this function.

   License is also granted to make and use derivative works provided
   that such works are identified as "derived from the RSA Data
   Security, Inc. MD5 Message-Digest Algorithm" in all material
   mentioning or referencing the derived work.

   RSA Data Security, Inc. makes no representations concerning either
   the merchantability of this software or the suitability of this
   software for any particular purpose. It is provided "as is"
   without express or implied warranty of any kind.

   These notices must be retained in any copies of any part of this
   documentation and/or software.
 */

For the  srclib\apr\passwd\apr_md5.c component:

/*
 * This is work is derived from material Copyright RSA Data Security, Inc.
 *
 * The RSA copyright statement and Licence for that original material is
 * included below. This is followed by the Apache copyright statement and
 * licence for the modifications made to that material.
 */

/* MD5C.C - RSA Data Security, Inc., MD5 message-digest algorithm
 */

/* Copyright (C) 1991-2, RSA Data Security, Inc. Created 1991. All
   rights reserved.

   License to copy and use this software is granted provided that it
   is identified as the "RSA Data Security, Inc. MD5 Message-Digest
   Algorithm" in all material mentioning or referencing this software
   or this function.

   License is also granted to make and use derivative works provided
   that such works are identified as "derived from the RSA Data
   Security, Inc. MD5 Message-Digest Algorithm" in all material
   mentioning or referencing the derived work.

   RSA Data Security, Inc. makes no representations concerning either
   the merchantability of this software or the suitability of this
   software for any particular purpose. It is provided "as is"
   without express or implied warranty of any kind.

   These notices must be retained in any copies of any part of this
   documentation and/or software.
 */
/*
 * The apr_md5_encode() routine uses much code obtained from the FreeBSD 3.0
 * MD5 crypt() function, which is licenced as follows:
 * ----------------------------------------------------------------------------
 * "THE BEER-WARE LICENSE" (Revision 42):
 * &lt;phk@login.dknet.dk&gt; wrote this file.  As long as you retain this notice you
 * can do whatever you want with this stuff. If we meet some day, and you think
 * this stuff is worth it, you can buy me a beer in return.  Poul-Henning Kamp
 * ----------------------------------------------------------------------------
 */

For the srclib\apr-util\crypto\apr_md4.c component:

 * This is derived from material copyright RSA Data Security, Inc.
 * Their notice is reproduced below in its entirety.
 *
 * Copyright (C) 1991-2, RSA Data Security, Inc. Created 1991. All
 * rights reserved.
 *
 * License to copy and use this software is granted provided that it
 * is identified as the "RSA Data Security, Inc. MD4 Message-Digest
 * Algorithm" in all material mentioning or referencing this software
 * or this function.
 *
 * License is also granted to make and use derivative works provided
 * that such works are identified as "derived from the RSA Data
 * Security, Inc. MD4 Message-Digest Algorithm" in all material
 * mentioning or referencing the derived work.
 *
 * RSA Data Security, Inc. makes no representations concerning either
 * the merchantability of this software or the suitability of this
 * software for any particular purpose. It is provided "as is"
 * without express or implied warranty of any kind.
 *
 * These notices must be retained in any copies of any part of this
 * documentation and/or software.
 */

For the srclib\apr-util\include\apr_md4.h component:

 *
 * This is derived from material copyright RSA Data Security, Inc.
 * Their notice is reproduced below in its entirety.
 *
 * Copyright (C) 1991-2, RSA Data Security, Inc. Created 1991. All
 * rights reserved.
 *
 * License to copy and use this software is granted provided that it
 * is identified as the "RSA Data Security, Inc. MD4 Message-Digest
 * Algorithm" in all material mentioning or referencing this software
 * or this function.
 *
 * License is also granted to make and use derivative works provided
 * that such works are identified as "derived from the RSA Data
 * Security, Inc. MD4 Message-Digest Algorithm" in all material
 * mentioning or referencing the derived work.
 *
 * RSA Data Security, Inc. makes no representations concerning either
 * the merchantability of this software or the suitability of this
 * software for any particular purpose. It is provided "as is"
 * without express or implied warranty of any kind.
 *
 * These notices must be retained in any copies of any part of this
 * documentation and/or software.
 */


For the srclib\apr-util\test\testdbm.c component:

/* ====================================================================
 * The Apache Software License, Version 1.1
 *
 * Copyright (c) 2000-2002 The Apache Software Foundation.  All rights
 * reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3. The end-user documentation included with the redistribution,
 *    if any, must include the following acknowledgment:
 *       "This product includes software developed by the
 *        Apache Software Foundation (http://www.apache.org/)."
 *    Alternately, this acknowledgment may appear in the software itself,
 *    if and wherever such third-party acknowledgments normally appear.
 *
 * 4. The names "Apache" and "Apache Software Foundation" must
 *    not be used to endorse or promote products derived from this
 *    software without prior written permission. For written
 *    permission, please contact apache@apache.org.
 *
 * 5. Products derived from this software may not be called "Apache",
 *    nor may "Apache" appear in their name, without prior written
 *    permission of the Apache Software Foundation.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
 * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * &lt;http://www.apache.org/&gt;.
 *
 * This file came from the SDBM package (written by oz@nexus.yorku.ca).
 * That package was under public domain. This file has been ported to
 * APR, updated to ANSI C and other, newer idioms, and added to the Apache
 * codebase under the above copyright and license.
 */


For the srclib\apr-util\test\testmd4.c component:

 *
 * This is derived from material copyright RSA Data Security, Inc.
 * Their notice is reproduced below in its entirety.
 *
 * Copyright (C) 1990-2, RSA Data Security, Inc. Created 1990. All
 * rights reserved.
 *
 * RSA Data Security, Inc. makes no representations concerning either
 * the merchantability of this software or the suitability of this
 * software for any particular purpose. It is provided "as is"
 * without express or implied warranty of any kind.
 *
 * These notices must be retained in any copies of any part of this
 * documentation and/or software.
 */

For the srclib\apr-util\xml\expat\conftools\install-sh component:

#
# install - install a program, script, or datafile
# This comes from X11R5 (mit/util/scripts/install.sh).
#
# Copyright 1991 by the Massachusetts Institute of Technology
#
# Permission to use, copy, modify, distribute, and sell this software and its
# documentation for any purpose is hereby granted without fee, provided that
# the above copyright notice appear in all copies and that both that
# copyright notice and this permission notice appear in supporting
# documentation, and that the name of M.I.T. not be used in advertising or
# publicity pertaining to distribution of the software without specific,
# written prior permission.  M.I.T. makes no representations about the
# suitability of this software for any purpose.  It is provided "as is"
# without express or implied warranty.
#

For the srclib\pcre\install-sh component:

#
# Copyright 1991 by the Massachusetts Institute of Technology
#
# Permission to use, copy, modify, distribute, and sell this software and its
# documentation for any purpose is hereby granted without fee, provided that
# the above copyright notice appear in all copies and that both that
# copyright notice and this permission notice appear in supporting
# documentation, and that the name of M.I.T. not be used in advertising or
# publicity pertaining to distribution of the software without specific,
# written prior permission.  M.I.T. makes no representations about the
# suitability of this software for any purpose.  It is provided "as is"
# without express or implied warranty.

For the pcre component:

PCRE LICENCE
------------

PCRE is a library of functions to support regular expressions whose syntax
and semantics are as close as possible to those of the Perl 5 language.

Written by: Philip Hazel &lt;ph10@cam.ac.uk&gt;

University of Cambridge Computing Service,
Cambridge, England. Phone: +44 1223 334714.

Copyright (c) 1997-2001 University of Cambridge

Permission is granted to anyone to use this software for any purpose on any
computer system, and to redistribute it freely, subject to the following
restrictions:

1. This software is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

2. The origin of this software must not be misrepresented, either by
   explicit claim or by omission. In practice, this means that if you use
   PCRE in software which you distribute to others, commercially or
   otherwise, you must put a sentence like this

     Regular expression support is provided by the PCRE library package,
     which is open source software, written by Philip Hazel, and copyright
     by the University of Cambridge, England.

   somewhere reasonably visible in your documentation and in any relevant
   files or online help data or similar. A reference to the ftp site for
   the source, that is, to

     ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/

   should also be given in the documentation.

3. Altered versions must be plainly marked as such, and must not be
   misrepresented as being the original software.

4. If PCRE is embedded in any software that is released under the GNU
   General Purpose Licence (GPL), or Lesser General Purpose Licence (LGPL),
   then the terms of that licence shall supersede any condition above with
   which it is incompatible.

The documentation for PCRE, supplied in the "doc" directory, is distributed
under the same terms as the software itself.

End PCRE LICENCE


For the test\zb.c component:

/*                          ZeusBench V1.01
       ===============

This program is Copyright (C) Zeus Technology Limited 1996.

This program may be used and copied freely providing this copyright notice
is not removed.

This software is provided "as is" and any express or implied waranties, 
including but not limited to, the implied warranties of merchantability and
fitness for a particular purpose are disclaimed.  In no event shall 
Zeus Technology Ltd. be liable for any direct, indirect, incidental, special, 
exemplary, or consequential damaged (including, but not limited to, 
procurement of substitute good or services; loss of use, data, or profits;
or business interruption) however caused and on theory of liability.  Whether
in contract, strict liability or tort (including negligence or otherwise) 
arising in any way out of the use of this software, even if advised of the
possibility of such damage.

     Written by Adam Twiss (adam@zeus.co.uk).  March 1996

Thanks to the following people for their input:
  Mike Belshe (mbelshe@netscape.com) 
  Michael Campanella (campanella@stevms.enet.dec.com)

*/

For the expat xml parser component:

Copyright (c) 1998, 1999, 2000 Thai Open Source Software Center Ltd
                               and Clark Cooper

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:
 
The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.
 
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

====================================================================
</FONT></PRE>
<!--TOC subsection A.2&nbsp;&nbsp;PHP scripting language-->

<H3><A NAME="htoc97">A.2</A>&nbsp;&nbsp;PHP scripting language</H3><!--SEC END -->

<P>
The packaged PHP version 5.0.5 or similar version is governed with the
following copyright notice.
</P><FONT SIZE=1>
2</FONT><PRE><FONT SIZE=1>
-------------------------------------------------------------------- 
                  The PHP License, Version 3.0
Copyright (c) 1999 - 2003 The PHP Group. All rights reserved.
-------------------------------------------------------------------- 

Redistribution and use in source and binary forms, with or without
modification, is permitted provided that the following conditions
are met:

  1. Redistributions of source code must retain the above copyright
     notice, this list of conditions and the following disclaimer.
 
  2. Redistributions in binary form must reproduce the above copyright
     notice, this list of conditions and the following disclaimer in
     the documentation and/or other materials provided with the
     distribution.
 
  3. The name "PHP" must not be used to endorse or promote products
     derived from this software without prior written permission. For
     written permission, please contact group@php.net.
  
  4. Products derived from this software may not be called "PHP", nor
     may "PHP" appear in their name, without prior written permission
     from group@php.net.  You may indicate that your software works in
     conjunction with PHP by saying "Foo for PHP" instead of calling
     it "PHP Foo" or "phpfoo"
 
  5. The PHP Group may publish revised and/or new versions of the
     license from time to time. Each version will be given a
     distinguishing version number.
     Once covered code has been published under a particular version
     of the license, you may always continue to use it under the terms
     of that version. You may also choose to use such covered code
     under the terms of any subsequent version of the license
     published by the PHP Group. No one other than the PHP Group has
     the right to modify the terms applicable to covered code created
     under this License.

  6. Redistributions of any form whatsoever must retain the following
     acknowledgment:
     "This product includes PHP, freely available from
     &lt;http://www.php.net/&gt;".

THIS SOFTWARE IS PROVIDED BY THE PHP DEVELOPMENT TEAM ``AS IS'' AND 
ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A 
PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE PHP
DEVELOPMENT TEAM OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES 
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR 
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
OF THE POSSIBILITY OF SUCH DAMAGE.

-------------------------------------------------------------------- 

This software consists of voluntary contributions made by many
individuals on behalf of the PHP Group.

The PHP Group can be contacted via Email at group@php.net.

For more information on the PHP Group and the PHP project, 
please see &lt;http://www.php.net&gt;.

This product includes the Zend Engine, freely available at
&lt;http://www.zend.com&gt;.
</FONT></PRE>
<!--TOC subsection A.3&nbsp;&nbsp;Smarty template engine-->

<H3><A NAME="htoc98">A.3</A>&nbsp;&nbsp;Smarty template engine</H3><!--SEC END -->

<P>
The packaged Smarty version 2.6.11 or similar version is governed with the
following copyright notice.
</P><FONT SIZE=1>
2</FONT><PRE><FONT SIZE=1>
    GNU LESSER GENERAL PUBLIC LICENSE
         Version 2.1, February 1999

 Copyright (C) 1991, 1999 Free Software Foundation, Inc.
     59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

[This is the first released version of the Lesser GPL.  It also counts
 as the successor of the GNU Library Public License, version 2, hence
 the version number 2.1.]

       Preamble

  The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
Licenses are intended to guarantee your freedom to share and change
free software--to make sure the software is free for all its users.

  This license, the Lesser General Public License, applies to some
specially designated software packages--typically libraries--of the
Free Software Foundation and other authors who decide to use it.  You
can use it too, but we suggest you first think carefully about whether
this license or the ordinary General Public License is the better
strategy to use in any particular case, based on the explanations below.

  When we speak of free software, we are referring to freedom of use,
not price.  Our General Public Licenses are designed to make sure that
you have the freedom to distribute copies of free software (and charge
for this service if you wish); that you receive source code or can get
it if you want it; that you can change the software and use pieces of
it in new free programs; and that you are informed that you can do
these things.

  To protect your rights, we need to make restrictions that forbid
distributors to deny you these rights or to ask you to surrender these
rights.  These restrictions translate to certain responsibilities for
you if you distribute copies of the library or if you modify it.

  For example, if you distribute copies of the library, whether gratis
or for a fee, you must give the recipients all the rights that we gave
you.  You must make sure that they, too, receive or can get the source
code.  If you link other code with the library, you must provide
complete object files to the recipients, so that they can relink them
with the library after making changes to the library and recompiling
it.  And you must show them these terms so they know their rights.

  We protect your rights with a two-step method: (1) we copyright the
library, and (2) we offer you this license, which gives you legal
permission to copy, distribute and/or modify the library.

  To protect each distributor, we want to make it very clear that
there is no warranty for the free library.  Also, if the library is
modified by someone else and passed on, the recipients should know
that what they have is not the original version, so that the original
author's reputation will not be affected by problems that might be
introduced by others.

  Finally, software patents pose a constant threat to the existence of
any free program.  We wish to make sure that a company cannot
effectively restrict the users of a free program by obtaining a
restrictive license from a patent holder.  Therefore, we insist that
any patent license obtained for a version of the library must be
consistent with the full freedom of use specified in this license.

  Most GNU software, including some libraries, is covered by the
ordinary GNU General Public License.  This license, the GNU Lesser
General Public License, applies to certain designated libraries, and
is quite different from the ordinary General Public License.  We use
this license for certain libraries in order to permit linking those
libraries into non-free programs.

  When a program is linked with a library, whether statically or using
a shared library, the combination of the two is legally speaking a
combined work, a derivative of the original library.  The ordinary
General Public License therefore permits such linking only if the
entire combination fits its criteria of freedom.  The Lesser General
Public License permits more lax criteria for linking other code with
the library.

  We call this license the "Lesser" General Public License because it
does Less to protect the user's freedom than the ordinary General
Public License.  It also provides other free software developers Less
of an advantage over competing non-free programs.  These disadvantages
are the reason we use the ordinary General Public License for many
libraries.  However, the Lesser license provides advantages in certain
special circumstances.

  For example, on rare occasions, there may be a special need to
encourage the widest possible use of a certain library, so that it becomes
a de-facto standard.  To achieve this, non-free programs must be
allowed to use the library.  A more frequent case is that a free
library does the same job as widely used non-free libraries.  In this
case, there is little to gain by limiting the free library to free
software only, so we use the Lesser General Public License.

  In other cases, permission to use a particular library in non-free
programs enables a greater number of people to use a large body of
free software.  For example, permission to use the GNU C Library in
non-free programs enables many more people to use the whole GNU
operating system, as well as its variant, the GNU/Linux operating
system.

  Although the Lesser General Public License is Less protective of the
users' freedom, it does ensure that the user of a program that is
linked with the Library has the freedom and the wherewithal to run
that program using a modified version of the Library.

  The precise terms and conditions for copying, distribution and
modification follow.  Pay close attention to the difference between a
"work based on the library" and a "work that uses the library".  The
former contains code derived from the library, whereas the latter must
be combined with the library in order to run.

    GNU LESSER GENERAL PUBLIC LICENSE
   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION

  0. This License Agreement applies to any software library or other
program which contains a notice placed by the copyright holder or
other authorized party saying it may be distributed under the terms of
this Lesser General Public License (also called "this License").
Each licensee is addressed as "you".

  A "library" means a collection of software functions and/or data
prepared so as to be conveniently linked with application programs
(which use some of those functions and data) to form executables.

  The "Library", below, refers to any such software library or work
which has been distributed under these terms.  A "work based on the
Library" means either the Library or any derivative work under
copyright law: that is to say, a work containing the Library or a
portion of it, either verbatim or with modifications and/or translated
straightforwardly into another language.  (Hereinafter, translation is
included without limitation in the term "modification".)

  "Source code" for a work means the preferred form of the work for
making modifications to it.  For a library, complete source code means
all the source code for all modules it contains, plus any associated
interface definition files, plus the scripts used to control compilation
and installation of the library.

  Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running a program using the Library is not restricted, and output from
such a program is covered only if its contents constitute a work based
on the Library (independent of the use of the Library in a tool for
writing it).  Whether that is true depends on what the Library does
and what the program that uses the Library does.
  
  1. You may copy and distribute verbatim copies of the Library's
complete source code as you receive it, in any medium, provided that
you conspicuously and appropriately publish on each copy an
appropriate copyright notice and disclaimer of warranty; keep intact
all the notices that refer to this License and to the absence of any
warranty; and distribute a copy of this License along with the
Library.

  You may charge a fee for the physical act of transferring a copy,
and you may at your option offer warranty protection in exchange for a
fee.

  2. You may modify your copy or copies of the Library or any portion
of it, thus forming a work based on the Library, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

    a) The modified work must itself be a software library.

    b) You must cause the files modified to carry prominent notices
    stating that you changed the files and the date of any change.

    c) You must cause the whole of the work to be licensed at no
    charge to all third parties under the terms of this License.

    d) If a facility in the modified Library refers to a function or a
    table of data to be supplied by an application program that uses
    the facility, other than as an argument passed when the facility
    is invoked, then you must make a good faith effort to ensure that,
    in the event an application does not supply such function or
    table, the facility still operates, and performs whatever part of
    its purpose remains meaningful.

    (For example, a function in a library to compute square roots has
    a purpose that is entirely well-defined independent of the
    application.  Therefore, Subsection 2d requires that any
    application-supplied function or table used by this function must
    be optional: if the application does not supply it, the square
    root function must still compute square roots.)

These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Library,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Library, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote
it.

Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Library.

In addition, mere aggregation of another work not based on the Library
with the Library (or with a work based on the Library) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

  3. You may opt to apply the terms of the ordinary GNU General Public
License instead of this License to a given copy of the Library.  To do
this, you must alter all the notices that refer to this License, so
that they refer to the ordinary GNU General Public License, version 2,
instead of to this License.  (If a newer version than version 2 of the
ordinary GNU General Public License has appeared, then you can specify
that version instead if you wish.)  Do not make any other change in
these notices.

  Once this change is made in a given copy, it is irreversible for
that copy, so the ordinary GNU General Public License applies to all
subsequent copies and derivative works made from that copy.

  This option is useful when you wish to copy part of the code of
the Library into a program that is not a library.

  4. You may copy and distribute the Library (or a portion or
derivative of it, under Section 2) in object code or executable form
under the terms of Sections 1 and 2 above provided that you accompany
it with the complete corresponding machine-readable source code, which
must be distributed under the terms of Sections 1 and 2 above on a
medium customarily used for software interchange.

  If distribution of object code is made by offering access to copy
from a designated place, then offering equivalent access to copy the
source code from the same place satisfies the requirement to
distribute the source code, even though third parties are not
compelled to copy the source along with the object code.

  5. A program that contains no derivative of any portion of the
Library, but is designed to work with the Library by being compiled or
linked with it, is called a "work that uses the Library".  Such a
work, in isolation, is not a derivative work of the Library, and
therefore falls outside the scope of this License.

  However, linking a "work that uses the Library" with the Library
creates an executable that is a derivative of the Library (because it
contains portions of the Library), rather than a "work that uses the
library".  The executable is therefore covered by this License.
Section 6 states terms for distribution of such executables.

  When a "work that uses the Library" uses material from a header file
that is part of the Library, the object code for the work may be a
derivative work of the Library even though the source code is not.
Whether this is true is especially significant if the work can be
linked without the Library, or if the work is itself a library.  The
threshold for this to be true is not precisely defined by law.

  If such an object file uses only numerical parameters, data
structure layouts and accessors, and small macros and small inline
functions (ten lines or less in length), then the use of the object
file is unrestricted, regardless of whether it is legally a derivative
work.  (Executables containing this object code plus portions of the
Library will still fall under Section 6.)

  Otherwise, if the work is a derivative of the Library, you may
distribute the object code for the work under the terms of Section 6.
Any executables containing that work also fall under Section 6,
whether or not they are linked directly with the Library itself.

  6. As an exception to the Sections above, you may also combine or
link a "work that uses the Library" with the Library to produce a
work containing portions of the Library, and distribute that work
under terms of your choice, provided that the terms permit
modification of the work for the customer's own use and reverse
engineering for debugging such modifications.

  You must give prominent notice with each copy of the work that the
Library is used in it and that the Library and its use are covered by
this License.  You must supply a copy of this License.  If the work
during execution displays copyright notices, you must include the
copyright notice for the Library among them, as well as a reference
directing the user to the copy of this License.  Also, you must do one
of these things:

    a) Accompany the work with the complete corresponding
    machine-readable source code for the Library including whatever
    changes were used in the work (which must be distributed under
    Sections 1 and 2 above); and, if the work is an executable linked
    with the Library, with the complete machine-readable "work that
    uses the Library", as object code and/or source code, so that the
    user can modify the Library and then relink to produce a modified
    executable containing the modified Library.  (It is understood
    that the user who changes the contents of definitions files in the
    Library will not necessarily be able to recompile the application
    to use the modified definitions.)

    b) Use a suitable shared library mechanism for linking with the
    Library.  A suitable mechanism is one that (1) uses at run time a
    copy of the library already present on the user's computer system,
    rather than copying library functions into the executable, and (2)
    will operate properly with a modified version of the library, if
    the user installs one, as long as the modified version is
    interface-compatible with the version that the work was made with.

    c) Accompany the work with a written offer, valid for at
    least three years, to give the same user the materials
    specified in Subsection 6a, above, for a charge no more
    than the cost of performing this distribution.

    d) If distribution of the work is made by offering access to copy
    from a designated place, offer equivalent access to copy the above
    specified materials from the same place.

    e) Verify that the user has already received a copy of these
    materials or that you have already sent this user a copy.

  For an executable, the required form of the "work that uses the
Library" must include any data and utility programs needed for
reproducing the executable from it.  However, as a special exception,
the materials to be distributed need not include anything that is
normally distributed (in either source or binary form) with the major
components (compiler, kernel, and so on) of the operating system on
which the executable runs, unless that component itself accompanies
the executable.

  It may happen that this requirement contradicts the license
restrictions of other proprietary libraries that do not normally
accompany the operating system.  Such a contradiction means you cannot
use both them and the Library together in an executable that you
distribute.

  7. You may place library facilities that are a work based on the
Library side-by-side in a single library together with other library
facilities not covered by this License, and distribute such a combined
library, provided that the separate distribution of the work based on
the Library and of the other library facilities is otherwise
permitted, and provided that you do these two things:

    a) Accompany the combined library with a copy of the same work
    based on the Library, uncombined with any other library
    facilities.  This must be distributed under the terms of the
    Sections above.

    b) Give prominent notice with the combined library of the fact
    that part of it is a work based on the Library, and explaining
    where to find the accompanying uncombined form of the same work.

  8. You may not copy, modify, sublicense, link with, or distribute
the Library except as expressly provided under this License.  Any
attempt otherwise to copy, modify, sublicense, link with, or
distribute the Library is void, and will automatically terminate your
rights under this License.  However, parties who have received copies,
or rights, from you under this License will not have their licenses
terminated so long as such parties remain in full compliance.

  9. You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Library or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Library (or any work based on the
Library), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Library or works based on it.

  10. Each time you redistribute the Library (or any work based on the
Library), the recipient automatically receives a license from the
original licensor to copy, distribute, link with or modify the Library
subject to these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties with
this License.

  11. If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Library at all.  For example, if a patent
license would not permit royalty-free redistribution of the Library by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Library.

If any portion of this section is held invalid or unenforceable under any
particular circumstance, the balance of the section is intended to apply,
and the section as a whole is intended to apply in other circumstances.

It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

  12. If the distribution and/or use of the Library is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Library under this License may add
an explicit geographical distribution limitation excluding those countries,
so that distribution is permitted only in or among countries not thus
excluded.  In such case, this License incorporates the limitation as if
written in the body of this License.

  13. The Free Software Foundation may publish revised and/or new
versions of the Lesser General Public License from time to time.
Such new versions will be similar in spirit to the present version,
but may differ in detail to address new problems or concerns.

Each version is given a distinguishing version number.  If the Library
specifies a version number of this License which applies to it and
"any later version", you have the option of following the terms and
conditions either of that version or of any later version published by
the Free Software Foundation.  If the Library does not specify a
license version number, you may choose any version ever published by
the Free Software Foundation.

  14. If you wish to incorporate parts of the Library into other free
programs whose distribution conditions are incompatible with these,
write to the author to ask for permission.  For software which is
copyrighted by the Free Software Foundation, write to the Free
Software Foundation; we sometimes make exceptions for this.  Our
decision will be guided by the two goals of preserving the free status
of all derivatives of our free software and of promoting the sharing
and reuse of software generally.

       NO WARRANTY

  15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

  16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
DAMAGES.

       END OF TERMS AND CONDITIONS
</FONT></PRE>
<!--TOC subsection A.4&nbsp;&nbsp;GD graphical library-->

<H3><A NAME="htoc99">A.4</A>&nbsp;&nbsp;GD graphical library</H3><!--SEC END -->

<P>
The packaged GD version 2.0.33 or similar version is governed with the
following copyright notice.
</P><FONT SIZE=1>
2</FONT><PRE><FONT SIZE=1>
 
     Portions copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001,
     2002 by Cold Spring Harbor Laboratory. Funded under Grant
     P41-RR02188 by the National Institutes of Health. 

     Portions copyright 1996, 1997, 1998, 1999, 2000, 2001, 2002 by
     Boutell.Com, Inc. 

     Portions relating to GD2 format copyright 1999, 2000, 2001, 2002
     Philip Warner.
     
     Portions relating to PNG copyright 1999, 2000, 2001, 2002 Greg
     Roelofs. 

     Portions relating to gdttf.c copyright 1999, 2000, 2001, 2002 John  
     Ellson (ellson@lucent.com).
   
     Portions relating to gdft.c copyright 2001, 2002 John Ellson  
     (ellson@lucent.com).  

     Portions relating to JPEG and to color quantization copyright 2000,
     2001, 2002, Doug Becker and copyright (C) 1994, 1995, 1996, 1997,
     1998, 1999, 2000, 2001, 2002, Thomas G. Lane. This software is
     based in part on the work of the Independent JPEG Group. See the
     file README-JPEG.TXT for more information.

     Portions relating to WBMP copyright 2000, 2001, 2002 Maurice
     Szmurlo and Johan Van den Brande.

     Permission has been granted to copy, distribute and modify gd in
     any context without fee, including a commercial application,
     provided that this notice is present in user-accessible supporting
     documentation.

     This does not affect your ownership of the derived work itself, and 
     the intent is to assure proper credit for the authors of gd, not to
     interfere with your productive use of gd. If you have questions,
     ask. "Derived works" includes all programs that utilize the   
     library. Credit must be given in user-accessible documentation.

     This software is provided "AS IS." The copyright holders disclaim  
     all warranties, either express or implied, including but not
     limited to implied warranties of merchantability and fitness for a
     particular purpose, with respect to this code and accompanying  
     documentation.

     Although their code does not appear in gd, the authors wish to thank
     David Koblas, David Rowley, and Hutchison Avenue Software Corporation
     for their prior contributions.

</FONT></PRE>
<!--TOC subsection A.5&nbsp;&nbsp;Webalizer web-log report generator-->

<H3><A NAME="htoc100">A.5</A>&nbsp;&nbsp;Webalizer web-log report generator</H3><!--SEC END -->

<P>
The packaged Webalizer version 2.01-10 or similar version is governed with the
following copyright notice.
</P><FONT SIZE=1>
2</FONT><PRE><FONT SIZE=1>
      GNU GENERAL PUBLIC LICENSE
         Version 2, June 1991

 Copyright (C) 1989, 1991 Free Software Foundation, Inc.
 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

       Preamble

  The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
License is intended to guarantee your freedom to share and change free
software--to make sure the software is free for all its users.  This
General Public License applies to most of the Free Software
Foundation's software and to any other program whose authors commit to
using it.  (Some other Free Software Foundation software is covered by
the GNU Library General Public License instead.)  You can apply it to
your programs, too.

  When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
this service if you wish), that you receive source code or can get it
if you want it, that you can change the software or use pieces of it
in new free programs; and that you know you can do these things.

  To protect your rights, we need to make restrictions that forbid
anyone to deny you these rights or to ask you to surrender the rights.
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.

  For example, if you distribute copies of such a program, whether
gratis or for a fee, you must give the recipients all the rights that
you have.  You must make sure that they, too, receive or can get the
source code.  And you must show them these terms so they know their
rights.

  We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.

  Also, for each author's protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors' reputations.

  Finally, any free program is threatened constantly by software
patents.  We wish to avoid the danger that redistributors of a free
program will individually obtain patent licenses, in effect making the
program proprietary.  To prevent this, we have made it clear that any
patent must be licensed for everyone's free use or not licensed at all.

  The precise terms and conditions for copying, distribution and
modification follow.

      GNU GENERAL PUBLIC LICENSE
   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION

  0. This License applies to any program or other work which contains
a notice placed by the copyright holder saying it may be distributed
under the terms of this General Public License.  The "Program", below,
refers to any such program or work, and a "work based on the Program"
means either the Program or any derivative work under copyright law:
that is to say, a work containing the Program or a portion of it,
either verbatim or with modifications and/or translated into another
language.  (Hereinafter, translation is included without limitation in
the term "modification".)  Each licensee is addressed as "you".

Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running the Program is not restricted, and the output from the Program
is covered only if its contents constitute a work based on the
Program (independent of having been made by running the Program).
Whether that is true depends on what the Program does.

  1. You may copy and distribute verbatim copies of the Program's
source code as you receive it, in any medium, provided that you
conspicuously and appropriately publish on each copy an appropriate
copyright notice and disclaimer of warranty; keep intact all the
notices that refer to this License and to the absence of any warranty;
and give any other recipients of the Program a copy of this License
along with the Program.

You may charge a fee for the physical act of transferring a copy, and
you may at your option offer warranty protection in exchange for a fee.

  2. You may modify your copy or copies of the Program or any portion
of it, thus forming a work based on the Program, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

    a) You must cause the modified files to carry prominent notices
    stating that you changed the files and the date of any change.

    b) You must cause any work that you distribute or publish, that in
    whole or in part contains or is derived from the Program or any
    part thereof, to be licensed as a whole at no charge to all third
    parties under the terms of this License.

    c) If the modified program normally reads commands interactively
    when run, you must cause it, when started running for such
    interactive use in the most ordinary way, to print or display an
    announcement including an appropriate copyright notice and a
    notice that there is no warranty (or else, saying that you provide
    a warranty) and that users may redistribute the program under
    these conditions, and telling the user how to view a copy of this
    License.  (Exception: if the Program itself is interactive but
    does not normally print such an announcement, your work based on
    the Program is not required to print an announcement.)

These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Program,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Program, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote it.

Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Program.

In addition, mere aggregation of another work not based on the Program
with the Program (or with a work based on the Program) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

  3. You may copy and distribute the Program (or a work based on it,
under Section 2) in object code or executable form under the terms of
Sections 1 and 2 above provided that you also do one of the following:

    a) Accompany it with the complete corresponding machine-readable
    source code, which must be distributed under the terms of Sections
    1 and 2 above on a medium customarily used for software interchange; or,

    b) Accompany it with a written offer, valid for at least three
    years, to give any third party, for a charge no more than your
    cost of physically performing source distribution, a complete
    machine-readable copy of the corresponding source code, to be
    distributed under the terms of Sections 1 and 2 above on a medium
    customarily used for software interchange; or,

    c) Accompany it with the information you received as to the offer
    to distribute corresponding source code.  (This alternative is
    allowed only for noncommercial distribution and only if you
    received the program in object code or executable form with such
    an offer, in accord with Subsection b above.)

The source code for a work means the preferred form of the work for
making modifications to it.  For an executable work, complete source
code means all the source code for all modules it contains, plus any
associated interface definition files, plus the scripts used to
control compilation and installation of the executable.  However, as a
special exception, the source code distributed need not include
anything that is normally distributed (in either source or binary
form) with the major components (compiler, kernel, and so on) of the
operating system on which the executable runs, unless that component
itself accompanies the executable.

If distribution of executable or object code is made by offering
access to copy from a designated place, then offering equivalent
access to copy the source code from the same place counts as
distribution of the source code, even though third parties are not
compelled to copy the source along with the object code.

  4. You may not copy, modify, sublicense, or distribute the Program
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense or distribute the Program is
void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under
this License will not have their licenses terminated so long as such
parties remain in full compliance.

  5. You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Program or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Program (or any work based on the
Program), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Program or works based on it.

  6. Each time you redistribute the Program (or any work based on the
Program), the recipient automatically receives a license from the
original licensor to copy, distribute or modify the Program subject to
these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties to
this License.

  7. If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Program at all.  For example, if a patent
license would not permit royalty-free redistribution of the Program by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Program.

If any portion of this section is held invalid or unenforceable under
any particular circumstance, the balance of the section is intended to
apply and the section as a whole is intended to apply in other
circumstances.

It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system, which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

  8. If the distribution and/or use of the Program is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Program under this License
may add an explicit geographical distribution limitation excluding
those countries, so that distribution is permitted only in or among
countries not thus excluded.  In such case, this License incorporates
the limitation as if written in the body of this License.

  9. The Free Software Foundation may publish revised and/or new versions
of the General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

Each version is given a distinguishing version number.  If the Program
specifies a version number of this License which applies to it and "any
later version", you have the option of following the terms and conditions
either of that version or of any later version published by the Free
Software Foundation.  If the Program does not specify a version number of
this License, you may choose any version ever published by the Free Software
Foundation.

  10. If you wish to incorporate parts of the Program into other free
programs whose distribution conditions are different, write to the author
to ask for permission.  For software which is copyrighted by the Free
Software Foundation, write to the Free Software Foundation; we sometimes
make exceptions for this.  Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software and
of promoting the sharing and reuse of software generally.

       NO WARRANTY

  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
REPAIR OR CORRECTION.

  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.

       END OF TERMS AND CONDITIONS

 Appendix: How to Apply These Terms to Your New Programs

  If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

  To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
convey the exclusion of warranty; and each file should have at least
the "copyright" line and a pointer to where the full notice is found.

    &lt;one line to give the program's name and a brief idea of what it does.&gt;
    Copyright (C) 19yy  &lt;name of author&gt;

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA

Also add information on how to contact you by electronic and paper mail.

If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:

    Gnomovision version 69, Copyright (C) 19yy name of author
    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
    This is free software, and you are welcome to redistribute it
    under certain conditions; type `show c' for details.

The hypothetical commands `show w' and `show c' should show the appropriate
parts of the General Public License.  Of course, the commands you use may
be called something other than `show w' and `show c'; they could even be
mouse-clicks or menu items--whatever suits your program.

You should also get your employer (if you work as a programmer) or your
school, if any, to sign a "copyright disclaimer" for the program, if
necessary.  Here is a sample; alter the names:

  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
  `Gnomovision' (which makes passes at compilers) written by James Hacker.

  &lt;signature of Ty Coon&gt;, 1 April 1989
  Ty Coon, President of Vice

This General Public License does not permit incorporating your program into
proprietary programs.  If your program is a subroutine library, you may
consider it more useful to permit linking proprietary applications with the
library.  If this is what you want to do, use the GNU Library General
Public License instead of this License.
</FONT></PRE>
<!--TOC subsection A.6&nbsp;&nbsp;MySQL database-->

<H3><A NAME="htoc101">A.6</A>&nbsp;&nbsp;MySQL database</H3><!--SEC END -->

<P>
The packaged MySQL version 4.1.9 or similar version is governed with the
following copyright notice.
</P><FONT SIZE=1>
2</FONT><PRE><FONT SIZE=1>
Appendix H GNU General Public License
*************************************

                         Version 2, June 1991

     Copyright (C) 1989, 1991 Free Software Foundation, Inc.
     59 Temple Place - Suite 330, Boston, MA  02111-1307, USA

     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.

Preamble
========

The licenses for most software are designed to take away your freedom
to share and change it.  By contrast, the GNU General Public License is
intended to guarantee your freedom to share and change free
software--to make sure the software is free for all its users.  This
General Public License applies to most of the Free Software
Foundation's software and to any other program whose authors commit to
using it.  (Some other Free Software Foundation software is covered by
the GNU Library General Public License instead.)  You can apply it to
your programs, too.

When we speak of free software, we are referring to freedom, not price.
Our General Public Licenses are designed to make sure that you have
the freedom to distribute copies of free software (and charge for this
service if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs; and that you know you can do these things.

To protect your rights, we need to make restrictions that forbid anyone
to deny you these rights or to ask you to surrender the rights.  These
restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.

For example, if you distribute copies of such a program, whether gratis
or for a fee, you must give the recipients all the rights that you
have.  You must make sure that they, too, receive or can get the source
code.  And you must show them these terms so they know their rights.

We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.

Also, for each author's protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors' reputations.

Finally, any free program is threatened constantly by software patents.
We wish to avoid the danger that redistributors of a free program will
individually obtain patent licenses, in effect making the program
proprietary.  To prevent this, we have made it clear that any patent
must be licensed for everyone's free use or not licensed at all.

The precise terms and conditions for copying, distribution and
modification follow.

                      GNU GENERAL PUBLIC LICENSE
    TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
  0. This License applies to any program or other work which contains a
     notice placed by the copyright holder saying it may be distributed
     under the terms of this General Public License.  The "Program",
     below, refers to any such program or work, and a "work based on
     the Program" means either the Program or any derivative work under
     copyright law: that is to say, a work containing the Program or a
     portion of it, either verbatim or with modifications and/or
     translated into another language.  (Hereinafter, translation is
     included without limitation in the term "modification".)  Each
     licensee is addressed as "you".

     Activities other than copying, distribution and modification are
     not covered by this License; they are outside its scope.  The act
     of running the Program is not restricted, and the output from the
     Program is covered only if its contents constitute a work based on
     the Program (independent of having been made by running the
     Program).  Whether that is true depends on what the Program does.

  1. You may copy and distribute verbatim copies of the Program's
     source code as you receive it, in any medium, provided that you
     conspicuously and appropriately publish on each copy an appropriate
     copyright notice and disclaimer of warranty; keep intact all the
     notices that refer to this License and to the absence of any
     warranty; and give any other recipients of the Program a copy of
     this License along with the Program.

     You may charge a fee for the physical act of transferring a copy,
     and you may at your option offer warranty protection in exchange
     for a fee.

  2. You may modify your copy or copies of the Program or any portion
     of it, thus forming a work based on the Program, and copy and
     distribute such modifications or work under the terms of Section 1
     above, provided that you also meet all of these conditions:

       a. You must cause the modified files to carry prominent notices
          stating that you changed the files and the date of any change.

       b. You must cause any work that you distribute or publish, that
          in whole or in part contains or is derived from the Program
          or any part thereof, to be licensed as a whole at no charge
          to all third parties under the terms of this License.

       c. If the modified program normally reads commands interactively
          when run, you must cause it, when started running for such
          interactive use in the most ordinary way, to print or display
          an announcement including an appropriate copyright notice and
          a notice that there is no warranty (or else, saying that you
          provide a warranty) and that users may redistribute the
          program under these conditions, and telling the user how to
          view a copy of this License.  (Exception: if the Program
          itself is interactive but does not normally print such an
          announcement, your work based on the Program is not required
          to print an announcement.)

     These requirements apply to the modified work as a whole.  If
     identifiable sections of that work are not derived from the
     Program, and can be reasonably considered independent and separate
     works in themselves, then this License, and its terms, do not
     apply to those sections when you distribute them as separate
     works.  But when you distribute the same sections as part of a
     whole which is a work based on the Program, the distribution of
     the whole must be on the terms of this License, whose permissions
     for other licensees extend to the entire whole, and thus to each
     and every part regardless of who wrote it.

     Thus, it is not the intent of this section to claim rights or
     contest your rights to work written entirely by you; rather, the
     intent is to exercise the right to control the distribution of
     derivative or collective works based on the Program.

     In addition, mere aggregation of another work not based on the
     Program with the Program (or with a work based on the Program) on
     a volume of a storage or distribution medium does not bring the
     other work under the scope of this License.

  3. You may copy and distribute the Program (or a work based on it,
     under Section 2) in object code or executable form under the terms
     of Sections 1 and 2 above provided that you also do one of the
     following:

       a. Accompany it with the complete corresponding machine-readable
          source code, which must be distributed under the terms of
          Sections 1 and 2 above on a medium customarily used for
          software interchange; or,

       b. Accompany it with a written offer, valid for at least three
          years, to give any third-party, for a charge no more than your
          cost of physically performing source distribution, a complete
          machine-readable copy of the corresponding source code, to be
          distributed under the terms of Sections 1 and 2 above on a
          medium customarily used for software interchange; or,

       c. Accompany it with the information you received as to the offer
          to distribute corresponding source code.  (This alternative is
          allowed only for noncommercial distribution and only if you
          received the program in object code or executable form with
          such an offer, in accord with Subsection b above.)

     The source code for a work means the preferred form of the work for
     making modifications to it.  For an executable work, complete
     source code means all the source code for all modules it contains,
     plus any associated interface definition files, plus the scripts
     used to control compilation and installation of the executable.
     However, as a special exception, the source code distributed need
     not include anything that is normally distributed (in either
     source or binary form) with the major components (compiler,
     kernel, and so on) of the operating system on which the executable
     runs, unless that component itself accompanies the executable.

     If distribution of executable or object code is made by offering
     access to copy from a designated place, then offering equivalent
     access to copy the source code from the same place counts as
     distribution of the source code, even though third parties are not
     compelled to copy the source along with the object code.

  4. You may not copy, modify, sublicense, or distribute the Program
     except as expressly provided under this License.  Any attempt
     otherwise to copy, modify, sublicense or distribute the Program is
     void, and will automatically terminate your rights under this
     License.  However, parties who have received copies, or rights,
     from you under this License will not have their licenses
     terminated so long as such parties remain in full compliance.

  5. You are not required to accept this License, since you have not
     signed it.  However, nothing else grants you permission to modify
     or distribute the Program or its derivative works.  These actions
     are prohibited by law if you do not accept this License.
     Therefore, by modifying or distributing the Program (or any work
     based on the Program), you indicate your acceptance of this
     License to do so, and all its terms and conditions for copying,
     distributing or modifying the Program or works based on it.

  6. Each time you redistribute the Program (or any work based on the
     Program), the recipient automatically receives a license from the
     original licensor to copy, distribute or modify the Program
     subject to these terms and conditions.  You may not impose any
     further restrictions on the recipients' exercise of the rights
     granted herein.  You are not responsible for enforcing compliance
     by third parties to this License.

  7. If, as a consequence of a court judgment or allegation of patent
     infringement or for any other reason (not limited to patent
     issues), conditions are imposed on you (whether by court order,
     agreement or otherwise) that contradict the conditions of this
     License, they do not excuse you from the conditions of this
     License.  If you cannot distribute so as to satisfy simultaneously
     your obligations under this License and any other pertinent
     obligations, then as a consequence you may not distribute the
     Program at all.  For example, if a patent license would not permit
     royalty-free redistribution of the Program by all those who
     receive copies directly or indirectly through you, then the only
     way you could satisfy both it and this License would be to refrain
     entirely from distribution of the Program.

     If any portion of this section is held invalid or unenforceable
     under any particular circumstance, the balance of the section is
     intended to apply and the section as a whole is intended to apply
     in other circumstances.

     It is not the purpose of this section to induce you to infringe any
     patents or other property right claims or to contest validity of
     any such claims; this section has the sole purpose of protecting
     the integrity of the free software distribution system, which is
     implemented by public license practices.  Many people have made
     generous contributions to the wide range of software distributed
     through that system in reliance on consistent application of that
     system; it is up to the author/donor to decide if he or she is
     willing to distribute software through any other system and a
     licensee cannot impose that choice.

     This section is intended to make thoroughly clear what is believed
     to be a consequence of the rest of this License.

  8. If the distribution and/or use of the Program is restricted in
     certain countries either by patents or by copyrighted interfaces,
     the original copyright holder who places the Program under this
     License may add an explicit geographical distribution limitation
     excluding those countries, so that distribution is permitted only
     in or among countries not thus excluded.  In such case, this
     License incorporates the limitation as if written in the body of
     this License.

  9. The Free Software Foundation may publish revised and/or new
     versions of the General Public License from time to time.  Such
     new versions will be similar in spirit to the present version, but
     may differ in detail to address new problems or concerns.

     Each version is given a distinguishing version number.  If the
     Program specifies a version number of this License which applies
     to it and "any later version", you have the option of following
     the terms and conditions either of that version or of any later
     version published by the Free Software Foundation.  If the Program
     does not specify a version number of this License, you may choose
     any version ever published by the Free Software Foundation.

 10. If you wish to incorporate parts of the Program into other free
     programs whose distribution conditions are different, write to the
     author to ask for permission.  For software which is copyrighted
     by the Free Software Foundation, write to the Free Software
     Foundation; we sometimes make exceptions for this.  Our decision
     will be guided by the two goals of preserving the free status of
     all derivatives of our free software and of promoting the sharing
     and reuse of software generally.

                                NO WARRANTY
 11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO
     WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE
     LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
     HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT
     WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT
     NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
     FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE
     QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
     PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY
     SERVICING, REPAIR OR CORRECTION.

 12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
     WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY
     MODIFY AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE
     LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL,
     INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR
     INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
     DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU
     OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY
     OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN
     ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

                      END OF TERMS AND CONDITIONS
How to Apply These Terms to Your New Programs
=============================================

If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these
terms.

To do so, attach the following notices to the program.  It is safest to
attach them to the start of each source file to most effectively convey
the exclusion of warranty; and each file should have at least the
"copyright" line and a pointer to where the full notice is found.

     ONE LINE TO GIVE THE PROGRAM'S NAME AND A BRIEF IDEA OF WHAT IT DOES.
     Copyright (C) YYYY  NAME OF AUTHOR

     This program is free software; you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published by
     the Free Software Foundation; either version 2 of the License, or
     (at your option) any later version.

     This program is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with this program; if not, write to the Free Software
     Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.

Also add information on how to contact you by electronic and paper mail.

If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:

     Gnomovision version 69, Copyright (C) 19YY NAME OF AUTHOR
     Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
     This is free software, and you are welcome to redistribute it
     under certain conditions; type `show c' for details.

The hypothetical commands `show w' and `show c' should show the
appropriate parts of the General Public License.  Of course, the
commands you use may be called something other than `show w' and `show
c'; they could even be mouse-clicks or menu items--whatever suits your
program.

You should also get your employer (if you work as a programmer) or your
school, if any, to sign a "copyright disclaimer" for the program, if
necessary.  Here is a sample; alter the names:

     Yoyodyne, Inc., hereby disclaims all copyright interest in the program
     `Gnomovision' (which makes passes at compilers) written by James Hacker.

     SIGNATURE OF TY COON, 1 April 1989
     Ty Coon, President of Vice

This General Public License does not permit incorporating your program
into proprietary programs.  If your program is a subroutine library,
you may consider it more useful to permit linking proprietary
applications with the library.  If this is what you want to do, use the
GNU Library General Public License instead of this License.

</FONT></PRE>
<!--TOC section B&nbsp;&nbsp;File structures and protocols-->

<H2><A NAME="htoc102">B</A>&nbsp;&nbsp;File structures and protocols</H2><!--SEC END -->

<!--TOC subsection B.1&nbsp;&nbsp;
 <TT>report.log</TT> structure-->

<H3><A NAME="htoc103">B.1</A>&nbsp;&nbsp;<A NAME="sec:reportlog-format"></A>
 <TT>report.log</TT> structure</H3><!--SEC END -->

<P>
Each section of a web-site being exported or imported has a <CODE>.htglobule</CODE>
directory which contains accounting information for that web-site section. In
this directory resides a.o. the <CODE>report.log</CODE>. This log contains
information which should be collected at the origin server to make decisions,
statistics and a merged log of requests (which can be converted into a
access.log).
</P>
<P>
The report.log format is completely different than apache-style log files,
because this report.log contains much more information than just requests and
has fields which are more suitable for a distributed environment than the
traditional access log formats such as common and combined log formats
</P>
<P>
To aid future development, the report.log is not a strict format, but instead
is a free-format file with limited rules on how to separate records of
requests and other relevant data and the fields of data inside a record. It
does not describe which fields in which order should be present.
</P>
<P>
The report.log is a series of unstructured records of events. Each record is
contained on a single line. Lines which start with a hash sign (<CODE>#</CODE>)
should be ignored and can be used for comments. Each line contains one or
multiple fields with data. Fields are in principle separated with one or
multiple spaced or tabs.
</P>
<P>
A field is either a single letter, used in the report.log to identify
different type of events or is a key--value pair. Key and value are seperated
with either a equal sign (<CODE>=</CODE>), a colon (<CODE>:</CODE>) or semi-colon
(<CODE>;</CODE>). The different separators serve different purposes:
<DL COMPACT=compact><DT><DD><B><TT>=</TT></B><BR>
Used to separate a key from a value, where the value can only be a number.
 These numbers should bare some relation to each other. For instance,
 identifiers in principle bear no relation to each other as two persons with
 ID 3 and one with ID 5 have no logical personal bonds with each other, not
 can you induce that there should also be a person with ID 4.<BR>
However a timestamp would be suitable to use with this, as there is a
 logical enumeration of time.
<DT><DD><B><TT>;</TT></B><BR>
The semi-colon is a general key--value pair seperator, where the value field
 should not be interpreted as a number, but as some identifier. Normally,
 there is a limited amount of possible values for a certain key in the
 report.log. In other words; you should not expect to see generic text, but
 only keywords or identifiers as values in a semi-colon field.
<DT><DD><B><TT>:</TT></B><BR>
The colon field serves the same purpose as the semi-colon separator, but the
 colon can only be used as the last key--value pair and the value in
 that comes after the colon may contain spaces and/or tabs.
</DL>
</P>
<P>
The following event types can be in the report.log:
<DL COMPACT=compact><DT><DD><B><TT>R</TT></B> a document has been requested by some browsing user;
<DT><DD><B><TT>U</TT></B> a document update has been detected;
<DT><DD><B><TT>I</TT></B> the document has been invalidated;
<DT><DD><B><TT>A</TT></B> to indicate that the policy of a document has
 changed;
<DT><DD><B><TT>E</TT></B> to indicate that a document has been evicted from
 the cache.
</DL>
</P>
<P>
The following fields can be expected:
<DL COMPACT=compact><DT><DD><TT>t=</TT> The timestamp when the event occured.
<DT><DD><TT>path:</TT> The path component of a URL, starting without the initial
location from which it was exported (or imported).
<DT><DD><TT>old;</TT> The previous (replication) policy that has been used.
<DT><DD><TT>new;</TT> The new (replication) policy to be used on a document.
<DT><DD><TT>lastmod=</TT> A timestamp with the last modification time of the
 document.
<DT><DD><TT>docsize=</TT> The (new) document size.
<DT><DD><TT>client;</TT> The IP number of the peer (e.g. the browsing user doing
 the request).
<DT><DD><TT>elapsed=</TT> The amount of time needed to do something (serve a
 request for instance).
<DT><DD><TT>sndsize=</TT> The number of bytes reported to be shipped.
<DT><DD><TT>browser;</TT> The User-Agent reported from the browsing user (very
 optional information).
<DT><DD><TT>referer</TT> The Referer field in the request reported by the
 browsing user (very optional information).
</DL>
</P>
<P>
Timestamps and durations are in <CODE>apr_time_t</CODE> precision, normally
microseconds. Sizes are in bytes.
</P>
<P>
Normally, but not guaranteed, the following fields are present for each event
type:
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=1>
<TR><TD ALIGN=left NOWRAP><B><TT>R</TT></B></TD>
<TD ALIGN=left NOWRAP>t, client, elapsed, sndsize, browser, referer, path</TD>
</TR>
<TR><TD ALIGN=left NOWRAP><B><TT>U</TT></B></TD>
<TD ALIGN=left NOWRAP>t, lastmod, docsize, path</TD>
</TR>
<TR><TD ALIGN=left NOWRAP><B><TT>A</TT></B></TD>
<TD ALIGN=left NOWRAP>t, old, new, path</TD>
</TR>
<TR><TD ALIGN=left NOWRAP><B><TT>E</TT></B></TD>
<TD ALIGN=left NOWRAP>t, path</TD>
</TR>
<TR><TD ALIGN=left NOWRAP><B><TT>I</TT></B></TD>
<TD ALIGN=left NOWRAP>t, path</TD>
</TR></TABLE>
</P>





<!--TOC section References-->

<H2>References</H2><!--SEC END -->
<DL COMPACT=compact><DT><A NAME="baryshnikov2005"><FONT COLOR=purple>[1]</FONT></A><DD>
Y.&nbsp;Baryshnikov, E.G. Coffman, G.&nbsp;Pierre, D.&nbsp;Rubenstein, M.&nbsp;Squillante, and
 T.&nbsp;Yimwadsana, <EM>Predictability of web-server traffic congestion</EM>, Proc.
 10th Intl. Workshop on Web Content Caching and Distribution (Sophia
 Antipolis, France), September 2005, pp.&nbsp;97---103.<BR>
<BR>
<DT><A NAME="pierre2002a"><FONT COLOR=purple>[2]</FONT></A><DD>
Guillaume Pierre, Maarten van Steen, and Andrew&nbsp;S. Tanenbaum, <EM>Dynamically
 selecting optimal distribution strategies for Web documents</EM>, IEEE
 Transactions on Computers <B>51</B> (2002), no.&nbsp;6, 637--651,
 <A HREF="http://www.cs.vu.nl/~gpierre/publi/DSODSWD_toc2002.php3"><TT>http://www.cs.vu.nl/~gpierre/publi/DSODSWD_toc2002.php3</TT></A>.<BR>
<BR>
<DT><A NAME="swami2005c"><FONT COLOR=purple>[3]</FONT></A><DD>
Swaminathan Sivasubramanian, Guillaume Pierre, Maarten van Steen, and Gustavo
 Alonso, <EM>GlobeCBC: Content-blind result caching for dynamic web
 applications</EM>, Submitted for publication, October 2005,
 <A HREF="http://www.globule.org/publi/GCBRCDWA_draft.html"><TT>http://www.globule.org/publi/GCBRCDWA_draft.html</TT></A>.<BR>
<BR>
<DT><A NAME="szymaniak2004a"><FONT COLOR=purple>[4]</FONT></A><DD>
Michal Szymaniak, Guillaume Pierre, and Maarten van Steen, <EM>Scalable
 cooperative latency estimation</EM>, Proceedings of the 10th International
 Conference on Parallel and Distributed Systems (ICPADS) (Newport Beach, CA,
 USA), July 2004,
 <A HREF="http://www.globule.org/publi/SCLE_icpads2004.html"><TT>http://www.globule.org/publi/SCLE_icpads2004.html</TT></A>.<BR>
<BR>
<DT><A NAME="szymaniak2005a"><FONT COLOR=purple>[5]</FONT></A><DD>
Michal Szymaniak, Guillaume Pierre, and Maarten van Steen, <EM>Latency-driven
 replica placement</EM>, Proceedings of the International Symposium on
 Applications and the Internet (SAINT) (Trento, Italy), February 2005,
 <A HREF="http://www.globule.org/publi/LDRP_saint2005.html"><TT>http://www.globule.org/publi/LDRP_saint2005.html</TT></A>.</DL>


&nbsp;<BR>
<BR>
<!--BEGIN NOTES document-->
<HR WIDTH="50%" SIZE=1><DL><DT><A NAME="note1" HREF="#text1"><FONT SIZE=5>1</FONT></A><DD>It cannot hurt adding this to all occurrences,
although it is strictly only needed for Globule sections and the URL specified
by GlobuleAdminURL.
<DT><A NAME="note2" HREF="#text2"><FONT SIZE=5>2</FONT></A><DD>In this configuration we must have a
separate global ServerName, different from the one we will be replicating in
this example. This because <TT>http://www.revolutionware.net/</TT> is being
exported from ``/'' and we had learned that the URL specified by
GlobuleAdminURL cannot overlap with an exported origin web-site. If you would
only replicate a partial site, one can use just a single hostname.
<DT><A NAME="note3" HREF="#text3"><FONT SIZE=5>3</FONT></A><DD>With HTTP redirection
this does not do a lot of good, as new browsing clients cannot be redirected
to the replica servers when the origin is down, but this feature will become
more valuable with DNS redirection
<DT><A NAME="note4" HREF="#text4"><FONT SIZE=5>4</FONT></A><DD>Note that in the backup server's config below the
GlobuleDefaultReplicationPolicy is set to TTL. This is the recommended
configuration: it simply means that, should a replica server fetch a document
copy from the backup, it would keep its copy for a given duration before
trying to revalidate it from the origin or its replica.
<DT><A NAME="note5" HREF="#text5"><FONT SIZE=5>5</FONT></A><DD>Do not use specific names for any other purpose, unless you
<EM>really</EM> know what you are doing! In particular, if one server takes
part in the replication of two different sites, then it must have two
different specific names, one for each site and these should not be the
original (local) hostnames.
<DT><A NAME="note6" HREF="#text6"><FONT SIZE=5>6</FONT></A><DD>If your registrar provides you with a web interface to assign
DNS records, the exact syntax may be different. Check your registrar's
documentation.
<DT><A NAME="note7" HREF="#text7"><FONT SIZE=5>7</FONT></A><DD>The regular access-logs are also only
partially sorted as the timestamp recorded is the start of a web-page
transfer, but the access is written into the access-log at the end of the
transfer. This interval may already be large, but with the accumulated
Globule report-log this interval may be larger.
<DT><A NAME="note8" HREF="#text8"><FONT SIZE=5>8</FONT></A><DD>or ServerName, but these are
not user in normal configurations.
</DL>
<!--END NOTES-->
<!--HTMLFOOT-->

    <address>globule@globule.org<br>
  June 29, 2006
    </address>
    </td></tr></table>
  <!--ENDHTML-->
<!--FOOTER-->
<HR SIZE=2>
<BLOCKQUOTE><EM>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</EM><A HREF="http://pauillac.inria.fr/~maranget/hevea/index.html"><EM>H<FONT SIZE=2><sup>E</sup></FONT>V<FONT SIZE=2><sup>E</sup></FONT>A</EM></A><EM>.
</EM></BLOCKQUOTE>
</BODY>
</HTML>
